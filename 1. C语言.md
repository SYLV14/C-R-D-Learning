# åŸºç¡€çŸ¥è¯†

## è®¡ç®—æœºå•ä½

- bitå’ŒByte
  
    bit --- æ¯”ç‰¹ --- 1ä¸ªæ¯”ç‰¹ä½å¯å­˜1ä¸ªäºŒè¿›åˆ¶ï¼ˆ0ï¼Œ1ï¼‰ --- è®¡ç®—æœºä¸­æœ€å°çš„å­˜å‚¨å•ä½
    
    byte --- å­—èŠ‚ --- 8ä¸ªæ¯”ç‰¹ä½ç­‰äº1ä¸ªå­—èŠ‚ï¼ˆå¦‚ï¼š10110011ï¼‰ --- è®¡ç®—è®¡ä¸­æœ€åŸºæœ¬çš„å­˜å‚¨å•å…ƒ
    
    ğŸ’¡ 1ä¸ªå­—èŠ‚æ€»å…±æœ‰2^8^ç§äºŒè¿›åˆ¶åºåˆ—ï¼Œæœ€å°å¯è¡¨ç¤ºåè¿›åˆ¶0ï¼Œæœ€å¤§å¯è¡¨ç¤º2^8^-1å³255
    
- è®¡ç®—æœºå•ä½é—´çš„äº’ç›¸è½¬æ¢
  
    1 Byte = 8 bit
    
    1 KB = 1024 Byte
    
    1 MB = 1024 KB
    
    1 GB = 1024 MB
    
    1 TB = 1024 GB
    

## è®¤è¯†è¿›åˆ¶

- å››ç§è¿›åˆ¶å½¢å¼

    äºŒè¿›åˆ¶Bï¼š ç”±0å’Œ1ä¸¤ä¸ªæ•°å­—ç»„æˆ

    å…«è¿›åˆ¶Qï¼š ç”±0-7æ•°å­—ç»„æˆï¼Œä¸ºäº†åŒºåˆ†ä¸å…¶ä»–è¿›åˆ¶çš„æ•°å­—åŒºåˆ«ï¼Œ**å¼€å¤´éƒ½æ˜¯ä»¥0å¼€å§‹**

    åè¿›åˆ¶Dï¼š éƒ½æ˜¯ä»¥0-9è¿™ä¹ä¸ªæ•°å­—ç»„æˆï¼Œä¸èƒ½ä»¥0å¼€å¤´

    åå…­è¿›åˆ¶Hï¼šç”±0-9å’ŒA-Fç»„æˆã€‚ä¸ºäº†åŒºåˆ†äºå…¶ä»–æ•°å­—çš„åŒºåˆ«ï¼Œ**å¼€å¤´éƒ½æ˜¯ä»¥0xå¼€å§‹**

- **æ•´æ•°è¿›åˆ¶è¡¨**

| äºŒè¿›åˆ¶ | å…«è¿›åˆ¶ | åè¿›åˆ¶ | åå…­è¿›åˆ¶ |
| --- | --- | --- | --- |
| 0000 | 0 | 0 | 0 |
| 0001 | 1 | 1 | 1 |
| 0010 | 2 | 2 | 2 |
| 0011 | 3 | 3 | 3 |
| 0100 | 4 | 4 | 4 |
| 0101 | 5 | 5 | 5 |
| 0110 | 6 | 6 | 6 |
| 0111 | 7 | 7 | 7 |
| 1000 | 10 | 8 | 8 |
| 1001 | 11 | 9 | 9 |
| 1010 | 12 | 10 | A |
| 1011 | 13 | 11 | B |
| 1100 | 14 | 12 | C |
| 1101 | 15 | 13 | D |
| 1110 | 16 | 14 | E |
| 1111 | 17 | 15 | F |
- **å°æ•°è¿›åˆ¶è¡¨**

| æŒ‡æ•° | äºŒè¿›åˆ¶ | åè¿›åˆ¶ |
| --- | --- | --- |
| 2^-1 | .1 | .5 |
| 2^-2 | .01 | .25 |
| 2^-3 | .001 | .125 |
| 2^-4 | .0001 | .0625 |
| 2^-5 | .00001 | .03125 |
| 2^-6 | .000001 | .015625 |

ğŸ’¡ 8è¿›åˆ¶å’Œ16è¿›åˆ¶åªèƒ½ç”¨æ¥è¡¨ç¤ºæ— ç¬¦å·çš„æ•°ã€‚


## è¿›åˆ¶è½¬æ¢


- **åè¿›åˆ¶è½¬æ¢ä¸ºäºŒè¿›åˆ¶ã€å…«è¿›åˆ¶ã€åå…­è¿›åˆ¶**

    - æ•´æ•°è½¬æ¢

    **åŸç†1ï¼š**é™¤ä»¥2/8/16ï¼Œå–ä½™æ•°ï¼Œç›´åˆ°å•†ä¸º0ç»ˆæ­¢ï¼Œç„¶ååå‘è¾“å‡ºä½™æ•°ã€‚

    **åŸç†2ï¼š**åè¿›åˆ¶è½¬äºŒè¿›åˆ¶å¯ä»¥åå‘æ€è€ƒäºŒè¿›åˆ¶è½¬åè¿›åˆ¶ï¼Œåè¿›åˆ¶è½¬å…«/åå…­è¿›åˆ¶å¯ä»¥å…ˆè½¬äºŒè¿›åˆ¶å†è½¬å…«/åå…­è¿›åˆ¶ã€‚

    åè¿›åˆ¶è½¬äºŒè¿›åˆ¶ï¼š

    åŸç†1ï¼šæ¯”å¦‚91ï¼Œ45ä½™1 â€” 22ä½™1 â€” 11ä½™0 â€” 5ä½™1 â€” 2ä½™1 â€” 1ä½™0 â€” 0ä½™1ï¼Œå³01011011

    åŸç†2ï¼šæ¯”å¦‚352ï¼Œå°±æ˜¯256+64+32ï¼Œå³ 0001 0110 0000

    - å°æ•°è½¬æ¢

    **åŸç†ï¼š**ä¹˜2/8/16å–æ•´ï¼Œé¡ºåºè¾“å‡º

    æ¯”å¦‚0.68 Dè½¬æ¢æˆäºŒè¿›åˆ¶ï¼Œç²¾ç¡®åˆ°å°æ•°ç‚¹å5ä½ï¼š

    0.68*2=1.36 â€” 1

    0.36*2=0.72 â€” 0

    0.72*2=1.44 â€” 1

    0.44*2=0.88 â€” 0

    0.88*2=1.76 â€” 1

    å³0.68 D=0.10101 B

- **äºŒè¿›åˆ¶ã€å…«è¿›åˆ¶ã€åå…­è¿›åˆ¶è½¬åè¿›åˆ¶**

    **åŸç†ï¼š**ä¸¾ä¾‹äºŒè¿›åˆ¶10101101.0101è½¬æ¢æˆåè¿›åˆ¶173.9375ï¼Œå…«/åå…­è¿›åˆ¶è½¬æ¢åè¿›åˆ¶åŒç†ã€‚
    $$
    1*2^7+0*2^6+1*2^5+0*2^4+1*2^3+1*2^2+0*2^1+1*2^0+0*2^{-1}+1*2^{-2}+0*2^{-3}+1*2^{-4}=173.9375
    $$

- **äºŒè¿›åˆ¶ä¸å…«è¿›åˆ¶å’Œåå…­è¿›åˆ¶çš„è½¬æ¢**
  
    - äºŒè¿›åˆ¶è½¬å…«è¿›åˆ¶åŸç†ï¼šå–ä¸‰åˆä¸€æ³•ï¼Œå³ä»äºŒè¿›åˆ¶çš„å°æ•°ç‚¹ä¸ºåˆ†ç•Œç‚¹ï¼Œå‘å·¦ï¼ˆæˆ–å‘å³ï¼‰æ¯ä¸‰ä½å–æˆä¸€ä½ã€‚
    - äºŒè¿›åˆ¶è½¬åå…­è¿›åˆ¶åŸç†ï¼šå–å››åˆä¸€æ³•ï¼Œå³ä»äºŒè¿›åˆ¶çš„å°æ•°ç‚¹ä¸ºåˆ†ç•Œç‚¹ï¼Œå‘å·¦ï¼ˆæˆ–å‘å³ï¼‰æ¯å››ä½å–æˆä¸€ä½ã€‚

# è®¤è¯†Cè¯­è¨€

## å˜é‡ã€å¸¸é‡

### å±€éƒ¨å˜é‡ä¸å…¨å±€å˜é‡

å½“å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡åŒåçš„æ—¶å€™ï¼Œå±€éƒ¨å˜é‡ä¼˜å…ˆä½¿ç”¨ã€‚

**å…¨å±€å˜é‡å’Œ`static`é™æ€å˜é‡é»˜è®¤åˆå§‹åŒ–ä¸º0ã€‚**

### æ ‡è¯†ç¬¦/å˜é‡çš„å‘½åè§„åˆ™

1. åªèƒ½ç”±**æ•°å­—ã€å­—æ¯ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ã€ä¸‹åˆ’çº¿**ç»„æˆ
2. ä¸èƒ½ä»¥æ•°å­—å¼€å¤´
3. ä¸èƒ½æ˜¯å…³é”®å­—
4. é•¿åº¦ä¸èƒ½è¶…è¿‡63ä¸ªå­—ç¬¦

### å˜é‡çš„ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ

- **ä½œç”¨åŸŸ**

  1. å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸæ˜¯å˜é‡æ‰€åœ¨çš„å±€éƒ¨èŒƒå›´

  2. å…¨å±€å˜é‡çš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªå·¥ç¨‹


- **ç”Ÿå‘½å‘¨æœŸ**

  1. å±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ï¼šè¿›å…¥ä½œç”¨åŸŸç”Ÿå‘½å‘¨æœŸå¼€å§‹ï¼Œå‡ºä½œç”¨åŸŸç”Ÿå‘½å‘¨æœŸç»“æŸ

  2. å…¨å±€å˜é‡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ï¼šæ•´ä¸ªç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸ


### å¸¸é‡

**Cè¯­è¨€ä¸­çš„å¸¸é‡åˆ†ä¸ºä»¥ä¸‹ä»¥ä¸‹å‡ ç§**ï¼šå­—é¢å¸¸é‡ã€`const` ä¿®é¥°çš„**å¸¸å˜é‡**ã€`#define` å®šä¹‰çš„æ ‡è¯†ç¬¦å¸¸é‡ã€æšä¸¾å¸¸é‡

```c
#include <stdio.h>
//ä¸¾ä¾‹
enum Sex
{
 MALE,
 FEMALE,
 SECRET
};
//æ‹¬å·ä¸­çš„MALE,FEMALE,SECRETæ˜¯æšä¸¾å¸¸é‡
int main()
{
    //å­—é¢å¸¸é‡æ¼”ç¤º
    3.14;//å­—é¢å¸¸é‡
    1000;//å­—é¢å¸¸é‡
    
    //const ä¿®é¥°çš„**å¸¸å˜é‡**
    const float pai = 3.14f;   //è¿™é‡Œçš„paiæ˜¯constä¿®é¥°çš„å¸¸å˜é‡
    pai = 5.14;//æ˜¯ä¸èƒ½ç›´æ¥ä¿®æ”¹çš„ï¼
    
    //#defineçš„æ ‡è¯†ç¬¦å¸¸é‡ æ¼”ç¤º
		#define MAX 100
    printf("max = %d\n", MAX);
    
    //æšä¸¾å¸¸é‡æ¼”ç¤º
    printf("%d\n", MALE);//0
    printf("%d\n", FEMALE);//1
    printf("%d\n", SECRET);//2
    //æ³¨ï¼šæšä¸¾å¸¸é‡çš„é»˜è®¤æ˜¯ä»0å¼€å§‹ï¼Œä¾æ¬¡å‘ä¸‹é€’å¢1çš„
    return 0;
}
```

## å­—ç¬¦ä¸²+è½¬ä¹‰å­—ç¬¦

### å­—ç¬¦ä¸²

`"hello world"`è¿™ç§ç”±åŒå¼•å·ï¼ˆDouble Quoteï¼‰å¼•èµ·æ¥çš„ä¸€ä¸²å­—ç¬¦ç§°ä¸ºå­—ç¬¦ä¸²å­—é¢å€¼ï¼ˆString Literalï¼‰ï¼Œæˆ–è€…ç®€ç§°å­—ç¬¦ä¸²ã€‚
**å­—ç¬¦ä¸²çš„ç»“æŸæ ‡å¿—æ˜¯ä¸€ä¸ª \0 çš„è½¬ä¹‰å­—ç¬¦**ã€‚åœ¨è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦çš„æ—¶å€™ \0 æ˜¯ç»“æŸæ ‡å¿—ï¼Œä¸ç®—ä½œå­—ç¬¦ä¸²å†…å®¹ã€‚

```c
#include<stdio.h>
#include<string.h>
int main() {
	char arr1[] = "bit";
	char arr2[] = { 'b','i','t' };
	char arr3[] = { 'b','i','t','\0' };
	printf("%s\n", arr1);//bit
	printf("%s\n", arr2);//bit+ä¹±ç 
	printf("%s\n", arr3);//bit
	printf("%d\n", strlen(arr1));//3
	printf("%d\n", strlen(arr2));//éšæœºå€¼
	printf("%d\n", strlen(arr3));//3
	return 0;
}
```

### è½¬ä¹‰å­—ç¬¦

| è½¬ä¹‰å­—ç¬¦ | é‡Šä¹‰ |
| :-- | --- |
| \? | åœ¨ä¹¦å†™è¿ç»­å¤šä¸ªé—®å·æ—¶ä½¿ç”¨ï¼Œé˜²æ­¢ä»–ä»¬è¢«è§£ææˆä¸‰å­—æ¯è¯ |
| \â€™ | ç”¨äºè¡¨ç¤ºå­—ç¬¦å¸¸é‡' |
| \â€ | ç”¨äºè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²å†…éƒ¨çš„åŒå¼•å· |
| \\\ | ç”¨äºè¡¨ç¤ºä¸€ä¸ªåæ–œæ ï¼Œé˜²æ­¢å®ƒè¢«è§£é‡Šä¸ºä¸€ä¸ªè½¬ä¹‰åºåˆ—ç¬¦ã€‚ |
| \a | è­¦å‘Šå­—ç¬¦ï¼Œèœ‚é¸£ |
| \b | é€€æ ¼ç¬¦ |
| \f | è¿›çº¸ç¬¦ |
| \n | æ¢è¡Œ |
| \r | å›è½¦ |
| \t | æ°´å¹³åˆ¶è¡¨ç¬¦ |
| \v | å‚ç›´åˆ¶è¡¨ç¬¦ |
| \ddd | dddè¡¨ç¤º1~3ä¸ªå…«è¿›åˆ¶çš„æ•°å­—ã€‚ å¦‚ï¼š \130 X |
| \xdd | ddè¡¨ç¤º2ä¸ªåå…­è¿›åˆ¶æ•°å­—ã€‚ å¦‚ï¼š \x30  |

## å…³é”®å­—

- `register` ä½œç”¨æ˜¯å»ºè®®å°†å˜é‡æ”¾å…¥å¯„å­˜å™¨ï¼Œä¸€èˆ¬ä¸ç”¨
  
    ```c
    register int a = 10;
    ```
    
- `static` ä¿®é¥°å±€éƒ¨å˜é‡ï¼Œä¿®é¥°å…¨å±€å˜é‡ï¼Œä¿®é¥°å‡½æ•°
  
    `static`ä¿®é¥°çš„å±€éƒ¨å˜é‡**æ²¡æœ‰èµ‹å€¼æ—¶ï¼Œé»˜è®¤èµ‹å€¼ä¸º 0**ï¼Œ**å±€éƒ¨å˜é‡è¢«æ”¾åœ¨é™æ€åŒºï¼Œç›´åˆ°ç¨‹åºç»“æŸé‡Šæ”¾ï¼Œä½†ä¸ä¼šå½±å“ä½œç”¨åŸŸ**ã€‚
    
    ```c
    //static ä¿®é¥°å±€éƒ¨å‡½æ•°
    #include<stdio.h>
    void test() {
    	static int a = 0;
    	a++;
    	printf("%d ", a);
    }
    int main() {
    	int i = 0;
    	while (i < 10) {
    		test();
    		i++;
    	}
    	return 0;
    }
    //æ‰“å°ç»“æœä¸º1 2 3 4 5 6 7 8 9 10
    ```
    
    `static`ä¿®é¥°å…¨å±€å˜é‡ï¼Œå…¨å±€å˜é‡æœ¬èº«æ˜¯å…·æœ‰å¤–éƒ¨é“¾æ¥å±æ€§çš„ï¼Œä½†å¦‚æœè¢«staticä¿®é¥°ï¼Œè¿™ä¸ªå¤–éƒ¨é“¾æ¥å±æ€§å°±å˜æˆäº†å†…éƒ¨é“¾æ¥å±æ€§ï¼Œè¿™ä¸ªå…¨å±€å˜é‡å°±åªèƒ½åœ¨è‡ªå·±çš„æ‰€åœ¨çš„æºæ–‡ä»¶ä¸­ä½¿ç”¨
    
    ```c
    //add.cæ–‡ä»¶ä¸­å®šä¹‰
    int g_val = 100;
    //test.cæ–‡ä»¶ä¸­å£°æ˜
    extern int g_val;
    int main() {
    	printf("%d\n", g_val);//æ­£å¸¸æ‰§è¡Œ
    	return 0;
    }
    ```
    
    ```c
    //add.cæ–‡ä»¶ä¸­å®šä¹‰
    static int g_val = 100;
    //test.cæ–‡ä»¶ä¸­å£°æ˜
    extern int g_val;
    int main() {
    	printf("%d\n", g_val);//error
    	return 0;
    }
    ```
    
    `static`ä¿®é¥°å‡½æ•°ï¼Œä¸ä¿®é¥°å…¨éƒ¨å˜é‡ç±»ä¼¼

## `define` å®šä¹‰å¸¸é‡å’Œå®

```c
#define M 100	//define å®šä¹‰å¸¸é‡
#define MAX(x,y) (x>y?x:y)//define å®šä¹‰å®
```

# åˆ†æ”¯å’Œå¾ªç¯è¯­å¥

## åˆ†æ”¯è¯­å¥

### ifè¯­å¥

```c
è¯­æ³•ç»“æ„ï¼š
if(è¡¨è¾¾å¼)
    è¯­å¥;
//åŒåˆ†æ”¯
if(è¡¨è¾¾å¼)
    è¯­å¥1;
else
    è¯­å¥2;
//å¤šåˆ†æ”¯    
if(è¡¨è¾¾å¼1)
    è¯­å¥1;
else if(è¡¨è¾¾å¼2)
    è¯­å¥2;
else
    è¯­å¥3;
```

å¦‚æœè¡¨è¾¾å¼çš„ç»“æœä¸ºçœŸï¼Œåˆ™è¯­å¥æ‰§è¡Œã€‚åœ¨Cè¯­è¨€ä¸­**0è¡¨ç¤ºå‡ï¼Œé0è¡¨ç¤ºçœŸã€‚**

å¦‚æœæ¡ä»¶æˆç«‹ï¼Œè¦æ‰§è¡Œå¤šæ¡è¯­å¥ï¼Œåº”è¯¥ä½¿ç”¨{...}ä»£ç å—ã€‚

```c
if(è¡¨è¾¾å¼)
{
    è¯­å¥åˆ—è¡¨1ï¼›
}
else
{
    è¯­å¥åˆ—è¡¨2ï¼›
}
```

**æ‚¬ç©º`else`**ï¼š`else`ä¸æœ€è¿‘çš„ifç»“åˆ

```c
#include <stdio.h>
int main()
{
    int a = 0;
    int b = 2;
    if(a == 1)
        if(b == 2)
            printf("hehe\n");
    else
        printf("haha\n");
    return 0;
}
//æ— æ‰“å°ç»“æœï¼Œå› ä¸ºelseä¸if(b==2)ç»“åˆï¼Œè€Œä¸æ˜¯if(a==1),ä¸”a==1è¡¨è¾¾å¼çš„ç»“æœä¸º0ï¼Œæ‰€ä»¥æ— æ‰“å°ç»“æœ
```

```c
//ä¹¦å†™ä¸è§„èŒƒçš„ä»£ç 
//ä»£ç 1
if (condition) {
    return x;
}
return y;
//ä»£ç 2
int num = 1;
if(num == 5)
{
    printf("hehe\n");
}
```

```c
//è§„èŒƒçš„ä»£ç 
//ä»£ç 1
if(condition)
{
    return x;
}
else
{
    return y;
}
//ä»£ç 2
int num = 1;
if(5 == num)
{
    printf("hehe\n");
}
```

### switchè¯­å¥

```c
è¯­å¥ç»“æ„ï¼š
switch (æ•´å‹è¡¨è¾¾å¼)
{
    case æ•´å½¢å¸¸é‡è¡¨è¾¾å¼:
        è¯­å¥;
    default:
        å†™åœ¨ä»»ä½•ä¸€ä¸ªcaseæ ‡ç­¾å¯ä»¥å‡ºç°çš„ä½ç½®ã€‚
}
```

> å¦‚æœè¡¨è¾¾å¼çš„å€¼ä¸æ‰€æœ‰çš„`case`æ ‡ç­¾å€¼éƒ½ä¸åŒ¹é…ï¼Œåˆ™æ‰§è¡Œ`default`ä¸­çš„è¯­å¥ã€‚
> `default` å†™åœ¨ä»»ä½•ä¸€ä¸ª`case`æ ‡ç­¾å¯ä»¥å‡ºç°çš„ä½ç½®ã€‚
> æ¯ä¸ª`switch`ä¸­åªèƒ½æœ‰ä¸€ä¸ª`default`ã€‚

```c
//è¾“å…¥1-7ï¼Œæ‰“å°å¯¹åº”çš„æ˜ŸæœŸ
#include <stdio.h>
int main()
{
    int day = 0;
    switch(day)
   {
        case 1ï¼š
            printf("æ˜ŸæœŸä¸€\n");
            break;
        case 2:
            printf("æ˜ŸæœŸäºŒ\n");
            break;
        case 3:
            printf("æ˜ŸæœŸä¸‰\n");
            break;    
        case 4:
            printf("æ˜ŸæœŸå››\n");
            break;    
        case 5:
            printf("æ˜ŸæœŸäº”\n");
            break;
        case 6:
            printf("æ˜ŸæœŸå…­\n");
            break;
        case 7:
            printf("æ˜ŸæœŸå¤©\n");    
            break;
   }
    return 0;
}
//è¾“å…¥1-5è¾“å‡ºçš„æ˜¯â€œweekdayâ€ï¼Œè¾“å…¥6-7è¾“å‡ºâ€œweekendâ€
#include <stdio.h>
int main()
{
    int day = 0;
    switch (day)
    {
        case 1:
        case 2:
        case 3:
        case 4:
        case 5:
            printf("weekday\n");
            break;
        case 6:
        case 7:
            printf("weekend\n");
            break;
        default:
            printf("error\n");
            break;
    }
    return 0;
}
```

## å¾ªç¯è¯­å¥

### `while`

```c
è¯­æ³•ç»“æ„ï¼š
while(è¡¨è¾¾å¼){
    å¾ªç¯è¯­å¥ï¼›
}
```

**`while`è¯­å¥ä¸­çš„`break`å’Œ`continue`ï¼š**

```c
#include<stdio.h>
int main() {
	int n = 0;
	while (n < 10) {
	  n++;
		if (5 == n) {
			continue;
		}
		if (8 == n) {
			break;
		}
		printf("%d ", n);
	}
	return 0;
}
//1 2 3 4 6 7 
```

> `break`çš„ä½œç”¨ï¼š`break`æ˜¯ç”¨äºç»ˆæ­¢å¾ªç¯ï¼Œåœ¨å¾ªç¯ä¸­åªè¦é‡åˆ°`break`ï¼Œå°±ç›´æ¥è·³å‡ºå¾ªç¯ã€‚
>
> `continue`çš„ä½œç”¨ï¼š`continue`æ˜¯ç”¨äºç»ˆæ­¢æœ¬æ¬¡å¾ªç¯çš„ï¼Œä¹Ÿå°±æ˜¯æœ¬æ¬¡å¾ªç¯ä¸­`continue`åé¢çš„ä»£ç ä¸ä¼šå†æ‰§è¡Œï¼Œè€Œæ˜¯ç›´æ¥è·³è½¬åˆ°`while`è¯­å¥çš„åˆ¤æ–­éƒ¨åˆ†ã€‚è¿›è¡Œä¸‹ä¸€æ¬¡å¾ªç¯çš„å…¥å£åˆ¤æ–­ã€‚

**å¾ªç¯è¾“å…¥å­—ç¬¦**

```c
#include <stdio.h>
int main()
{
    int ch = 0;
    while ((ch = getchar()) != EOF)
        putchar(ch);
    return 0;
}
//æŒ‰ctrl+Zåœæ­¢å¾ªç¯
```

###  `for`

```c
è¯­å¥ç»“æ„ï¼š
for(åˆå§‹åŒ–æ¡ä»¶è¡¨è¾¾å¼ï¼›å¾ªç¯åˆ¤æ–­è¡¨è¾¾å¼ï¼›è°ƒæ•´è¡¨è¾¾å¼){
    å¾ªç¯è¯­å¥ï¼›
}
```

å»ºè®®forè¯­å¥çš„å¾ªç¯æ§åˆ¶å˜é‡çš„å–å€¼é‡‡ç”¨â€œ<u>å‰é—­åå¼€åŒºé—´</u>â€å†™æ³•

```c
int i = 0;
//å‰é—­åå¼€çš„å†™æ³•
for(i=0; i<10; i++)
{}
```

ä¸€äº›forå¾ªç¯å˜ç§ï¼š<u>forå¾ªç¯ä¸­çš„åˆå§‹æ¡ä»¶è¡¨è¾¾å¼ã€å¾ªç¯åˆ¤æ–­è¡¨è¾¾å¼ä¸è°ƒæ•´è¡¨è¾¾å¼å‡å¯çœç•¥</u>

```c
#include <stdio.h>
int main()
{
    //å˜ç§1ï¼šæ­»å¾ªç¯
    for (;;)
    {
        printf("hehe\n");
    }
    //å˜ç§2
    int x, y;
    for (x = 0, y = 0; x < 2 && y < 5; ++x, y++)
    {
        printf("hehe\n");
    }
    return 0;
}
```

### `do...while`

```c
è¯­å¥ç»“æ„ï¼š
do{
    å¾ªç¯è¯­å¥ï¼›
}while(å¾ªç¯åˆ¤æ–­è¡¨è¾¾å¼);
```

`do...while`å¾ªç¯**è‡³å°‘æ‰§è¡Œä¸€æ¬¡**ï¼Œä½¿ç”¨çš„åœºæ™¯æœ‰é™ï¼Œæ‰€ä»¥ä¸æ˜¯ç»å¸¸ä½¿ç”¨

### **ç»ƒä¹ **

```c
// è®¡ç®— 1!+2!+3!+â€¦â€¦+10!
#include<stdio.h>
int main() {
	int i = 0, ret = 1, sum = 0;
	for (i = 1; i <= 3; i++) {
		ret *= i;
		sum += ret;
	}
	printf("%d\n", sum);
	return 0;
}

//æ¼”ç¤ºå¤šä¸ªå­—ç¬¦ä»ä¸¤ç«¯ç§»åŠ¨ï¼Œå‘ä¸­é—´æ±‡èš
#include<stdio.h>
#include<string.h>
#include<windows.h>
#include<stdlib.h>
int main() {
	char str1[] = "welcome to bit!!!";
	char str2[] = "#################";
	int left = 0, right = strlen(str1) - 1;
	printf("%s\n", str2);
	while (left <= right) {
		str2[left] = str1[left];
		str2[right] = str1[right];
		left++;
		right--;
		Sleep(1000);//å®ç°ç¡çœ ï¼Œå•ä½æ˜¯æ¯«ç§’
		system("cls");//systemæ˜¯ä¸€ä¸ªåº“å‡½æ•°ï¼Œç”¨äºæ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œclsæ˜¯æ¸…ç©ºå±å¹•çš„å‘½ä»¤
		printf("%s\n", str2);
	}
	return 0;
}
```

- **sleepå‡½æ•°**

  windowsä¸‹å‡½æ•°åä¸º`Sleep()`ï¼Œå…¶å‡½æ•°å¤´æ–‡ä»¶ä¸ºï¼š`#include <windows.h>`ï¼Œå‡½æ•°åŸå‹ä¸º`void Sleep(DWORD dwMilliseconds);` å‚æ•°ä¸º<u>æ¯«ç§’</u>

  linuxä¸‹å‡½æ•°å`sleep()`ï¼Œå…¶å‡½æ•°å¤´æ–‡ä»¶ä¸ºï¼š`#include <unistd.h>`ï¼Œå‡½æ•°åŸå‹ä¸º`unsigned int sleep(unsigned int seconds);` å‚æ•°ä¸º<u>ç§’</u> ï¼ˆæ›´ç²¾ç¡®ç”¨`usleep`ï¼Œå¾®ç§’ï¼‰

## gotoè¯­å¥

gotoè¯­å¥åªèƒ½åœ¨åŒä¸€å‡½æ•°å†…éƒ¨è·³è½¬ï¼Œä¸èƒ½è·¨å‡½æ•°è·³è½¬

```c
//å…³æœºç¨‹åº
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
int main() {
	char input[20] = { 0 };
	system("shutdown -s -t 60");
again:
	printf("è¯·æ³¨æ„ä½ çš„ç”µè„‘å°†åœ¨1åˆ†é’Ÿåå…³æœºï¼Œå¦‚æœè¾“å…¥ï¼šæˆ‘æ˜¯çŒªï¼Œåˆ™å–æ¶ˆå…³æœº\n");
	scanf("%s", input);
	if (0 == strcmp(input, "æˆ‘æ˜¯çŒª")) {
		printf("è¿™å°±å–æ¶ˆå…³æœº\n");
		system("shutdown -a");
	}
	else {
		goto again;
	}
	return 0;
}
```

- **systemå‡½æ•°**

â€‹	å‡½æ•°å¤´æ–‡ä»¶ä¸ºï¼š`#include<stdlib.h>`ï¼Œå‡½æ•°åŸå‹ä¸ºï¼š`int system (const char* command);`

â€‹	å¦‚æœä¸º `null` æŒ‡é’ˆï¼Œåˆ™è¯¥å‡½æ•°ä»…æ£€æŸ¥å‘½ä»¤å¤„ç†å™¨æ˜¯å¦å¯é€šè¿‡æ­¤å‡½æ•°ä½¿ç”¨ï¼Œè€Œä¸è°ƒç”¨ä»»ä½•å‘½ä»¤ã€‚
â€‹	è°ƒç”¨å‘½ä»¤çš„æ•ˆæœå–å†³äºç³»ç»Ÿå’Œåº“çš„å®ç°ï¼Œå¹¶å¯èƒ½å¯¼è‡´ç¨‹åºä»¥éæ ‡å‡†æ–¹å¼è¿è¡Œæˆ–ç»ˆæ­¢ã€‚

```c
#include<stdio.h>
#include<string.h>
#include<stdlib.h>
int print()
{
    printf("---------------------------------------\n");
    printf("-----------  Cè¯­è¨€å…³æœºç¨‹åº  -----------\n");
    printf("----1.å®ç°10åˆ†é’Ÿå†…çš„å®šæ—¶å…³é—­è®¡ç®—æœº-----\n");
    printf("----2.ç«‹å³å…³é—­è®¡ç®—æœº-------------------\n");
    printf("----3.æ³¨é”€è®¡ç®—æœº-----------------------\n");
    printf("----4.å–æ¶ˆè‡ªåŠ¨è®¡ç®—æœº-------------------\n");
    printf("----0.é€€å‡ºç³»ç»Ÿ-------------------------\n");
    printf("---------------------------------------\n");
    return 0;
}
int main()
{
    system("title Cè¯­è¨€å…³æœºç¨‹åº");//è®¾ç½®cmdçª—å£æ ‡é¢˜
    system("mode con cols=48 lines=25");//çª—å£å®½åº¦é«˜åº¦
    system("color 0B");
    system("date /T");
    system("TIME /T");
    char cmd[20] = "shutdown -s -t ";
    char t[5] = "0";
    print();
    int c;
    scanf("%d", &c);
    getchar();
    switch (c)
    {
        case 1:printf("æ‚¨æƒ³åœ¨å¤šå°‘ç§’åè‡ªåŠ¨å…³é—­è®¡ç®—æœºï¼Ÿï¼ˆ0~600ï¼‰\n"); 
            scanf("%s", t);
            system(strcat(cmd, t)); break;
        case 2:system("shutdown -p"); break;
        case 3:system("shutdown -l"); break;
        case 4:system("shutdown -a"); break;
        case 0:break;
        default:printf("Error!\n");
    }
    system("pause");
    return 0;
}
```

## çŒœæ•°å­—æ¸¸æˆ

```c
#include<stdio.h>
#include<stdlib.h>
#include<time.h>
void meun() {
	printf("***************\n");
	printf("****1. PLAY****\n");
	printf("****0. EXIT****\n");
	printf("***************\n");
}
void game() {
    //1-100çš„éšæœºæ•°
	int ret = rand() % 100 + 1;
	int num;
	while (1) {
		scanf("%d", &num);
		if (num > ret) {
			printf("çŒœå¤§äº†\n");
		}
		else if (num < ret) {
			printf("çŒœå°äº†\n");
		}
		else {
			printf("çŒœä¸­äº†\n");
			break;
		}
	}
}
int main() {
	int input = 0;
    //åˆå§‹åŒ–éšæœºæ•°å‡½æ•°
	srand((unsigned int)time(NULL));
	do {
		meun();
		scanf("%d", &input);
		switch (input) {
		case 1:
			printf("æ¸¸æˆå¼€å§‹\n");
			game();
			break;
		case 0:
			printf("é€€å‡ºæ¸¸æˆ\n");
			break;
		default:
			printf("é‡æ–°è¾“å…¥\n");
			break;
		}
	} while (input);
	return 0;
}
```

- **éšæœºæ•°å‡½æ•°**

1. rand()ç”Ÿæˆéšæœºæ•°å‡½æ•°ï¼Œå¤´æ–‡ä»¶ä¸º`#include<stdlib.h>`ï¼Œå‡½æ•°åŸå‹ä¸º`int rand (void);`
   randå‡½æ•°ä¼šè¿”å›â¼€ä¸ªä¼ªéšæœºæ•°ï¼Œè¿™ä¸ªéšæœºæ•°çš„èŒƒå›´æ˜¯åœ¨0~RAND_MAXä¹‹é—´ï¼Œè¿™ä¸ªRAND_MAXçš„å¤§å°æ˜¯ä¾èµ–ç¼–è¯‘å™¨ä¸Šå®ç°çš„ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†ç¼–è¯‘å™¨ä¸Šæ˜¯32767ã€‚
2. srand()åˆå§‹åŒ–éšæœºæ•°ç”Ÿæˆå™¨å‡½æ•°ï¼Œå¤´æ–‡ä»¶ä¸º`#include<stdlib.h>`ï¼Œå‡½æ•°åŸå‹ä¸º`void srand (unsigned int seed);`
   ç¨‹åºä¸­åœ¨è°ƒç”¨ rand å‡½æ•°ä¹‹å‰å…ˆè°ƒç”¨ srand å‡½æ•°ï¼Œé€šè¿‡ srand å‡½æ•°çš„å‚æ•°seedæ¥è®¾ç½®randå‡½æ•°ç”Ÿæˆéšæœºæ•°çš„æ—¶å€™çš„ç§å­ï¼Œåªè¦ç§å­åœ¨å˜åŒ–ï¼Œæ¯æ¬¡ç”Ÿæˆçš„éšæœºæ•°åºåˆ—ä¹Ÿå°±å˜åŒ–èµ·æ¥äº†ã€‚
   srandå‡½æ•°åœ¨ç¨‹åºä¸­åªéœ€è°ƒä¸€æ¬¡å³å¯ï¼Œé¢‘ç¹é‡å¤è°ƒç”¨å¯èƒ½ä¼šä½¿å¾—ç§å­å·®è·å¾ˆå°æˆ–ä¸€æ ·ï¼Œä»è€Œä½¿å¾—éšæœºæ•°å·®è·å¾ˆå°æˆ–ç›¸åŒã€‚
3. time()æ—¶é—´å‡½æ•°ï¼Œå¤´æ–‡ä»¶ä¸º`#include<time.h>`ï¼Œå‡½æ•°åŸå‹ä¸º`time_t time (time_t* timer);`
   è¿”å›çš„å€¼é€šå¸¸è¡¨ç¤ºè‡ª 1970 å¹´ 1 æœˆ 1 æ—¥ 00ï¼š00ä»¥æ¥çš„ç§’æ•°ï¼ˆå³å½“å‰ *unix æ—¶é—´æˆ³*ï¼‰ã€‚
   timeå‡½æ•°çš„å‚æ•° timer å¦‚æœæ˜¯éNULLçš„æŒ‡é’ˆçš„è¯ï¼Œå‡½æ•°ä¹Ÿä¼šå°†è¿™ä¸ªè¿”å›çš„å·®å€¼æ”¾åœ¨timeræŒ‡å‘çš„å†…å­˜ä¸­å¸¦å›å»ã€‚å¦‚æœtimer æ˜¯NULLï¼Œå°±åªè¿”å›è¿™ä¸ªæ—¶é—´çš„å·®å€¼ã€‚

```c
#include<stdio.h>
#include<stdlib.h>
#include<time.h>
int main() {
	srand((unsigned int)time(NULL));
	int ret1 = rand() % 100;		//0~99
	int ret2 = rand() % 100 + 1;	//1~100
	int ret3 = rand() % 101 + 100;	//100~200
	printf("%d\n", ret1);
	printf("%d\n", ret2);
	printf("%d\n", ret3);
	return 0;
}
```

## ç»ƒä¹ 

```c
//æ‰“å°1-100ä¹‹é—´æ‰€æœ‰3çš„å€æ•°çš„æ•°å­—
#include<stdio.h>
int main()
{
	int i;
	for (i = 3; i < 100; i += 3)
		printf("%d ", i);
	return 0;
}

//å°†ä¸‰ä¸ªæ•´æ•°ä»å¤§åˆ°å°è¾“å‡º
#include<stdio.h>
void swap(int* a, int* b) {
	int temp = *a;
	*a = *b;
	*b = temp;
}
int main()
{
	int a = 2, b = 3, c = 1;
	if (a < b)
		swap(&a, &b);
	if (a < c)
		swap(&a, &c);
	if (b < c)
		swap(&b, &c);
	printf("%d %d %d\n", a, b, c);
	return 0;
}

//æ‰“å°1000å¹´åˆ°2000å¹´ä¹‹é—´çš„é—°å¹´
#include<stdio.h>
int is_leap_year(int y) {
	return (y % 400 == 0) || (y % 4 == 0 && y % 100 != 0);
}
int main()
{
	int i;
	for (i = 1000; i < 2000; i++)
		if (is_leap_year(i))
			printf("%d ", i);
	return 0;
}

//æ‰“å°100-200ä¹‹é—´çš„ç´ æ•°
//æ–¹æ³•ï¼šå¦‚æœièƒ½å¤Ÿè¢«[2, sqrt(i)]ä¹‹é—´çš„ä»»æ„æ•°æ®æ•´é™¤ï¼Œåˆ™iä¸æ˜¯ç´ æ•°ã€‚å› ä¸ºå¦‚æœ m èƒ½è¢« 2 ~ m-1 ä¹‹é—´ä»»ä¸€æ•´æ•°æ•´é™¤ï¼Œå…¶äºŒä¸ªå› å­å¿…å®šæœ‰ä¸€ä¸ªå°äºæˆ–ç­‰äºsqrt(m)ï¼Œå¦ä¸€ä¸ªå¤§äºæˆ–ç­‰äº sqrt(m)ã€‚ä½†æ˜¯å®é™…åœ¨æ“ä½œæ—¶iä¸ç”¨ä»101é€æ¸é€’å¢åˆ°200ï¼Œå› ä¸ºé™¤äº†2å’Œ3ä¹‹å¤–ï¼Œä¸ä¼šæœ‰ä¸¤ä¸ªè¿ç»­ç›¸é‚»çš„æ•°æ®åŒæ—¶ä¸ºç´ æ•°
#include<stdio.h>
#include<math.h>
int is_prime(int x) {
	if (x < 2)
		return 0;
	int i;
	for (i = 2; i <= sqrt(x); i++)
		if (x % i == 0)
			return 0;
	return 1;
}
int main()
{
	int i;
	for (i = 101; i <= 200; i += 2)
		if (is_prime(i))
			printf("%d ", i);
	return 0;
}

//ç»™å®šä¸¤ä¸ªæ•°ï¼Œæ±‚è¿™ä¸¤ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•°
//æ–¹æ³•ï¼šè¾—è½¬ç›¸é™¤æ³•ï¼Œå…ˆç”¨å°çš„ä¸€ä¸ªæ•°é™¤å¤§çš„ä¸€ä¸ªæ•°,å¾—ç¬¬ä¸€ä¸ªä½™æ•°ï¼›å†ç”¨ç¬¬ä¸€ä¸ªä½™æ•°é™¤å°çš„ä¸€ä¸ªæ•°,å¾—ç¬¬äºŒä¸ªä½™æ•°ï¼›åˆç”¨ç¬¬äºŒä¸ªä½™æ•°é™¤ç¬¬ä¸€ä¸ªä½™æ•°,å¾—ç¬¬ä¸‰ä¸ªä½™æ•°ï¼›è¿™æ ·é€æ¬¡ç”¨åä¸€ä¸ªæ•°å»é™¤å‰ä¸€ä¸ªä½™æ•°,ç›´åˆ°ä½™æ•°æ˜¯0ä¸ºæ­¢.é‚£ä¹ˆ,æœ€åä¸€ä¸ªé™¤æ•°å°±æ˜¯æ‰€æ±‚çš„æœ€å¤§å…¬çº¦æ•°
#include<stdio.h>
int main() {
	int a = 10;
	int b = 20;
	int c = 0;
	while (c = a % b) {
		a = b;
		b = c;
	}
	printf("%d\n", b);
	return 0;
}
#include<stdio.h>
int GCD(int a, int b) {
	if (b == 0)
		return a;
	else
		return GCD(b, a % b);
}
int main() {
	int a = 10;
	int b = 20;
	printf("%d\n", GCD(a, b));
	return 0;
}
```

# å‡½æ•°

## åº“å‡½æ•°

- ç®€å•çš„æ€»ç»“ï¼ŒCè¯­è¨€å¸¸ç”¨çš„åº“å‡½æ•°éƒ½æœ‰ï¼š
  
    I/Oå‡½æ•°ã€å­—ç¬¦ä¸²æ“ä½œå‡½æ•°ã€å­—ç¬¦æ“ä½œå‡½æ•°ã€å†…å­˜æ“ä½œå‡½æ•°ã€æ—¶é—´/æ—¥æœŸå‡½æ•°ã€æ•°å­¦å‡½æ•°ã€å…¶ä»–åº“å‡½æ•°
    

## è‡ªå®šä¹‰å‡½æ•°

```c
ret_type fun_name(para1, * ) 
{ 
	statement;//è¯­å¥é¡¹ 
} 
```

å‡½æ•°çš„è¿”å›ç±»å‹ä¸å†™æ—¶ï¼Œé»˜è®¤è¿”å›çš„æ˜¯intç±»å‹ï¼Œæ³¨æ„ä¸è¦å†™æ¨¡æ£±ä¸¤å¯çš„ä»£ç 

### å‡½æ•°çš„è°ƒç”¨

1. **å€¼ä¼ é€’**ï¼šå‡½æ•°çš„å½¢å‚å’Œå®å‚åˆ†åˆ«å æœ‰ä¸åŒå†…å­˜å—ï¼Œå¯¹å½¢å‚çš„ä¿®æ”¹ä¸ä¼šå½±å“å®å‚ã€‚
2. **åœ°å€ä¼ é€’**ï¼šåœ°å€ä¼ é€’æŠŠå®å‚çš„å­˜å‚¨åœ°å€ä¼ é€ç»™å¯¹åº”çš„å½¢å‚ï¼Œä»è€Œä½¿å¾—å½¢å‚æŒ‡é’ˆå’Œå®å‚æŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªåœ°å€ã€‚å› æ­¤ï¼Œè¢«è°ƒç”¨å‡½æ•°ä¸­å¯¹å½¢å‚æŒ‡é’ˆæ‰€æŒ‡å‘çš„åœ°å€ä¸­å†…å®¹çš„ä»»ä½•æ”¹å˜éƒ½ä¼šå½±å“åˆ°å®å‚ã€‚
3. **å¼•ç”¨ä¼ é€’ï¼ˆC++ï¼‰**ï¼šä»¥å¼•ç”¨ä¸ºå‚æ•°ï¼Œåˆ™æ—¢å¯ä»¥ä½¿å¾—å¯¹å½¢å‚çš„ä»»ä½•æ“ä½œéƒ½èƒ½æ”¹å˜ç›¸åº”çš„æ•°æ®ï¼Œåˆä½¿å¾—å‡½æ•°è°ƒç”¨æ˜¾å¾—æ–¹ä¾¿ã€è‡ªç„¶ã€‚å¼•ç”¨ä¼ é€’æ–¹å¼æ˜¯åœ¨å‡½æ•°å®šä¹‰æ—¶åœ¨å½¢å‚å‰é¢åŠ ä¸Šå¼•ç”¨è¿ç®—ç¬¦â€œ&â€ã€‚å¼•ç”¨ç›¸å½“äºå®å‚çš„åˆ«åï¼Œä»–å’Œå®å‚æ˜¯åŒä¸€ä¸ªå˜é‡æˆ–æ•°å€¼ï¼Œå®ƒçš„æ”¹å˜å°±æ˜¯å®å‚çš„æ”¹å˜ã€‚

```c
#include<stdio.h>
void change1(int n)
{
    n = 200;
    printf("å‡½æ•°æ“ä½œçš„åœ°å€>>%p\n", &n);
}
void change2(int* n)
{
    *n = 200;
    printf("å‡½æ•°æ“ä½œçš„åœ°å€>>%p\n", n);
}
void change3(int &n)
{
    n = 300;
    printf("å‡½æ•°æ“ä½œçš„åœ°å€>>%p\n", &n);
}
int main()
{
    int n = 100;
    printf("åŸå€¼>>%d\n", n);
    printf("åŸå€>>%p\n\n", &n);
    printf("å€¼ä¼ é€’\n");
    change1(n);
    printf("ä¿®æ”¹åçš„å€¼>>%d\n\n", n);
    printf("åœ°å€ä¼ é€’\n");
    change2(&n);
    printf("ä¿®æ”¹åçš„å€¼>>%d\n\n", n);
    printf("å¼•ç”¨ä¼ é€’\n");
    change3(n);
    printf("ä¿®æ”¹åçš„å€¼>>%d\n", n);
    return 0;
}
//åŸå€¼ >> 100
//åŸå€ >> 000000BBC79CF994
//
//å€¼ä¼ é€’
//å‡½æ•°æ“ä½œçš„åœ°å€ >> 000000BBC79CF970
//ä¿®æ”¹åçš„å€¼ >> 100
//
//åœ°å€ä¼ é€’
//å‡½æ•°æ“ä½œçš„åœ°å€ >> 000000BBC79CF994
//ä¿®æ”¹åçš„å€¼ >> 200
//
//å¼•ç”¨ä¼ é€’
//å‡½æ•°æ“ä½œçš„åœ°å€ >> 000000BBC79CF994
//ä¿®æ”¹åçš„å€¼ >> 300
```

- **äºŒåˆ†æŸ¥æ‰¾**

```c
//å†™ä¸€ä¸ªå‡½æ•°ï¼Œå®ç°ä¸€ä¸ªæ•´å½¢æœ‰åºæ•°ç»„çš„äºŒåˆ†æŸ¥æ‰¾
#include<stdio.h>
int binary_search(int arr[], int sz, int k) 
{
	int left = 0;
	int right = sz - 1;
	int mid;
	while (left <= right)
	{
		mid = (left + right) / 2;
		if (arr[mid] > k)
			right = mid - 1;
		else if (arr[mid] < k)
			left = mid + 1;
		else
			return mid;
	}
	return -1;
}
```

### å‡½æ•°çš„åµŒå¥—è°ƒç”¨å’Œé“¾å¼è®¿é—®

å‡½æ•°å¯ä»¥åµŒå¥—è°ƒç”¨ï¼Œä¸èƒ½åµŒå¥—å®šä¹‰

é“¾å¼è®¿é—®ï¼šæŠŠä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ä½œä¸ºå¦å¤–ä¸€ä¸ªå‡½æ•°çš„å‚æ•°

```c
int main()
{
	printf("%d", printf("%d", printf("%d", 43))); //printfå‡½æ•°è¿”å›å€¼ä¸ºæ‰“å°å­—ç¬¦ä¸ªæ•°
	//4321
	return 0;
}
```

### å‡½æ•°çš„å£°æ˜å’Œå®šä¹‰

```c
//add.hçš„å†…å®¹
#include<stdio.h>
int Add(int x, int y);//å‡½æ•°å£°æ˜
//add.cçš„å†…å®¹
int Add(int x, int y)//å‡½æ•°å®šä¹‰
{
	return x + y;
}
//test.cçš„å†…å®¹
#include"add.h"//è°ƒç”¨å¤´æ–‡ä»¶
int main()
{
	int a = 2, b = 3;
	printf("%d\n", Add(a, b));//å‡½æ•°è°ƒç”¨
	return 0;
}

//ä¹Ÿå¯ä»¥ä½¿ç”¨externè°ƒç”¨
#include<stdio.h>
extern int Add(int x, int y);
int main()
{
	int a = 2, b = 3;
	printf("%d\n", Add(a, b));
	return 0;
}
```

### é€’å½’ä¸è¿­ä»£

> **é€’å½’çš„ä¸¤ä¸ªå¿…è¦æ¡ä»¶**
å­˜åœ¨é™åˆ¶æ¡ä»¶ï¼Œå½“æ»¡è¶³è¿™ä¸ªé™åˆ¶æ¡ä»¶çš„æ—¶å€™ï¼Œé€’å½’ä¾¿ä¸å†ç»§ç»­ã€‚
æ¯æ¬¡é€’å½’è°ƒç”¨ä¹‹åè¶Šæ¥è¶Šæ¥è¿‘è¿™ä¸ªé™åˆ¶æ¡ä»¶ã€‚

```c
//æ¥å—ä¸€ä¸ªæ•´å‹å€¼ï¼ˆæ— ç¬¦å·ï¼‰ï¼ŒæŒ‰ç…§é¡ºåºæ‰“å°å®ƒçš„æ¯ä¸€ä½ã€‚ ä¾‹å¦‚ï¼š è¾“å…¥ï¼š1234ï¼Œè¾“å‡º 1 2 3 4
#include<stdio.h>
void Print(unsigned int n)
{
	if (n > 9)
	{
		Print(n / 10);
	}
	printf("%d ", n % 10);

}
int main()
{
	unsigned int num = 0;
	scanf("%u", &num);
	Print(num);
	return 0;
}

//ç¼–å†™å‡½æ•°ä¸å…è®¸åˆ›å»ºä¸´æ—¶å˜é‡ï¼Œæ±‚å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚
#include<stdio.h>
int my_strlen(char* str)
{
	if (*str != '\0')
		return 1 + my_strlen(str + 1);
	else
		return 0;
}

//æ±‚nçš„é˜¶ä¹˜
#include<stdio.h>
int fac1(int n)//é€’å½’
{
	if (n > 1)
		return n * fac1(n - 1);
	else
		return 1;
}
int fac2(int n)//è¿­ä»£
{
	int i;
	int ret = 1;
	for (i = 1; i <= n; i++)
	{
		ret *= i;
	}
	return ret;
}
int main()
{
	int n = 0;
	scanf("%d", &n);
	printf("%d\n", fac1(n));
	printf("%d\n", fac2(n));
	return 0;
}

//å­—ç¬¦ä¸²é€†åº
#include<stdio.h>
#include<string.h>
void reverse_string(char arr[]) {
	int sz = strlen(arr);
	if (sz <= 1)
		return;
	char temp = *arr;
	*arr = *(arr + sz - 1);
	*(arr + sz - 1) = '\0';
	reverse_string(arr + 1);
	*(arr + sz - 1) = temp;

}
int main() {
	char arr[] = "abcdef";
	reverse_string(arr);
	printf("%s\n", arr);
	return 0;
}
```

```c
//æ±‚ç¬¬nä¸ªæ–æ³¢é‚£å¥‘æ•°
long long fib1(int n)//é€’å½’
{
	if (n <= 2)
		return 1;
	else
		return fib1(n - 1) + fib1(n - 2);
}
long long fib2(int n)//è¿­ä»£
{
	long long f1 = 1, f2 = 1;
	long long f = 1;
	while (n > 2)
	{
		f = f1 + f2;
		f1 = f2;
		f2 = f;
		n--;
	}
	return f;
}
int main()
{
	int n;
	scanf("%d", &n);
	printf("%lld\n", fib1(n));
	return 0;
}
```

ä¸ºä»€ä¹ˆæ–æ³¢é‚£å¥‘é¢å‡½æ•°çš„é€’å½’å†™æ³•ä¸å¦‚è¿­ä»£å†™æ³•æ•ˆç‡é«˜ï¼Ÿ
å› ä¸ºé€’å½’è¿ç®—ä¸­åŒ…å«å¤ªå¤šé‡å¤è¿ç®—ï¼Œå¦‚åœ¨è®¡ç®—fib1(5)çš„è¿‡ç¨‹ä¸­ï¼Œfib1(1)è®¡ç®—äº†2æ¬¡ã€fib1(2)è®¡ç®—äº†3æ¬¡ï¼Œfib1(3)è®¡ç®—äº†2æ¬¡ï¼Œè€Œè¿­ä»£è¿ç®—ä¸­åªéœ€è¦5æ¬¡è¿­ä»£å³å¯è®¡ç®—å‡ºã€‚
![img](https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239383.webp)

> ç»“è®ºï¼š
>
> 1. è®¸å¤šé—®é¢˜æ˜¯ä»¥é€’å½’çš„å½¢å¼è¿›è¡Œè§£é‡Šçš„ï¼Œè¿™åªæ˜¯å› ä¸ºå®ƒæ¯”éé€’å½’çš„å½¢å¼æ›´ä¸ºæ¸…æ™°ã€‚
> 2. ä½†æ˜¯è¿™äº›é—®é¢˜çš„è¿­ä»£å®ç°å¾€å¾€æ¯”é€’å½’å®ç°æ•ˆç‡æ›´é«˜ï¼Œè™½ç„¶ä»£ç çš„å¯è¯»æ€§ç¨å¾®å·®äº›ã€‚ï¼ˆæ–æ³¢é‚£å¥‘å‡½æ•°ï¼‰
> 3. å½“ä¸€ä¸ªé—®é¢˜ç›¸å½“å¤æ‚ï¼Œéš¾ä»¥ç”¨è¿­ä»£å®ç°æ—¶ï¼Œæ­¤æ—¶é€’å½’å®ç°çš„ç®€æ´æ€§ä¾¿å¯ä»¥è¡¥å¿å®ƒæ‰€å¸¦æ¥çš„è¿è¡Œæ—¶å¼€é”€ã€‚

**è‡ªä¸»ç ”ç©¶**

æ±‰è¯ºå¡”ã€é’è›™è·³å°

## å‡½æ•°æ ˆå¸§çš„åˆ›å»ºä¸é”€æ¯

### äº†è§£mainå‡½æ•°

**mainå‡½æ•°çš„å¤šç§å†™æ³•**ï¼š

1. `void main()`
   C/C++ æ ‡å‡†ä¸­ä»æ¥æ²¡æœ‰å®šä¹‰è¿‡`void main()` è¿™ç§å†™æ³•ï¼Œè™½ç„¶åœ¨ä¸€äº›ç¼–è¯‘å™¨ä¸­ï¼Œ`void main()` å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼ˆå¦‚ vc6ï¼‰ï¼Œä½†å¹¶éæ‰€æœ‰ç¼–è¯‘å™¨éƒ½æ”¯æŒã€‚ä¸€å®šä¸è¦ä½¿ç”¨`void main()`ã€‚
2. `main()`
   åœ¨ C89 ä¸­ï¼Œ`main()` æ˜¯å¯ä»¥æ¥å—çš„ã€‚åæ¥çš„æ”¹è¿›ç‰ˆä¸ºäº†å…¼å®¹ä»¥å‰çš„ä»£ç äºæ˜¯è§„å®šï¼šä¸æ˜ç¡®æ ‡æ˜è¿”å›å€¼çš„ï¼Œé»˜è®¤è¿”å›å€¼ä¸ºintã€‚ä½†æ˜¯è¿˜æ˜¯ä¸å»ºè®®ä½¿ç”¨`main()`ã€‚
3. `int main(void)`
   åœ¨æœ€æ–°çš„ C99 æ ‡å‡†ä¸­ï¼Œå®šä¹‰äº†è¿™ç§å®šä¹‰æ–¹å¼ã€‚**main å‡½æ•°çš„è¿”å›å€¼ç±»å‹å¿…é¡»æ˜¯ int ï¼Œè¿™æ ·è¿”å›å€¼æ‰èƒ½ä¼ é€’ç»™ç¨‹åºçš„æ¿€æ´»è€…ï¼ˆå¦‚æ“ä½œç³»ç»Ÿï¼‰ã€‚**å¦‚æœ main å‡½æ•°çš„æœ€åæ²¡æœ‰å†™ return è¯­å¥çš„è¯ï¼ŒC99 è§„å®šç¼–è¯‘å™¨è¦è‡ªåŠ¨åœ¨ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶ä¸­ï¼ˆå¦‚ exe æ–‡ä»¶ï¼‰åŠ å…¥return 0ã€‚
4. `int main()`
   C++98 ä¸­å®šä¹‰è¿™ç§å®šä¹‰æ–¹å¼ï¼Œ`int main()` ç­‰åŒäº C99 ä¸­çš„ `int main( void )` ã€‚**å¼ºçƒˆå»ºè®®ä½¿ç”¨è¿™ç§å®šä¹‰æ–¹å¼**ã€‚
5. `int main(int argc,char *argv[])`
   åœ¨æœ€æ–°çš„ C99 å’ŒC++98ä¸­éƒ½å®šä¹‰äº†è¿™ç§æ–¹å¼ï¼Œç”¨æ³•ç›¸åŒã€‚å¦‚æœä¸éœ€è¦ä»å‘½ä»¤è¡Œä¸­è·å–å‚æ•°ï¼Œè¯·ç”¨`int main()` æˆ–`int main(void)` ï¼Œå¦åˆ™è¯·ç”¨`int main( int argc, char *argv[] )` ã€‚

ä¼—æ‰€å‘¨çŸ¥ï¼Œä¸€æ®µä»£ç è¿è¡Œä¸€å®šæ˜¯ä»mainå‡½æ•°å¼€å§‹æ‰§è¡Œçš„ï¼Œä½†æ˜¯mainå‡½æ•°å…¶å®ä¹Ÿæ˜¯è¢«è°ƒç”¨çš„ã€‚

![image-20240601230537914](https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239384.png)

åœ¨VS2022ç¼–è¯‘ç¯å¢ƒä¸‹ï¼Œmainå‡½æ•°æ˜¯è¢«invoke_mainå‡½æ•°è°ƒç”¨çš„ï¼Œ

![image-20240601230650390](https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239385.png)

è€Œinvoke_mainå‡½æ•°åˆæ˜¯è¢«main_resultå‡½æ•°è°ƒç”¨çš„ï¼Œ

![image-20240601230757262](https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239386.png)

ç±»ä¼¼è¿™æ ·é€å±‚è°ƒç”¨çš„ï¼Œå…·ä½“è°ƒç”¨å¤šå°‘å±‚å‡½æ•°ç”±ç¼–è¯‘å™¨å®ç°ã€‚

### è¯¦è§£å‡½æ•°æ ˆå¸§çš„åˆ›å»ºä¸é”€æ¯

```c++
int main() {
00181840  push        ebp  
00181841  mov         ebp,esp  
00181843  sub         esp,0E4h  
00181849  push        ebx  
0018184A  push        esi  
0018184B  push        edi  
0018184C  lea         edi,[ebp-24h]  
0018184F  mov         ecx,9  
00181854  mov         eax,0CCCCCCCCh  
00181859  rep stos    dword ptr es:[edi]  
	int a = 10;
0018185B  mov         dword ptr [ebp-8],0Ah  
	int b = 20;
00181862  mov         dword ptr [ebp-14h],14h  
	int c = Add(a, b);
00181869  mov         eax,dword ptr [ebp-14h]  
0018186C  push        eax  
0018186D  mov         ecx,dword ptr [ebp-8]  
00181870  push        ecx  
00181871  call        001810B9  
00181876  add         esp,8  
00181879  mov         dword ptr [ebp-20h],eax  
	printf("%d\n", c);
0018187C  mov         eax,dword ptr [ebp-20h]  
0018187F  push        eax  
00181880  push        187B30h  
00181885  call        001810D7  
0018188A  add         esp,8  
	return 0;
0018188D  xor         eax,eax  
}
0018188F  pop         edi  
00181890  pop         esi  
00181891  pop         ebx  
00181892  add         esp,0E4h  
00181898  cmp         ebp,esp  
0018189A  call        00181253  
0018189F  mov         esp,ebp  
001818A1  pop         ebp  
001818A2  ret  
```

- **mainå‡½æ•°è°ƒç”¨å‰æ ˆå¸§æƒ…å†µ**ï¼š

<img src="https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239387.png" alt="image-20240602153450799" style="zoom: 50%;" />

- **å‡½æ•°æ ˆå¸§çš„åˆ›å»º**ï¼š

```c++
00181840  push        ebp  			//å°†ebpä¸­çš„å†…å®¹å‹æ ˆï¼Œæ­¤æ—¶ebpä¸­å­˜æ”¾çš„æ˜¯invoke_mainå‡½æ•°æ ˆå¸§çš„åŸºåº•åœ°å€
00181841  mov         ebp,esp  		//å°†espçš„å€¼æ‹·è´ç»™ebpï¼Œæ­¤æ—¶çš„ebpä¸ºmainå‡½æ•°æ ˆå¸§çš„åŸºåº•åœ°å€
00181843  sub         esp,0E4h  	//å°†espçš„å€¼å‡0E4Hï¼Œæ­¤æ—¶è¿ç®—åçš„espä¸ºmainå‡½æ•°æ ˆå¸§çš„åŸºé¡¶åœ°å€
00181849  push        ebx  			//å°†å¯„å­˜å™¨ebxçš„å€¼å‹æ ˆ
0018184A  push        esi  			//å°†å¯„å­˜å™¨esiçš„å€¼å‹æ ˆ
0018184B  push        edi  			//å°†å¯„å­˜å™¨ediçš„å€¼å‹æ ˆ
0018184C  lea         edi,[ebp-24h] //å°†ebp-24Hçš„å€¼å­˜æ”¾å…¥edi
0018184F  mov         ecx,9  		//æŠŠecxçš„å€¼è®¾ä¸º9
00181854  mov         eax,0CCCCCCCCh  //æŠŠeaxçš„å€¼è®¾ä¸º0xCCCCCCCC
00181859  rep stos    dword ptr es:[edi]//å°†ebp-4Hè‡³[edi]çš„9ä¸ª4Bå†…å­˜ç©ºé—´åˆå§‹åŒ–ä¸º0xCCCCCCCC
```

<img src="https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239388.png" alt="image-20240602155032736" style="zoom:50%;" />

```c++
	int a = 10;
0018185B  mov         dword ptr [ebp-8],0Ah  //å°†0AHå­˜å…¥ebp-8çš„å†…å­˜ç©ºé—´
	int b = 20;
00181862  mov         dword ptr [ebp-14h],14h  //å°†14Hå­˜å…¥ebp-14çš„å†…å­˜ç©ºé—´
	int c = Add(a, b);
00181869  mov         eax,dword ptr [ebp-14h]  //ä¼ é€’bï¼Œå°†ebp-14å†…å­˜ç©ºé—´çš„å†…å®¹å­˜å…¥eax
0018186C  push        eax  					   //å°†eaxçš„å†…å®¹å‹æ ˆ
0018186D  mov         ecx,dword ptr [ebp-8]  //ä¼ é€’aï¼Œå°†ebp-8å†…å­˜ç©ºé—´çš„å†…å®¹å­˜å…¥ecx
00181870  push        ecx  					 //å°†ecxçš„å†…å®¹å‹æ ˆ
00181871  call        001810B9  			//å‡½æ•°è°ƒç”¨
00181876  add         esp,8  
00181879  mov         dword ptr [ebp-20h],eax  
```

<img src="https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239389.png" alt="image-20240602155919127" style="zoom:50%;" />

åœ¨æ‰§è¡ŒcallæŒ‡ä»¤ä¹‹å‰å…ˆä¼šæŠŠcallæŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€è¿›è¡Œå‹æ ˆæ“ä½œï¼Œç„¶åè·³è½¬è‡³Addå‡½æ•°æ‰§è¡Œã€‚

```c++
int Add(int x, int y) {
00181780  push        ebp  		//å°†mainå‡½æ•°æ ˆå¸§çš„åŸºåº•åœ°å€å‹æ ˆ
00181781  mov         ebp,esp  	//å°†espçš„å€¼æ‹·è´ç»™ebpï¼Œæ­¤æ—¶çš„ebpä¸ºAddå‡½æ•°æ ˆå¸§çš„åŸºåº•åœ°å€
00181783  sub         esp,0CCh  //å°†espçš„å€¼å‡0CCHï¼Œæ­¤æ—¶è¿ç®—åçš„espä¸ºAddå‡½æ•°æ ˆå¸§çš„åŸºé¡¶åœ°å€
00181789  push        ebx  		//å°†ebxçš„å€¼å‹æ ˆ
0018178A  push        esi  		//å°†esiçš„å€¼å‹æ ˆ
0018178B  push        edi  		//å°†ediçš„å€¼å‹æ ˆ
	int z = 0;
0018178C  mov         dword ptr [ebp-8],0  //å°†0å­˜å…¥ebp-8çš„å†…å­˜ç©ºé—´
	z = x + y;
00181793  mov         eax,dword ptr [ebp+8]  //å°†ebp+8åœ°å€å¤„çš„å½¢å‚xå­˜å‚¨åˆ°eaxä¸­
00181796  add         eax,dword ptr [ebp+0Ch]  //å°†ebp+0CHåœ°å€å¤„çš„å½¢å‚yåŠ åˆ°åˆ°eaxä¸­
00181799  mov         dword ptr [ebp-8],eax   //å°†eaxçš„ç»“æœä¿å­˜åˆ°ebp-8çš„åœ°å€å¤„ï¼Œå…¶å®å°±æ˜¯æ”¾åˆ°zä¸­
	return z;
0018179C  mov         eax,dword ptr [ebp-8]  //å°†ebp-8åœ°å€å¤„çš„å€¼æ”¾åœ¨eaxä¸­
}
0018179F  pop         edi  
001817A0  pop         esi  
001817A1  pop         ebx  
001817A2  mov         esp,ebp  
001817A4  pop         ebp  
001817A5  ret 
```

<img src="https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239390.png" alt="image-20240602162033919" style="zoom:50%;" />

- **å‡½æ•°æ ˆå¸§çš„é”€æ¯**

```c++
0018179F  pop         edi  		//å‡ºæ ˆï¼Œæ ˆé¡¶å€¼å­˜å…¥edi
001817A0  pop         esi   	//å‡ºæ ˆï¼Œæ ˆé¡¶å€¼å­˜å…¥esi
001817A1  pop         ebx   	//å‡ºæ ˆï¼Œæ ˆé¡¶å€¼å­˜å…¥ebx
001817A2  mov         esp,ebp  	//å°†ebpçš„å€¼æ‹·è´ç»™espï¼Œç›¸å½“äºå›æ”¶äº†Addæ ˆå¸§
001817A4  pop         ebp  		//å‡ºæ ˆï¼Œæ ˆé¡¶å€¼å­˜å…¥ebpï¼Œæ­¤æ—¶çš„ebpä¸ºmainå‡½æ•°æ ˆå¸§åŸºåº•åœ°å€ï¼Œespä¸ºmainå‡½æ•°æ ˆå¸§åŸºé¡¶åœ°å€
001817A5  ret  //é€šè¿‡æ‰§è¡ŒretæŒ‡ä»¤ï¼Œä»æ ˆé¡¶æ‰¾åˆ°callæŒ‡ä»¤ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼Œç„¶åè¿”å›åˆ°ä¸Šä¸€å±‚å‡½æ•°æ ˆå¸§ï¼Œè·³è½¬åˆ°callæŒ‡ä»¤ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€å¤„ç»§ç»­æ‰§è¡Œã€‚
```

è°ƒç”¨å®ŒAddå‡½æ•°åï¼Œå›åˆ°mainå‡½æ•°ç»§ç»­æ‰§è¡Œ

```c++
00181876  add         esp,8  	//espç›´æ¥+8ï¼Œç›¸å½“äºå›æ”¶äº†å½¢å‚xå’Œyçš„å†…å­˜ç©ºé—´
00181879  mov         dword ptr [ebp-20h],eax  //å°†eaxä¸­å€¼ï¼Œå­˜å…¥ebp-20Hçš„å†…å­˜ç©ºé—´å¤„ï¼Œæ­¤æ—¶eaxä¸­å°±æ˜¯Addå‡½æ•°ä¸­è®¡ç®—çš„xå’Œyçš„å’Œ
```

> **ã€é—®é¢˜ã€‘**
>
> 1. å±€éƒ¨å˜é‡æ˜¯æ€ä¹ˆåˆ›å»ºçš„ï¼Ÿ
>    åœ¨å‡½æ•°å¼€è¾Ÿçš„æ ˆå¸§ç©ºé—´ä¸­ï¼Œåˆå§‹åŒ–ä¸€å—ä»ebpè‡³ä½åœ°å€çš„ç©ºé—´ï¼Œç„¶åå°†å®šä¹‰çš„å±€éƒ¨å˜é‡å­˜å…¥è¿™å—ç©ºé—´ã€‚è¶Šé å‰å®šä¹‰çš„å±€éƒ¨å˜é‡è¶Šé è¿‘æ ˆåº•å­˜æ”¾ã€‚
> 2. å±€éƒ¨å˜é‡æœªåˆå§‹åŒ–ä¸ºä»€ä¹ˆæ˜¯éšæœºçš„ï¼Ÿ
>    VS2022ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†å­˜æ”¾å±€éƒ¨å˜é‡çš„å†…å­˜ç©ºé—´åˆå§‹åŒ–ä¸º0xccccccccï¼Œè‹¥æŸå±€éƒ¨å˜é‡æœªåˆå§‹åŒ–ï¼Œé‚£å­˜æ”¾è¯¥å±€éƒ¨å˜é‡çš„å†…å­˜ç©ºé—´å†…å®¹å°±ä¸º0xccccccccã€‚
> 3. å‡½æ•°æ˜¯æ€ä¹ˆä¼ å‚çš„ï¼Ÿä¼ å‚çš„é¡ºåºæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ
>    åœ¨è°ƒç”¨å‡½æ•°å‰ï¼Œå°†å®å‚æŒ‰ç…§å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­å½¢å‚é¡ºåºä»å³è‡³å·¦ä¾æ¬¡å‹æ ˆï¼Œå‹å…¥æ ˆé¡¶çš„å°±æ˜¯å½¢å‚ï¼Œç„¶åè°ƒç”¨å‡½æ•°ã€‚
> 4. å½¢å‚å’Œå®å‚æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ
>    å½¢å‚æ˜¯å‹æ ˆæ—¶å¼€è¾Ÿçš„ç©ºé—´ï¼Œå½¢å‚ä¸å®å‚åœ¨å€¼ä¸Šæ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯ç©ºé—´ä¸Šæ˜¯ç‹¬ç«‹çš„ã€‚
> 5. å‡½æ•°çš„è°ƒç”¨æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ
>    é€šè¿‡æ‰§è¡ŒcallæŒ‡ä»¤æ¥è°ƒç”¨å‡½æ•°ï¼Œåœ¨æ‰§è¡ŒcallæŒ‡ä»¤ä¹‹å‰å…ˆä¼šæŠŠcallæŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€è¿›è¡Œå‹æ ˆæ“ä½œï¼Œç„¶åè·³è½¬è‡³è¢«è°ƒç”¨å‡½æ•°ã€‚
> 6. å‡½æ•°è°ƒç”¨ç»“æŸåæ˜¯æ€ä¹ˆè¿”å›çš„ï¼Ÿ
>    é€šè¿‡æ‰§è¡ŒretæŒ‡ä»¤ï¼Œä»æ ˆé¡¶æ‰¾åˆ°callæŒ‡ä»¤ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼Œç„¶åè¿”å›åˆ°ä¸Šä¸€å±‚å‡½æ•°æ ˆå¸§ï¼Œè·³è½¬åˆ°callæŒ‡ä»¤ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€å¤„ç»§ç»­æ‰§è¡Œã€‚

# æ•°ç»„

## ä¸€ç»´æ•°ç»„çš„åˆ›å»ºå’Œåˆå§‹åŒ–

```c
int main()
{
	int arr1[10] = { 1,2,3,4,5,6,7,8,9,10 };//å®Œå…¨åˆå§‹åŒ–
	int arr2[10] = { 1,2,3 };//ä¸å®Œå…¨åˆå§‹åŒ–ï¼Œå‰©ä½™å…ƒç´ é»˜è®¤åˆå§‹åŒ–ä¸º0
	int arr3[] = { 1,2,3,4,5,6,7,8,9,10 };//æ•°ç»„å¤§å°æœ‰å…ƒç´ ä¸ªæ•°ç¡®å®š
	char str1[3] = { 'a','b','c' };//å­˜æ”¾å†…å®¹ä¸º'a','b','c'
	char str2[] = { 'a','b','c' };//å­˜æ”¾å†…å®¹ä¸º'a','b','c'
	char str3[5]= { 'a','b','c' };//å­˜æ”¾å†…å®¹ä¸º'a','b','c','\0','\0'
	char str4[5] = "abc";//å­˜æ”¾å†…å®¹ä¸º'a','b','c','\0','\0'
	char str5[] = "abc";//å­˜æ”¾å†…å®¹ä¸º'a','b','c','\0'
	char str6[3] = "abc";//å­˜æ”¾å†…å®¹ä¸º'a','b','c'
	char str7[5] = { 'a',98,'c' };//å­˜æ”¾å†…å®¹ä¸º'a','b','c','\0','\0'
	int n=10;
	int arr4[n]; //å˜é•¿æ•°ç»„ä¸å¯ä»¥ä¸å®Œå…¨åˆå§‹åŒ–
	return 0;
}
```

## ä¸€ç»´æ•°ç»„åœ¨å†…å­˜ä¸­çš„å­˜å‚¨

æ•°ç»„åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­å­˜æ”¾çš„ï¼Œéšç€ä¸‹æ ‡çš„å¢é•¿ï¼Œåœ°å€æ˜¯ç”±ä½åˆ°é«˜åˆ†å¸ƒçš„

```c
#include <stdio.h>
int main()
{
	int arr[10] = { 1,2,3,4,5,6,7,8,9,10 };
	int i = 0;
	int sz = sizeof(arr) / sizeof(arr[0]);
	int* p = arr;
	for (i = 0; i < sz; i++)
		printf("arr[%d] = %d\n", i, *(p + i));
	for (i = 0; i < sz; ++i)
		printf("&arr[%d] = %p\n", i, &arr[i]);
	return 0;
}
```

## äºŒç»´æ•°ç»„çš„åˆ›å»ºå’Œåˆå§‹åŒ–

```c
int main()
{
	int arr1[3][4] = { 1,2,3,4,5,6,7,8,9,10,11,12 };
	int arr2[3][4] = { 1,2,3,4,5,6 };
	int arr3[3][4] = { {1,2},{3,4,5},{6} };
	//å¯ä»¥çœç•¥è¡Œä¸‹æ ‡ï¼Œä¸èƒ½çœç•¥åˆ—ä¸‹æ ‡
	int arr4[][4] = { 1,2,3,4,5,6,7,8,9 };
	return 0;
}
```

## äºŒç»´æ•°ç»„åœ¨å†…å­˜ä¸­çš„å­˜å‚¨

```c
#include<stdio.h>
int main()
{
    int arr[3][4] = { 1,2,3,4,5,6,7,8,9,10,11,12 };
    int i = 0;
    int* p = &arr[0][0];
    for (i = 0; i < sizeof(arr)/sizeof(arr[0][0]); i++)
        printf("%d ", *(p + i));
    printf("\n");
    for (i = 0; i < 3; i++)
    {
        int j = 0;
        for (j = 0; j < 4; j++)
            printf("&arr[%d][%d] = %p ", i, j, &arr[i][j]);
        printf("\n");
    }
    return 0;
}
```

## æ•°ç»„ä½œä¸ºå‡½æ•°å‚æ•°

```c
//å†’æ³¡æ’åº
#include<stdio.h>
void bubble_sort(int arr[],int sz)//void bubble_sort(int* arr,int sz)
{
	int i, j;
	for (i = 0; i < sz - 1; i++)
	{
		for (j = 0; j < sz - 1 - i; j++)
			if (arr[j] > arr[j + 1])
			{
				int temp = arr[j];
				arr[j] = arr[j + 1];
				arr[j + 1] = temp;
			}
	}
}
int main()
{
	int arr[] = { 3,1,7,5,8,9,0,2,4,6 };
	int sz = sizeof(arr) / sizeof(arr[0]);
	bubble_sort(arr, sz);
	int i = 0;
	for (i = 0; i < sz; i++)
		printf("%d ", arr[i]);
	return 0;
}
```

**æ•°ç»„åæ˜¯ä»€ä¹ˆï¼Ÿ**

```c
//æ•°ç»„åæ˜¯æ•°ç»„é¦–å…ƒç´ çš„åœ°å€ã€‚
//æœ‰ä¸¤ä¸ªä¾‹å¤–:
//1ã€sizeof(æ•°ç»„å)ï¼Œè®¡ç®—æ•´ä¸ªæ•°ç»„çš„å¤§å°ï¼Œsizeofå†…éƒ¨å•ç‹¬æ”¾ä¸€ä¸ªæ•°ç»„åï¼Œæ•°ç»„åè¡¨ç¤ºæ•´ä¸ªæ•°ç»„ã€‚
//2ã€&æ•°ç»„åï¼Œå–å‡ºçš„æ˜¯æ•°ç»„çš„åœ°å€ã€‚&æ•°ç»„åï¼Œæ•°ç»„åè¡¨ç¤ºæ•´ä¸ªæ•°ç»„ã€‚
#include<stdio.h>
int main()
{
    int arr[] = { 1,2,3,4,5,6,7 };
    int sz = sizeof(arr) / sizeof(arr[0]);  //arrä»£è¡¨æ•´ä¸ªæ•°ç»„
    printf("%p\n", arr);                //é¦–å…ƒç´ åœ°å€
    printf("%p\n", arr + 1);
    printf("%p\n", &arr[0]);            //é¦–å…ƒç´ åœ°å€
    printf("%p\n", &arr[0] + 1);
    printf("%p\n", &arr);               //æ•´ä¸ªæ•°ç»„çš„åœ°å€
    printf("%p\n", &arr + 1);
    return 0;
}
//0000001744F9FBA8
//0000001744F9FBAC
//0000001744F9FBA8
//0000001744F9FBAC
//0000001744F9FBA8
//0000001744F9FBC4
```

## åº”ç”¨å®ä¾‹

ä¸‰å­æ£‹ã€æ‰«é›·

# æ“ä½œç¬¦

## ç®—æœ¯æ“ä½œç¬¦

1. é™¤äº† % å–æ¨¡æ“ä½œç¬¦ä¹‹å¤–ï¼Œå…¶ä»–çš„å‡ ä¸ªæ“ä½œç¬¦å¯ä»¥ä½œç”¨äºæ•´æ•°å’Œæµ®ç‚¹æ•°ã€‚
2. å¯¹äº / é™¤æ³•æ“ä½œç¬¦å¦‚æœä¸¤ä¸ªæ“ä½œæ•°éƒ½ä¸ºæ•´æ•°ï¼Œæ‰§è¡Œæ•´æ•°é™¤æ³•ã€‚è€Œåªè¦æœ‰æµ®ç‚¹æ•°æ‰§è¡Œçš„å°±æ˜¯æµ®ç‚¹æ•°é™¤æ³•ã€‚
3. % å–æ¨¡æ“ä½œç¬¦çš„ä¸¤ä¸ªæ“ä½œæ•°å¿…é¡»ä¸ºæ•´æ•°ã€‚è¿”å›çš„æ˜¯æ•´é™¤ä¹‹åçš„ä½™æ•°ã€‚

```c
#include<stdio.h>
int main()
{
	int ret1 = 10 / 3;
	double ret2 = 10.0 / 3;
	int ret3 = 10 % 3;
	printf("%d\n", ret1);
	printf("%lf\n", ret2);
	printf("%d\n", ret3);
	return 0;
}   
```

## ç§»ä½æ“ä½œç¬¦

**å·¦ç§»**æ“ä½œç¬¦ç§»ä½è§„åˆ™ï¼šå·¦è¾¹æŠ›å¼ƒï¼Œå³è¾¹è¡¥0

**å³ç§»**æ“ä½œç¬¦ç§»ä½è§„åˆ™ï¼š

1. é€»è¾‘ç§»ä½ï¼Œå·¦è¾¹ç”¨0å¡«å……ï¼Œå³è¾¹ä¸¢å¼ƒ
2. **ç®—æœ¯ç§»ä½ï¼ˆå¸¸ç”¨ï¼‰**ï¼Œå·¦è¾¹ç”¨åŸè¯¥å€¼çš„ç¬¦å·ä½å¡«å……ï¼Œå³è¾¹ä¸¢å¼ƒ

```c
#include<stdio.h>
int main()
{
	int num1 = 10;//00000000 00000000 00000000 00001010
	int num2 = -10;//11111111 11111111 11111111 11110110
	//å·¦ç§»è§„åˆ™ï¼šå·¦è¾¹æŠ›å¼ƒï¼Œå³è¾¹è¡¥0
	int ret1 = num1 << 1;
	//00000000 00000000 00000000 00010100
	int ret2 = num2 << 1;
	//11111111 11111111 11111111 11101100
	//10000000 00000000 00000000 00010100
	printf("%d\n", ret1);//20
	printf("%d\n", ret2);//-20
	//å³ç§»è§„åˆ™ï¼š
	//ç®—æ•°å³ç§»ï¼šå·¦è¾¹ç”¨åŸè¯¥å€¼çš„ç¬¦å·ä½å¡«å……ï¼Œå³è¾¹ä¸¢å¼ƒ
	int ret3 = num1 >> 1;
	//00000000 00000000 00000000 00000101
	int ret4 = num2 >> 1;
	//11111111 11111111 11111111 11111011
	//10000000 00000000 00000000 00000101
	printf("%d\n", ret3);//5
	printf("%d\n", ret4);//-5
	return 0;
}
```

å·¦ç§»å³ç§»æ“ä½œå¯ä»¥ç­‰ä»·å®ç°ä¹˜2é™¤2æ“ä½œï¼Œé™¤äº†ä»¥ä¸‹å‡ ä¸ªæ•°

```c
#include<stdio.h>
#include <limits.h>
int main() {
	int n1 = 0;//00000000 00000000 00000000 00000000
	int n2 = INT_MAX;//2^31-1 //01111111 11111111 11111111 11111111
	int n3 = -1;//11111111 11111111 11111111 11111111
	int n4 = INT_MIN;//-2^31 //10000000 00000000 00000000 00000000
	printf("%d\n", (n1 << 1));//0
	printf("%d\n", (n2 << 1));//-2
	printf("%d\n", (n3 << 1));//-2
	printf("%d\n", (n4 << 1));//0
	printf("%d\n", (n1 >> 1));//0
	printf("%d\n", (n2 >> 1));//1073741823 //2^30-1
	printf("%d\n", (n3 >> 1));//-1
	printf("%d\n", (n4 >> 1));//-1073741824 //-2^30
	return 0;
}
```

å¯¹äºç§»ä½è¿ç®—ç¬¦ï¼Œä¸è¦ç§»åŠ¨è´Ÿæ•°ä½ï¼Œè¿™ä¸ªæ˜¯æ ‡å‡†æœªå®šä¹‰çš„ã€‚

```c
int num = 10;
num >> -1;//error
```

## ä½æ“ä½œç¬¦

æŒ‰ä½ä¸`&`ï¼šåªæœ‰å½“ä¸¤ä¸ªå¯¹åº”ä½éƒ½ä¸º1æ—¶ï¼Œç»“æœæ‰ä¸º1ï¼Œå¦åˆ™ç»“æœä¸º0ï¼Œã€æœ‰0åˆ™0ã€‘

æŒ‰ä½æˆ–`|`ï¼šåªè¦ä¸¤ä¸ªå¯¹åº”ä½ä¸­æœ‰ä¸€ä¸ªä¸º1ï¼Œç»“æœå°±ä¸º1ï¼Œå¦åˆ™ç»“æœä¸º0ï¼Œã€æœ‰1åˆ™1ã€‘

æŒ‰ä½å¼‚æˆ–`^`ï¼šå¦‚æœä¸¤ä¸ªå¯¹åº”ä½å€¼ä¸åŒï¼Œåˆ™ç»“æœä¸º1ï¼Œå¦åˆ™ç»“æœä¸º0ï¼Œã€åŒ0å¼‚1ã€‘

```c
#include<stdio.h>
int main()
{
	int a = 3; //00000000 00000000 00000000 00000011
	int b = -5;//11111111 11111111 11111111 11111011
	int c = a & b;
	//00000000 00000000 00000000 00000011
	int d = a | b;
	//11111111 11111111 11111111 11111011
	//10000000 00000000 00000000 00000101
	int e = a ^ b;
	//11111111 11111111 11111111 11111000
	//10000000 00000000 00000000 00001000
	printf("%d\n", c);//3
	printf("%d\n", d);//-5
	printf("%d\n", e);//-8
	return 0;
}
```

- å¼‚æˆ–æ“ä½œç¬¦ï¼š**a^a=0**ï¼Œ**0^a=aï¼Œå¼‚æˆ–æ”¯æŒäº¤æ¢å¾‹å’Œç»“åˆå¾‹**

```c
//ä¸èƒ½åˆ›å»ºä¸´æ—¶å˜é‡ï¼Œå®ç°ä¸¤ä¸ªæ•°çš„äº¤æ¢ã€‚
#include<stdio.h>
int main()
{
	int a = 3, b = 5;
	a = a + b;
	b = a - b;
	a = a - b;
	printf("%d %d", a, b);
	return 0;
}

#include<stdio.h>
int main()
{
	int a = 3, b = 5;
	a = a ^ b;
	b = a ^ b;//a ^ b ^ b = a
	a = a ^ b;//a ^ b ^ a = b
	printf("%d %d", a, b);
	return 0;
}
```

```c
//ç»Ÿè®¡äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°
/*
æ–¹æ³•ä¸€ï¼š
æ€è·¯ï¼š
å¾ªç¯è¿›è¡Œä»¥ä¸‹æ“ä½œï¼Œç›´åˆ°nè¢«ç¼©å‡ä¸º0ï¼š
   1. ç”¨è¯¥æ•°æ®æ¨¡2ï¼Œæ£€æµ‹å…¶æ˜¯å¦èƒ½å¤Ÿè¢«2æ•´é™¤
   2. å¯ä»¥ï¼šåˆ™è¯¥æ•°æ®å¯¹åº”äºŒè¿›åˆ¶æ¯”ç‰¹ä½çš„æœ€ä½ä½ä¸€å®šæ˜¯0ï¼Œå¦åˆ™æ˜¯1ï¼Œå¦‚æœæ˜¯1ç»™è®¡æ•°åŠ 1
   3. å¦‚æœnä¸ç­‰äº0æ—¶ï¼Œç»§ç»­1
*/
int NumberOf1(int n)
{
	int count = 0;
	while(n)
	{
		if(n%2==1)
			count++;
		n = n/2;
	}
	return count;
}
/*
ä¸Šè¿°æ–¹æ³•ç¼ºé™·ï¼šè¿›è¡Œäº†å¤§é‡çš„å–æ¨¡ä»¥åŠé™¤æ³•è¿ç®—ï¼Œå–æ¨¡å’Œé™¤æ³•è¿ç®—çš„æ•ˆç‡æœ¬æ¥å°±æ¯”è¾ƒä½ã€‚
æ–¹æ³•äºŒæ€è·¯ï¼š
ä¸€ä¸ªintç±»å‹çš„æ•°æ®ï¼Œå¯¹åº”çš„äºŒè¿›åˆ¶ä¸€å…±æœ‰32ä¸ªæ¯”ç‰¹ä½ï¼Œå¯ä»¥é‡‡ç”¨ä½è¿ç®—çš„æ–¹å¼ä¸€ä½ä¸€ä½çš„æ£€æµ‹ï¼Œå…·ä½“å¦‚ä¸‹
*/
int NumberOf1(unsigned int n)
{
	int count = 0;
	int i = 0;
	for(i=0; i<32; i++)
	{
		if(((n>>i)&1) == 1)
			count++;
	}
	return count;
}
/*
æ–¹æ³•äºŒä¼˜ç‚¹ï¼šç”¨ä½æ“ä½œä»£æ›¿å–æ¨¡å’Œé™¤æ³•è¿ç®—ï¼Œæ•ˆç‡ç¨å¾®æ¯”è¾ƒé«˜
  ç¼ºé™·ï¼šä¸è®ºæ˜¯ä»€ä¹ˆæ•°æ®ï¼Œå¾ªç¯éƒ½è¦æ‰§è¡Œ32æ¬¡
æ–¹æ³•ä¸‰ï¼š
æ€è·¯ï¼šé‡‡ç”¨ç›¸é‚»çš„ä¸¤ä¸ªæ•°æ®è¿›è¡ŒæŒ‰ä½ä¸è¿ç®—
ä¸¾ä¾‹ï¼š
9999ï¼šâ€­10 0111 0000 1111â€¬
ç¬¬ä¸€æ¬¡å¾ªç¯ï¼šn=9999   n=n&(n-1)=9999&9998= 9998
ç¬¬äºŒæ¬¡å¾ªç¯ï¼šn=9998   n=n&(n-1)=9998&9997= 9996
ç¬¬ä¸‰æ¬¡å¾ªç¯ï¼šn=9996   n=n&(n-1)=9996&9995= 9992
ç¬¬å››æ¬¡å¾ªç¯ï¼šn=9992   n=n&(n-1)=9992&9991= 9984
ç¬¬äº”æ¬¡å¾ªç¯ï¼šn=9984   n=n&(n-1)=9984&9983= 9728
ç¬¬å…­æ¬¡å¾ªç¯ï¼šn=9728   n=n&(n-1)=9728&9727= 9216
ç¬¬ä¸ƒæ¬¡å¾ªç¯ï¼šn=9216   n=n&(n-1)=9216&9215= 8192
ç¬¬å…«æ¬¡å¾ªç¯ï¼šn=8192   n=n&(n-1)=8192&8191= 0
å¯ä»¥è§‚å¯Ÿä¸‹ï¼šæ­¤ç§æ–¹å¼ï¼Œæ•°æ®çš„äºŒè¿›åˆ¶æ¯”ç‰¹ä½ä¸­æœ‰å‡ ä¸ª1ï¼Œå¾ªç¯å°±å¾ªç¯å‡ æ¬¡ï¼Œè€Œä¸”ä¸­é—´é‡‡ç”¨äº†ä½è¿ç®—ï¼Œå¤„ç†èµ·æ¥æ¯”è¾ƒé«˜æ•ˆ
*/
int NumberOf1(int n)
{
	int count = 0;
	while(n)
	{
		n = n&(n-1);
		count++;
	}
	return count;
}
```

```c
//æ‰“å°æ•´æ•°äºŒè¿›åˆ¶çš„å¥‡æ•°ä½å’Œå¶æ•°ä½
#include<stdio.h>
int main() {
	int n;
	scanf("%d", &n);
	int i, m = n;
	printf("å¶æ•°ä½ï¼š");
	for (i = 31; i >= 0; i -= 2)
		printf("%d ", (m >> i) & 1);
	printf("\nå¥‡æ•°ä½ï¼š");
	for (i = 30; i >= 0; i -= 2)
		printf("%d ", (m >> i) & 1);
	return 0;
}
```

```c
//æ±‚ä¸¤ä¸ªæ•°äºŒè¿›åˆ¶ä¸­ä¸åŒä½çš„ä¸ªæ•°
#include<stdio.h>
int main() {
	int m = 1999, n = 2299;
	int tmp = m ^ n;
	int count = 0;
	for (int i = 0; i < 32; i++)
		if ((tmp >> i) & 1 == 1)
			count++;
	printf("%d\n", count);
	return 0;
}
```

```c
//æ‰¾å•èº«ç‹—2
#include<stdio.h>
void find_singledog(int arr[], int sz, int singledog[]) {
	int i = 0;
	int ret = 0;
    //å…ˆæ‰¾åˆ°ä¸¤ä¸ªæ•°äº’ç›¸å¼‚æˆ–çš„ç»“æœ
	for (i = 0; i < sz; i++)
		ret ^= arr[i];
	int pos = 0;
    //å†æ‰¾åˆ°æœ‰åˆ†æ­§çš„ä¸€ä½ã€‚åœ¨è¿™ä¸€ä½ä¸Šï¼Œä¸¤ä¸ªæ•°ä¸€å®šæ˜¯ä¸€ä¸ª1ä¸€ä¸ª0
	for(i=0;i<32;i++){
		if (((ret >> i) & 1) == 1) {
			pos = i;
			break;
		}
	}
	for (i = 0; i < sz; i++) {
		if (((arr[i] >> pos) & 1) == 1)
			singledog[0] ^= arr[i];//è¿™ä¸€ä½æ˜¯1çš„ï¼Œæœ‰1ã€3ã€5ï¼Œç»è¿‡å¼‚æˆ–ååªå‰©ä¸‹6
		else
			singledog[1] ^= arr[i];//è¿™ä¸€ä½æ˜¯0çš„ï¼Œæœ‰2ã€4ã€6ï¼Œç»è¿‡å¼‚æˆ–ååªå‰©ä¸‹5
	}
}
int main() {
	int arr[] = { 1,2,3,4,5,1,2,3,4,6 };
	int sz = sizeof(arr) / sizeof(arr[0]);
	int singledog[2] = { 0 };
	find_singledog(arr, sz, singledog);
	printf("%d %d\n", singledog[0], singledog[1]);
	return 0;
}
```

## èµ‹å€¼æ“ä½œç¬¦

```c
+=ã€-=ã€*=ã€/=ã€%=ã€>>=ã€<<=ã€&=ã€|=ã€^=
```

## å•ç›®æ“ä½œç¬¦

```c
!           é€»è¾‘åæ“ä½œ
-           è´Ÿå€¼
+           æ­£å€¼
&           å–åœ°å€
sizeof      æ“ä½œæ•°çš„ç±»å‹é•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰
~           å¯¹ä¸€ä¸ªæ•°çš„äºŒè¿›åˆ¶æŒ‰ä½å–å
--          å‰ç½®ã€åç½®--
++          å‰ç½®ã€åç½®++
*           é—´æ¥è®¿é—®æ“ä½œç¬¦(è§£å¼•ç”¨æ“ä½œç¬¦)
(ç±»å‹)       å¼ºåˆ¶ç±»å‹è½¬æ¢
```

```c
#include<stdio.h>
int main()
{
	int a = 10;
	printf("%d\n", sizeof(a));
	printf("%d\n", sizeof a);
	printf("%d\n", sizeof(int));
	//printf("%d\n", sizeof int);		//error
	int arr[10] = { 0 };
	printf("%d\n", sizeof(arr));
	printf("%d\n", sizeof(int[10]));
	short s = 5;
	printf("%d\n", sizeof(s = a + 3));	//sizeofå†…éƒ¨çš„è¡¨è¾¾å¼ä¸è®¡ç®—
	printf("%d\n", s);
	return 0;
}
```

```c
#include<stdio.h>
int main()
{
	int a = 9;	  //00000000 00000000 00000000 00001001
	a |= (1 << 4);//00000000 00000000 00000000 00010000
	//00000000 00000000 00000000 00011001
	printf("%d\n", a);//25
	a &= (~(1 << 4));//11111111 11111111 11111111 11101111
	//00000000 00000000 00000000 00001001
	printf("%d\n", a);//9
	return 0;
}
```

## å…³ç³»æ“ä½œç¬¦

```c
>ã€>=ã€<ã€<=
!=      ç”¨äºæµ‹è¯•â€œä¸ç›¸ç­‰â€
==      ç”¨äºæµ‹è¯•â€œç›¸ç­‰
```

## é€»è¾‘æ“ä½œç¬¦

**é€»è¾‘ä¸`&&`ï¼Œå·¦è¾¹ä¸ºå‡å³è¾¹ä¸æ‰§è¡Œ**

**é€»è¾‘æˆ–`||`ï¼Œå·¦è¾¹ä¸ºçœŸå³è¾¹ä¸æ‰§è¡Œ**

```c
#include <stdio.h>
int main()
{
	int a = 0, b = 2, c = 3;
	int i = a++ && ++b && c++;//0 && ä¸æ‰§è¡Œ && ä¸æ‰§è¡Œ
	printf("%d %d %d\n", a, b, c);//1 2 3
	int d = 0, e = 2, f = 3;
	int j = d++ || ++e || f++;// 0 || 3 || ä¸æ‰§è¡Œ
	printf("%d %d %d\n", d, e, f);//1 3 3
	return 0;
}
```

## æ¡ä»¶æ“ä½œç¬¦

```c
exp1 ? exp2 : exp3
```

```c
//ä¸‰ä¸ªæ•°ä¸­çš„æœ€å¤§å€¼
#include<stdio.h>
int main()
{
	int a = 0, b = 10, c = -5;
	int ret = a > (b > c ? b : c) ? a : (b > c ? b : c);
	printf("%d\n", ret);
	return 0;
}
```

## é€—å·è¡¨è¾¾å¼

```c
exp1, exp2, exp3, â€¦expN
```

é€—å·è¡¨è¾¾å¼ï¼Œå°±æ˜¯ç”¨é€—å·éš”å¼€çš„å¤šä¸ªè¡¨è¾¾å¼ã€‚ é€—å·è¡¨è¾¾å¼ï¼Œ**ä»å·¦å‘å³ä¾æ¬¡æ‰§è¡Œ**ã€‚æ•´ä¸ªè¡¨è¾¾å¼çš„ç»“æœæ˜¯**æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„ç»“æœ**ã€‚

```c
//ä»£ç 1
int a = 1;
int b = 2;
int c = (a > b, a = b + 10, a, b = a + 1);//é€—å·è¡¨è¾¾å¼ï¼Œcæ˜¯13
//ä»£ç 2
if (a = b + 1, c = a / 2, d > 0)
//ä»£ç 3
a = get_val();
count_val(a);
while (a > 0)
{
    //ä¸šåŠ¡å¤„ç†
    a = get_val();
    count_val(a);
}
å¦‚æœä½¿ç”¨é€—å·è¡¨è¾¾å¼ï¼Œæ”¹å†™ï¼š
while (a = get_val(), count_val(a), a>0)
{
    //ä¸šåŠ¡å¤„ç†
}
```

## ä¸‹æ ‡å¼•ç”¨ã€å‡½æ•°è°ƒç”¨å’Œç»“æ„æˆå‘˜

## è¡¨è¾¾å¼æ±‚å€¼

### éšå¼ç±»å‹è½¬æ¢

æ•´å‹æå‡ï¼šä¸ºäº†è·å¾—è¿™ä¸ªç²¾åº¦ï¼Œè¡¨è¾¾å¼ä¸­çš„å­—ç¬¦å’ŒçŸ­æ•´å‹æ“ä½œæ•°åœ¨ä½¿ç”¨ä¹‹å‰è¢«è½¬æ¢ä¸ºæ™®é€šæ•´å‹

> é€šç”¨CPUï¼ˆgeneral-purpose CPUï¼‰æ˜¯éš¾ä»¥ç›´æ¥å®ç°ä¸¤ä¸ª8æ¯”ç‰¹å­—èŠ‚ç›´æ¥ç›¸åŠ è¿ç®—ï¼ˆè™½ç„¶æœºå™¨æŒ‡ä»¤ä¸­å¯èƒ½æœ‰è¿™ç§å­—èŠ‚ç›¸åŠ æŒ‡ä»¤ï¼‰ã€‚æ‰€ä»¥ï¼Œè¡¨è¾¾å¼ä¸­å„ç§é•¿åº¦å¯èƒ½å°äºinté•¿åº¦çš„æ•´å‹å€¼ï¼Œéƒ½å¿…é¡»å…ˆè½¬æ¢ä¸ºintæˆ–unsigned intï¼Œç„¶åæ‰èƒ½é€å…¥CPUå»æ‰§è¡Œè¿ç®—ã€‚
> 
- **æœ‰ç¬¦å·æ•°æ•´å‹æå‡æ—¶ï¼Œé«˜ä½è¡¥å……ç¬¦å·ä½**
- **æ— ç¬¦å·æ•°æ•´å‹æå‡æ—¶ï¼Œé«˜ä½è¡¥0**

```c
//è´Ÿæ•°çš„æ•´å½¢æå‡
char c1 = -1;
å˜é‡c1çš„äºŒè¿›åˆ¶ä½(è¡¥ç )ä¸­åªæœ‰8ä¸ªæ¯”ç‰¹ä½ï¼š
1111111
å› ä¸º char ä¸ºæœ‰ç¬¦å·çš„ char
æ‰€ä»¥æ•´å½¢æå‡çš„æ—¶å€™ï¼Œé«˜ä½è¡¥å……ç¬¦å·ä½ï¼Œå³ä¸º1
æå‡ä¹‹åçš„ç»“æœæ˜¯ï¼š
11111111 11111111 11111111 11111111
//æ­£æ•°çš„æ•´å½¢æå‡
char c2 = 1;
å˜é‡c2çš„äºŒè¿›åˆ¶ä½(è¡¥ç )ä¸­åªæœ‰8ä¸ªæ¯”ç‰¹ä½ï¼š
00000001
å› ä¸º char ä¸ºæœ‰ç¬¦å·çš„ char
æ‰€ä»¥æ•´å½¢æå‡çš„æ—¶å€™ï¼Œé«˜ä½è¡¥å……ç¬¦å·ä½ï¼Œå³ä¸º0
æå‡ä¹‹åçš„ç»“æœæ˜¯ï¼š
00000000 00000000 00000000 00000001
//æ— ç¬¦å·æ•´å½¢æå‡ï¼Œé«˜ä½è¡¥0
unsigned char c1 = 255;
å˜é‡c1çš„äºŒè¿›åˆ¶ä½(è¡¥ç )ä¸­åªæœ‰8ä¸ªæ¯”ç‰¹ä½ï¼š
1111111
å› ä¸ºunsigned char æ— ç¬¦å·
æ‰€ä»¥æ•´å½¢æå‡çš„æ—¶å€™ï¼Œé«˜ä½è¡¥å……0
æå‡ä¹‹åçš„ç»“æœæ˜¯ï¼š
00000000 00000000 00000000 11111111
```

```c
int main()
{
    char a = 3, b = 127;
    //00000000000000000000000000000011
    //00000000000000000000000001111111
    char c = a + b;
    //00000000000000000000000010000010
    //æˆªæ–­å­˜äºcä¸­ 10000010
    printf("%d\n", c);
    //11111111111111111111111110000010  //è¡¥ç 
    //11111111111111111111111110000001  //åç 
    //10000000000000000000000001111110  //åŸç 
    //-126
    return 0;
}

int main()
{
    char a = 0xb6;
    //10110110
    short b = 0xb600;
    //1011011000000000
    int c = 0xb6000000;
    //10110110000000000000000000000000
    if (a == 0xb6)          //11111111111111111111111110110110
        printf("a");
    if (b == 0xb600)            //11111111111111111011011000000000
        printf("b");
    if (c == 0xb6000000)        //10110110000000000000000000000000
        printf("c");    
    return 0;
}

int main()
{
    char c = 1;
    printf("%u\n", sizeof(c));      //1
    printf("%u\n", sizeof(+c));     //4 //æ•´å‹æå‡
    printf("%u\n", sizeof(-c));     //4 //æ•´å‹æå‡
    printf("%u\n", sizeof(!c));     //1
    return 0;
}
```

### ç®—æœ¯è½¬æ¢

```c
long double
double
float
unsigned long int
long int
unsigned int
int
```

å¦‚æœæŸä¸ªæ“ä½œæ•°çš„ç±»å‹åœ¨ä¸Šé¢è¿™ä¸ªåˆ—è¡¨ä¸­æ’åè¾ƒä½ï¼Œé‚£ä¹ˆç”±ä½ä½è½¬åˆ°é«˜ä½ä¸ä¼šä¸¢å¤±ç²¾åº¦ï¼Œæ­£å¸¸è½¬æ¢ï¼Œç”±é«˜ä½è½¬åˆ°ä½ä½åˆ™å¯èƒ½ä¼šä¸¢å¤±ç²¾åº¦ï¼Œè½¬æ¢ç”±é£é™©ã€‚


### æ“ä½œç¬¦çš„å±æ€§

æ“ä½œç¬¦è¡¨æ ¼



```c
//è¡¨è¾¾å¼ 1
int a, b, c, d, e, f;
a* b + c * d + e * f;
//æ³¨é‡Šï¼šä»£ç 1åœ¨è®¡ç®—çš„æ—¶å€™ï¼Œç”±äº* æ¯” + çš„ä¼˜å…ˆçº§é«˜ï¼Œåªèƒ½ä¿è¯ï¼Œ * çš„è®¡ç®—æ˜¯æ¯” + æ—©ï¼Œä½†æ˜¯ä¼˜å…ˆçº§å¹¶ä¸èƒ½å†³å®šç¬¬ä¸‰ä¸ª* æ¯”ç¬¬ä¸€ä¸ª + æ—©æ‰§è¡Œã€‚
a* b;
c* d;
a* b + c * d;
e* f;
a* b + c * d + e * f;
//æˆ–è€…ï¼š
a* b;
c* d;
e* f;
a* b + c; *d;
a* b + c * d + e * f;

//è¡¨è¾¾å¼ 2
c + --c;
//æ³¨é‡Šï¼šåŒä¸Šï¼Œæ“ä½œç¬¦çš„ä¼˜å…ˆçº§åªèƒ½å†³å®šè‡ªå‡--çš„è¿ç®—åœ¨+çš„è¿ç®—çš„å‰é¢ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰åŠæ³•å¾—çŸ¥ï¼Œ+æ“ä½œç¬¦çš„å·¦æ“ä½œæ•°çš„è·å–åœ¨å³æ“ä½œæ•°ä¹‹å‰è¿˜æ˜¯ä¹‹åæ±‚å€¼ï¼Œæ‰€ä»¥ç»“æœæ˜¯ä¸å¯é¢„æµ‹çš„ï¼Œæ˜¯æœ‰æ­§ä¹‰çš„ã€‚

//è¡¨è¾¾å¼ 3
int main()
{
    int i = 10;
    i = i-- - --i * (i = -3) * i++ + ++i;
    printf("i = %d\n", i);
    return 0;
}
//è¡¨è¾¾å¼3åœ¨ä¸åŒç¼–è¯‘å™¨ä¸­æµ‹è¯•ç»“æœä¸åŒ

//è¡¨è¾¾å¼ 4
int fun()
{
    static int count = 1;
    return ++count;
}
int main()
{
    int answer;
    answer = fun() - fun() * fun();
    printf("%d\n", answer); 
    return 0;
}
/*è™½ç„¶åœ¨å¤§å¤šæ•°çš„ç¼–è¯‘å™¨ä¸Šæ±‚å¾—ç»“æœéƒ½æ˜¯ç›¸åŒçš„ã€‚
ä½†æ˜¯ä¸Šè¿°ä»£ç  answer = fun() - fun() * fun(); ä¸­æˆ‘ä»¬åªèƒ½é€šè¿‡æ“ä½œç¬¦çš„ä¼˜å…ˆçº§å¾—çŸ¥ï¼šå…ˆç®—ä¹˜æ³•ï¼Œå†ç®—å‡æ³•ã€‚
å‡½æ•°çš„è°ƒç”¨å…ˆåé¡ºåºæ— æ³•é€šè¿‡æ“ä½œç¬¦çš„ä¼˜å…ˆçº§ç¡®å®šã€‚*/

//è¡¨è¾¾å¼ 5
int main()
{
    int i = 1;
    int ret = (++i) + (++i) + (++i);
    printf("%d\n", ret);
    printf("%d\n", i);
    return 0;
}
//è¿™æ®µä»£ç ä¸­çš„ç¬¬ä¸€ä¸ª + åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œç¬¬ä¸‰ä¸ª++æ˜¯å¦æ‰§è¡Œï¼Œè¿™ä¸ªæ˜¯ä¸ç¡®å®šçš„ï¼Œå› ä¸ºä¾é æ“ä½œç¬¦çš„ä¼˜å…ˆçº§å’Œç»“åˆæ€§æ˜¯æ— æ³•å†³å®šç¬¬ä¸€ä¸ª + å’Œç¬¬ä¸‰ä¸ªå‰ç½® ++ çš„å…ˆåé¡ºåºã€‚
```

# æŒ‡é’ˆ

## æŒ‡é’ˆæ˜¯ä»€ä¹ˆ

æŒ‡é’ˆæ˜¯ä¸ªå˜é‡ï¼Œå­˜æ”¾å†…å­˜å•å…ƒçš„åœ°å€ï¼ˆç¼–å·ï¼‰ã€‚

```c
#include <stdio.h>
int main()
{
 int a = 10;//åœ¨å†…å­˜ä¸­å¼€è¾Ÿä¸€å—ç©ºé—´
 int *p = &a;//è¿™é‡Œæˆ‘ä»¬å¯¹å˜é‡aï¼Œå–å‡ºå®ƒçš„åœ°å€ï¼Œå¯ä»¥ä½¿ç”¨&æ“ä½œç¬¦ã€‚
 //å°†açš„åœ°å€å­˜æ”¾åœ¨på˜é‡ä¸­ï¼Œpå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡ã€‚
 return 0;
}
```

- æŒ‡é’ˆå˜é‡æ˜¯ç”¨æ¥å­˜æ”¾åœ°å€çš„ï¼Œåœ°å€æ˜¯å”¯ä¸€æ ‡ç¤ºä¸€å—åœ°å€ç©ºé—´çš„ã€‚
- **æŒ‡é’ˆçš„å¤§å°åœ¨32ä½å¹³å°æ˜¯4ä¸ªå­—èŠ‚ï¼Œåœ¨64ä½å¹³å°æ˜¯8ä¸ªå­—èŠ‚ã€‚**

## æŒ‡é’ˆå’ŒæŒ‡é’ˆç±»å‹

- **æŒ‡é’ˆç±»å‹å†³å®šæŒ‡é’ˆè¿›è¡Œè§£å¼•ç”¨æ“ä½œæ—¶èƒ½å¤Ÿè®¿é—®ç©ºé—´çš„å¤§å°**

```c
int* p;	        *pèƒ½å¤Ÿè®¿é—®4ä¸ªå­—èŠ‚
char* p;	    *pèƒ½å¤Ÿè®¿é—®1ä¸ªå­—èŠ‚
double* p;	    *pèƒ½å¤Ÿè®¿é—®8ä¸ªå­—èŠ‚
```

```c
int a = 0x11223344;
//0x000000389D0FF854  44 33 22 11 ....
int* pa = &a;
*pa = 0;
//0x000000389D0FF854  00 00 00 00 ....

int a = 0x11223344;
//0x000000389D0FF854  44 33 22 11 ....
char* pa = &a;
*pa = 0;
//0x000000389D0FF854  00 33 22 11 ....
```

- **æŒ‡é’ˆçš„ç±»å‹å†³å®šäº†æŒ‡é’ˆçš„æ­¥é•¿**

```c
int a = 0x11223344;
int* pa = &a;
char* pc = &a;
printf("%p\n", pa); 		//000000FE018FFAF4
printf("%p\n", pa+1);		//000000FE018FFAF8
printf("%p\n", pc);			//000000FE018FFAF4
printf("%p\n", pc+1);		//000000FE018FFAF5
return 0;
```

## é‡æŒ‡é’ˆ

- **é‡æŒ‡é’ˆæˆå› **

â€‹	1. æŒ‡é’ˆæœªåˆå§‹åŒ–

```c
int* p;		//å±€éƒ¨å˜é‡æŒ‡é’ˆæœªåˆå§‹åŒ–ï¼Œé»˜è®¤ä¸ºéšæœºå€¼
*p = 20;
```

â€‹	2. æŒ‡é’ˆè¶Šç•Œè®¿é—®

```c
int arr[10] = { 0 };
int* p = arr;
int i = 0;
for (i = 0; i <= 11; i++)
{
    //å½“æŒ‡é’ˆæŒ‡å‘çš„èŒƒå›´è¶…å‡ºæ•°ç»„arrçš„èŒƒå›´æ—¶ï¼Œpå°±æ˜¯é‡æŒ‡é’ˆ
    *(p++) = i;
}
```

â€‹	3. æŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´é‡Šæ”¾

```c
int* test()
{
    int a = 1;
    return &a;
}
int main()
{
    int* p = test();
    *p = 20;		
    return 0;
}
```

- **è§„é¿é‡æŒ‡é’ˆ**
  1. æŒ‡é’ˆåˆå§‹åŒ–
  2. å°å¿ƒæŒ‡é’ˆè¶Šç•Œ
  3. æŒ‡é’ˆæŒ‡å‘ç©ºé—´é‡Šæ”¾å³ä½¿ç½®NULL
  4. é¿å…è¿”å›å±€éƒ¨å˜é‡çš„åœ°å€
  5. æŒ‡é’ˆä½¿ç”¨ä¹‹å‰æ£€æŸ¥æœ‰æ•ˆæ€§

## æŒ‡é’ˆè¿ç®—

- **æŒ‡é’ˆ +- æ•´æ•°**

```c
#define N_VALUES 5
int main()
{
	float values[N_VALUES];
	float* vp;
	//æŒ‡é’ˆ+-æ•´æ•°ï¼›æŒ‡é’ˆçš„å…³ç³»è¿ç®—
	for (vp = &values[0]; vp < &values[N_VALUES];)
	{
		printf("%p\n", vp);
		*vp++ = 0;			//**å…ˆ*vp = 0 ï¼Œå vp++**
		printf("%d\n", *(vp-1));
	}
	return 0;
}
```

- **æŒ‡é’ˆ - æŒ‡é’ˆ**ï¼šå¾—åˆ°çš„æ˜¯ä¸¤ä¸ªæŒ‡é’ˆä¹‹é—´çš„å…ƒç´ ä¸ªæ•°

```c
int main()
{
	int arr[10] = { 1,2,3,4,5,6,7,8,9,10 };
	for (int i = 0; i < 10; i++)
	{
		printf("%p\n", &arr[i]);
		printf("%d\n", &arr[i] - &arr[0]);		//ç›¸å‡å¾—åˆ°æŒ‡é’ˆé—´å…ƒç´ ä¸ªæ•°
	}
	return 0;
}
```

```c
//æ±‚å­—ç¬¦ä¸²é•¿åº¦
int my_strlen(char* str)			
{
	char* start = str;
	char* end = str;
	while (*end++ != '\0');
	return end - start - 1;		//æœ«åœ°å€é—´é¦–åœ°å€
}
int main()
{
	char arr[] = "bit";
	int len = my_strlen(arr);
	printf("%d\n", len);		//3
	return 0;
}
```

- **æŒ‡é’ˆçš„å…³ç³»è¿ç®—**
  **æ ‡å‡†è§„å®šï¼š**å…è®¸æŒ‡å‘æ•°ç»„å…ƒç´ çš„æŒ‡é’ˆä¸**æŒ‡å‘æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ åé¢çš„é‚£ä¸ªå†…å­˜ä½ç½®**çš„æŒ‡é’ˆæ¯”è¾ƒï¼Œä½†æ˜¯**ä¸å…è®¸ä¸æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å‰çš„é‚£ä¸ªå†…å­˜ä½ç½®**çš„æŒ‡é’ˆè¿›è¡Œæ¯”è¾ƒã€‚

```c
#define N_VALUES 5
int main()
{
	float values[N_VALUES];
	float* vp;
	//æ­£ç¡®ï¼Œvpæœ€åæŒ‡å‘&values[0]
	for (vp = &values[N_VALUES]; vp > &values[0];)
	{
		*--vp = 0;
	}
	//é”™è¯¯,vpæœ€åæŒ‡å‘&values[-1]
	for (vp = &values[N_VALUES]; vp >= &values[0];vp--)
	{
		*vp = 0;
	}
	return 0;
}

```

## æŒ‡é’ˆå’Œæ•°ç»„

```c
#include<stdio.h>
int main()
{
	int arr[10] = { 0 };
	int* p = arr;
	int sz = sizeof(arr) / sizeof(arr[0]);
	int i = 0;
	for (i = 0; i < sz; i++)
		*(p + i) = i + 1;
	for (i = 0; i < sz; i++)
	{
        //å¤šç§è®¿é—®æ•°ç»„å…ƒç´ çš„æ–¹å¼
		printf("%d ", *(p + i));
		printf("%d ", p[i]);
		printf("%d ", arr[i]);
		printf("%d ", i[arr]);
		printf("%d ", *(arr + i));
		printf("%d ", *(i + arr));
	}
	return 0;
}
```

## äºŒçº§æŒ‡é’ˆ

```c
#include<stdio.h>
int main()
{
	int a = 10;
	int* pa = &a;
	int** ppa = &pa;		//å‰ * ä»£è¡¨ppaæŒ‡å‘çš„å¯¹è±¡çš„ç±»å‹æ˜¯æŒ‡é’ˆï¼Œå * ä»£è¡¨ppaæ˜¯æŒ‡é’ˆ
	printf("a = %d\t\t&a = %p\n", a, &a);
	printf("*pa = %d\tpa = %p\t\t&pa = %p\n", *pa, pa, &pa);
	printf("**ppa = %d\t*ppa = %p\t\tppa = %p\n", **ppa, *ppa, ppa);
	return 0;
}

//**ppa = *pa = a = 10
//*ppa = pa = &a = 0000007B2352F9A4
//ppa = &pa = 0000007B2352F9C8
```

## æŒ‡é’ˆæ•°ç»„

æŒ‡é’ˆæ•°ç»„æ˜¯æ•°ç»„ï¼Œæ˜¯å­˜æ”¾æŒ‡é’ˆçš„æ•°ç»„ã€‚

```c
#include<stdio.h>
int main()
{
	int a = 10, b = 20, c = 30;
	int* arr[3] = { &a,&b,&c };
	for (int i = 0; i < 3; i++)
	{
		printf("%d\t", *(arr[i]));	//10	20		30
	}
	return 0;
}

//ä¸€ç»´æ•°ç»„æ¨¡æ‹ŸäºŒç»´æ•°ç»„
#include<stdio.h>
int main()
{
	int a[] = { 1,2,3,4 };
	int b[] = { 2,3,4,5 };
	int c[] = { 3,4,5,6 };
	int* arr[3] = { a,b,c };
	int i, j;
	for (i = 0; i < 3; i++)
		for (j = 0; j < 4; j++)
			printf("%d ", arr[i][j]);
	return 0;
}
```

# å®ç”¨è°ƒè¯•æŠ€å·§

## è°ƒè¯•

è°ƒè¯•ï¼ˆdebugï¼‰æ˜¯å‘ç°å’Œå‡å°‘è®¡ç®—æœºç¨‹åºæˆ–ç”µå­ä»ªå™¨è®¾å¤‡ä¸­ç¨‹åºé”™è¯¯çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚

Debug â€“ è°ƒè¯•ç‰ˆæœ¬ â€“ å®ƒåŒ…å«è°ƒè¯•ä¿¡æ¯ï¼Œå¹¶ä¸”ä¸ä½œä»»ä½•ä¼˜åŒ–ï¼Œä¾¿äºç¨‹åºå‘˜è°ƒè¯•ç¨‹åºã€‚
Release â€“ å‘å¸ƒç‰ˆæœ¬ â€“ å®ƒå¾€å¾€æ˜¯è¿›è¡Œäº†å„ç§ä¼˜åŒ–ï¼Œä½¿å¾—ç¨‹åºåœ¨ä»£ç å¤§å°å’Œè¿è¡Œé€Ÿåº¦ä¸Šéƒ½æ˜¯æœ€ä¼˜çš„ï¼Œä»¥ä¾¿ç”¨æˆ·å¾ˆå¥½åœ°ä½¿ç”¨ã€‚

## windowsç¯å¢ƒè°ƒè¯•

- è°ƒè¯•ç¯å¢ƒçš„å‡†å¤‡

![image-20240520185141923](https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239391.png)

Debugç¯å¢ƒæ‰èƒ½è°ƒè¯•ä»£ç 

- VSå¿«æ·é”®

  F5ï¼šå¯åŠ¨è°ƒè¯•ï¼Œç»å¸¸ç”¨æ¥ç›´æ¥è°ƒåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹å¤„ã€‚ 

  F9ï¼šåˆ›å»ºæ–­ç‚¹å’Œå–æ¶ˆæ–­ç‚¹ æ–­ç‚¹çš„é‡è¦ä½œç”¨ï¼Œå¯ä»¥åœ¨ç¨‹åºçš„ä»»æ„ä½ç½®è®¾ç½®æ–­ç‚¹ã€‚è¿™æ ·å°±å¯ä»¥ä½¿å¾—ç¨‹åºåœ¨ æƒ³è¦çš„ä½ç½®éšæ„åœæ­¢æ‰§è¡Œï¼Œç»§è€Œä¸€æ­¥æ­¥æ‰§è¡Œä¸‹å»ã€‚ 

  F10ï¼šé€è¿‡ç¨‹ï¼Œé€šå¸¸ç”¨æ¥å¤„ç†ä¸€ä¸ªè¿‡ç¨‹ï¼Œä¸€ä¸ªè¿‡ç¨‹å¯ä»¥æ˜¯ä¸€æ¬¡å‡½æ•°è°ƒç”¨ï¼Œæˆ–è€…æ˜¯ä¸€æ¡è¯­å¥ã€‚ 

  F11ï¼šé€è¯­å¥ï¼Œå°±æ˜¯æ¯æ¬¡éƒ½æ‰§è¡Œä¸€æ¡è¯­å¥ï¼Œä½†æ˜¯è¿™ä¸ªå¿«æ·é”®å¯ä»¥ä½¿æˆ‘ä»¬çš„æ‰§è¡Œé€»è¾‘è¿›å…¥å‡½æ•°å†…éƒ¨ï¼ˆè¿™æ˜¯ æœ€é•¿ç”¨çš„ï¼‰ã€‚ 

  CTRL + F5ï¼šå¼€å§‹æ‰§è¡Œä¸è°ƒè¯•ï¼Œå¦‚æœä½ æƒ³è®©ç¨‹åºç›´æ¥è¿è¡Œèµ·æ¥è€Œä¸è°ƒè¯•å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚

- è°ƒè¯•çš„æ—¶å€™æŸ¥çœ‹ç¨‹åºå½“å‰ä¿¡æ¯

  1. **æŸ¥çœ‹ä¸´æ—¶å˜é‡**

     ![image-20240520190902727](https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239392.png)

  2. **æŸ¥çœ‹å†…å­˜ä¿¡æ¯**

     ![image-20240520191202267](https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239393.png)

  3. **æŸ¥çœ‹è°ƒç”¨å †æ ˆ**

     ![image-20240520191429380](https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239394.png)

  4. **æŸ¥çœ‹æ±‡ç¼–**

     æ–¹æ³•1ï¼š

     <img src="https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239395.png" alt="image-20240520191539972" style="zoom: 50%;" />

     æ–¹æ³•2ï¼š

     ![image-20240520191630557](https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239396.png)

  5. **æŸ¥çœ‹å¯„å­˜å™¨**
     ![image-20240520191724339](https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239397.png)

## è°ƒè¯•å®ä¾‹

```c
int main()
{
	int i = 0;									//i å…ˆåˆ›å»ºå…ˆä½¿ç”¨é«˜åœ°å€
	int arr[10] = { 1,2,3,4,5,6,7,8,9,10 };		//arr ååˆ›å»ºä½¿ç”¨ä½åœ°å€
	for (i = 0; i <= 12; i++)					//i ä¸ arr[12] åŒåœ°å€ (VSç¼–è¯‘å™¨ç‰¹æ€§)
	{
		printf("hehe\n");
		arr[i] = 0;
	}
	return 0;
}
```

![image-20240520192113656](https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239398.png)

## ä¼˜ç§€ä»£ç çš„ç¤ºä¾‹

```c
#include<stdio.h>
#include<assert.h>
char* my_strcpy(char* dest, const char* src)
{
	char* ret = dest;
	assert(dest && src);			//ç›®æ ‡å­—ç¬¦ä¸²å’Œæºå­—ç¬¦ä¸²çš„å‡½æ•°éƒ½ä¸èƒ½æ˜¯æŒ‡å‘ç©ºæŒ‡é’ˆ
	while (*dest++ = *src++);		//å°†æºå­—ç¬¦ä¸²æ‹·è´åˆ°ç›®æ ‡å­—ç¬¦ä¸²ï¼ŒåŒ…å«'\0'
	return ret;
}
int my_strlen(const char* str)
{
	assert(str);
	char* start = str;
	char* end = str;
	while (*end++);				//end æŒ‡å‘'\0'çš„åœ°å€
	end--;					//end æŒ‡å‘'\0å‰ä¸€ä½çš„åœ°å€
	return end - start;			//æŒ‡é’ˆç›¸å‡ä¸ºä¸¤æŒ‡é’ˆä¸­é—´çš„æ•°ç»„å…ƒç´ 
}
int main()
{
	char arr1[] = "########";		
	char arr2[] = "bittttt";		//ç›®æ ‡æ•°ç»„é•¿åº¦è¦å¤§äºæºæ•°ç»„ï¼Œå¦åˆ™ä¼šç¼“å†²æº¢å‡º
	printf("%s\n", my_strcpy(arr1, arr2));
	printf("%d\n", my_strlen(arr2));
	return 0;
}
```

- **`assert`ä¸­çš„è¡¨è¾¾å¼ç»“æœä¸ºå‡å°±æŠ¥é”™ï¼Œç»“æœä¸ºçœŸå°±ç»§ç»­æ‰§è¡Œ**

  ```c
  void assert ( è¡¨è¾¾å¼ );
  ```

- **`const`ä¿®é¥°æŒ‡é’ˆçš„ä½œç”¨**

```c
int main()				//constä¿®é¥°æŒ‡é’ˆçš„ä½œç”¨
{
	int n1 = 10;
	int n2 = 20;
	const int* p = &n1;	
	*p = 20;		//err
	p = &n2;		//ok
	//å¯ä»¥ä¿®æ”¹åœ°å€ï¼Œä¸èƒ½ä¿®æ”¹å€¼
	int m1 = 100;
	int m2 = 200;
	int* const q = &m1;
	*q = 200;		//ok
	q = &m2;		//err
	//å¯ä»¥ä¿®æ”¹å€¼ï¼Œä¸èƒ½ä¿®æ”¹åœ°å€
	return 0;
}
```

1. `const`å¦‚æœæ”¾åœ¨`*`çš„å·¦è¾¹ï¼Œä¿®é¥°çš„æ˜¯æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ï¼Œä¿è¯æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ä¸èƒ½é€šè¿‡æŒ‡é’ˆæ¥æ”¹å˜ï¼Œä½†æ˜¯æŒ‡é’ˆå˜é‡æœ¬èº«çš„å†…å®¹å¯å˜ã€‚
2. `const`å¦‚æœæ”¾åœ¨`*`çš„å³è¾¹ï¼Œä¿®é¥°çš„æ˜¯æŒ‡é’ˆå˜é‡æœ¬èº«ï¼Œä¿è¯äº†æŒ‡é’ˆå˜é‡çš„å†…å®¹ä¸èƒ½ä¿®æ”¹ï¼Œä½†æ˜¯æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ï¼Œå¯ä»¥é€šè¿‡æŒ‡é’ˆæ”¹å˜ã€‚

# æ•°æ®çš„å­˜å‚¨

## æ•°æ®ç±»å‹

```c
æ•´å‹
char        //å­—ç¬¦æ•°æ®ç±»å‹
	unsigned char\signed char
short       //çŸ­æ•´å‹
	unsigned short [int]\signed short [int]
int         //æ•´å½¢
	unsigned int\signed int
long        //é•¿æ•´å‹
	unsigned long [int]\signed long [int]
long long   //æ›´é•¿çš„æ•´å½¢
	unsigned long long [int]\signed long long [int]
æµ®ç‚¹æ•°
float       //å•ç²¾åº¦æµ®ç‚¹æ•°
double      //åŒç²¾åº¦æµ®ç‚¹æ•°
æ„é€ ç±»å‹
> æ•°ç»„ç±»å‹
> ç»“æ„ä½“ç±»å‹ struct
> æšä¸¾ç±»å‹ enum
> è”åˆç±»å‹ union
æŒ‡é’ˆç±»å‹
ç©ºç±»å‹ void
```

## æ•´å‹åœ¨å†…å­˜ä¸­çš„å­˜å‚¨

### åŸç åç è¡¥ç 

1. æ— ç¬¦å·æ•°çš„åŸã€åã€è¡¥ç ç›¸åŒ

2. æœ‰ç¬¦å·æ•°çš„æ­£æ•´æ•°çš„åŸã€åã€è¡¥ç ç›¸åŒ

3. æœ‰ç¬¦å·æ•°çš„è´Ÿæ•´æ•°çš„åŸã€åã€è¡¥ç æ ¹æ®ä»¥ä¸‹è§„åˆ™ï¼š
   åŸç ï¼šç›´æ¥å°†äºŒè¿›åˆ¶æŒ‰ç…§æ­£è´Ÿæ•°çš„å½¢å¼ç¿»è¯‘æˆäºŒè¿›åˆ¶å°±å¯ä»¥
   åç ï¼šå°†åŸç çš„ç¬¦å·ä½ä¸å˜ï¼Œå…¶ä»–ä½ä¾æ¬¡æŒ‰ä½å–åå°±å¯ä»¥å¾—åˆ°äº†
   è¡¥ç ï¼šåç +1å°±å¾—åˆ°è¡¥ç 

### å¤§ç«¯å°ç«¯

å¤§ç«¯ï¼ˆå­˜å‚¨ï¼‰æ¨¡å¼ï¼Œæ˜¯æŒ‡æ•°æ®çš„ä½ä½ä¿å­˜åœ¨å†…å­˜çš„é«˜åœ°å€ä¸­ï¼Œè€Œæ•°æ®çš„é«˜ä½ä¿å­˜åœ¨å†…å­˜çš„ä½åœ°å€ä¸­

å°ç«¯ï¼ˆå­˜å‚¨ï¼‰æ¨¡å¼ï¼Œæ˜¯æŒ‡æ•°æ®çš„ä½ä½ä¿å­˜åœ¨å†…å­˜çš„ä½åœ°å€ä¸­ï¼Œè€Œæ•°æ®çš„é«˜ä½,ä¿å­˜åœ¨å†…å­˜çš„é«˜åœ°å€ä¸­ã€‚å¸¸ç”¨å°ç«¯æ¨¡å¼

```c
#include<stdio.h>
int main() {
	int i = 1;
	char* p = (char*)&i;
	if (*p == 1)
		printf("å°ç«¯\n");
	else
		printf("å¤§ç«¯\n");
	return 0;
}
```

### ç»ƒä¹ 

```c
int main()
{
    char a = -1;            
    //10000000 00000000 00000000 00000001
    //11111111 11111111 11111111 11111110
    //11111111 11111111 11111111 11111111
    //11111111
    //æ•´å‹æå‡
    //11111111 11111111 11111111 11111111
    signed char b = -1;     //åŒä¸Š
    unsigned char c = -1;   //11111111
    //æ•´å‹æå‡
    //00000000 00000000 00000000 11111111
    printf("a = %d\nb = %d\nc = %d", a, b, c);
    //-1 -1 255
    return 0;
}

int main()
{
    char a = -128;
    //10000000 00000000 00000000 10000000
    //11111111 11111111 11111111 01111111
    //11111111 11111111 11111111 10000000
    //10000000
    //æœ‰ç¬¦å·æ•°æ•´å‹æå‡
    //11111111 11111111 11111111 10000000
    printf("%u\n", a);
    char b = 128;
    //00000000 00000000 00000000 10000000
    //01111111 11111111 11111111 01111111
    //01111111 11111111 11111111 10000000
    //10000000
    //æœ‰ç¬¦å·æ•°æ•´å‹æå‡
    //11111111 11111111 11111111 10000000
    printf("%u\n", b);
    //æœ‰ç¬¦å·çš„charç±»å‹æ•°å€¼èŒƒå›´æ—¶-128~127ï¼Œå½“127+1æ—¶128ç­‰äº-128ï¼Œå¾ªç¯å¾€å¤
    return 0;
}

int main()
{
    int i = -20;
    //10000000000000000000000000010100
    //11111111111111111111111111101011
    //11111111111111111111111111101100
    unsigned int j = 10;
    //00000000000000000000000000001010
    printf("%d\n", i + j);
    //11111111111111111111111111110110
    //11111111111111111111111111110101
    //10000000000000000000000000001010
    return 0;
}

int main()
{
		unsigned int i;
		for (i = 9; i >= 0; i--)//iä¸ºæ— ç¬¦å·æ•´å‹ï¼Œå½“i=0æ—¶å†è‡ªå‡ä¼šå˜ä¸º2^32-1ï¼Œä»è€Œæ­»å¾ªç¯
		    printf("%u\n", i);
		return 0;
}

int main()
{
    char a[1000];
    int i;
    for (i = 0; i < 1000; i++)
    {
        a[i] = -1 - i;
    }
    printf("%d", strlen(a));//255
    return 0;
}

unsigned char i = 0;
int main()
{
    for (i = 0; i <= 255; i++)//iä¸ºæ— ç¬¦å·å­—ç¬¦å‹ï¼Œå½“i=255æ—¶å†è‡ªå¢ä¼šå˜ä¸º0ï¼Œä»è€Œæ­»å¾ªç¯
        printf("hello world\n");
    return 0;
}
```

## æµ®ç‚¹æ•°åœ¨å†…å­˜ä¸­çš„å­˜å‚¨

æ ¹æ®å›½é™…æ ‡å‡†IEEE754ï¼Œä»»æ„ä¸€ä¸ªäºŒè¿›åˆ¶æµ®ç‚¹æ•°Vå¯ä»¥è¡¨ç¤ºæˆä¸‹é¢çš„å½¢å¼ï¼š

- (-1)^S * M * 2^E
- (-1)^Sè¡¨ç¤ºç¬¦å·ä½ï¼Œå½“S=0ï¼ŒVä¸ºæ­£æ•°ï¼›å½“S=1ï¼ŒVä¸ºè´Ÿæ•°ã€‚
- Mè¡¨ç¤ºæœ‰æ•ˆæ•°å­—ï¼Œå¤§äºç­‰äº1ï¼Œå°äº2ã€‚
- 2^Eè¡¨ç¤ºæŒ‡æ•°ä½ã€‚

å¦‚ï¼šåè¿›åˆ¶çš„5.0ï¼Œå†™æˆäºŒè¿›åˆ¶æ˜¯ 101.0 ï¼Œç›¸å½“äº 1.01Ã—2^2 ã€‚ é‚£ä¹ˆï¼ŒæŒ‰ç…§ä¸Šé¢Vçš„æ ¼å¼ï¼Œå¯ä»¥å¾—å‡ºS=0ï¼ŒM=1.01ï¼ŒE=2ã€‚

å¯¹äº32ä½çš„æµ®ç‚¹æ•°ï¼ˆå•ç²¾åº¦æµ®ç‚¹æ•°floatï¼‰ï¼Œæœ€é«˜çš„1ä½æ˜¯ç¬¦å·ä½Sï¼Œæ¥ç€çš„8ä½æ˜¯æŒ‡æ•°Eï¼Œå‰©ä¸‹çš„23ä½ä¸ºæœ‰æ•ˆæ•°å­—Mã€‚

å¯¹äº64ä½çš„æµ®ç‚¹æ•°ï¼ˆåŒç²¾åº¦æµ®ç‚¹æ•°doubleï¼‰ï¼Œæœ€é«˜çš„1ä½æ˜¯ç¬¦å·ä½Sï¼Œæ¥ç€çš„11ä½æ˜¯æŒ‡æ•°Eï¼Œå‰©ä¸‹çš„52ä½ä¸ºæœ‰æ•ˆæ•°å­—Mã€‚

```c
int main()
{
    int n = 9;
    float* pfloat = &n;
    printf("%d\n", n);
    //00000000 00000000 00000000 00001001
    printf("%f\n", *pfloat);
		//0 00000000 00000000000000000001001
		//S = 0
		//Eå…¨ä¸º0,ä¸º1-127=-126
		//M = 1. 00000000000000000001001 , ç”±äºEå…¨ä¸º0 , Mçœç•¥ç¬¬ä¸€ä½çš„1
    //(-1)^0*0.00000000000000000001001*2^(-126) - æ— é™æ¥è¿‘äº0çš„æ•°å­—
    *pfloat = 9.0;
    //1001.0
		//(-1)^0*1.001*2^3
		//S = 0
		//E = 3 , å­˜å…¥å†…å­˜æ—¶3+127 = 1000 0010
		//M = 1.001 , , å­˜å…¥å†…å­˜æ—¶0010 0000 0000 0000 0000 000
		//0 10000010 00100000000000000000000
    printf("%d\n", n);
    //1091567616
    printf("%f\n", *pfloat);
    //9.000000
    return 0;
}
```

- **æœ‰æ•ˆæ•°å­—Mçš„ç‰¹åˆ«è§„å®šï¼š**

Må¯ä»¥å†™æˆ 1.xxxxxx çš„å½¢å¼ï¼Œï¼Œ**é»˜è®¤è¿™ä¸ªæ•°çš„ç¬¬ä¸€ä½æ€»æ˜¯1ï¼Œå› æ­¤å¯ä»¥è¢«èˆå»ï¼Œåªä¿å­˜åé¢çš„ xxxxxxéƒ¨åˆ†ã€‚**

- **æŒ‡æ•°Eçš„ç‰¹åˆ«è§„å®šï¼š**

**å­˜å…¥å†…å­˜æ—¶Eçš„çœŸå®å€¼å¿…é¡»å†åŠ ä¸Šä¸€ä¸ªä¸­é—´æ•°ï¼Œå¯¹äº8ä½çš„Eï¼Œè¿™ä¸ªä¸­é—´æ•°æ˜¯127ï¼›å¯¹äº11ä½çš„Eï¼Œè¿™ä¸ªä¸­é—´æ•°æ˜¯1023ã€‚**æ¯”å¦‚ï¼Œ2^10çš„Eæ˜¯10ï¼Œæ‰€ä»¥ä¿å­˜æˆ32ä½æµ®ç‚¹æ•°æ—¶ï¼Œå¿…é¡»ä¿å­˜æˆ10+127=137ï¼Œå³10001001ã€‚

- **æŒ‡æ•°Eä»å†…å­˜ä¸­å–å‡ºè¿˜å¯ä»¥å†åˆ†æˆä¸‰ç§æƒ…å†µï¼š**
    - Eä¸å…¨ä¸º0æˆ–ä¸å…¨ä¸º1
    
    æµ®ç‚¹æ•°å°±é‡‡ç”¨ä¸‹é¢çš„è§„åˆ™è¡¨ç¤ºï¼Œå³æŒ‡æ•°Eçš„è®¡ç®—å€¼å‡å»127ï¼ˆæˆ–1023ï¼‰ï¼Œå¾—åˆ°çœŸå®å€¼ï¼Œå†å°†æœ‰æ•ˆæ•°å­—Må‰åŠ ä¸Šç¬¬ä¸€ä½çš„1ã€‚
    
    - Eå…¨ä¸º0
    
    æµ®ç‚¹æ•°çš„æŒ‡æ•°Eç­‰äº1-127ï¼ˆæˆ–è€…1-1023ï¼‰å³ä¸ºçœŸå®å€¼ï¼Œ æœ‰æ•ˆæ•°å­—Mä¸å†åŠ ä¸Šç¬¬ä¸€ä½çš„1ï¼Œè€Œæ˜¯è¿˜åŸä¸º0.xxxxxxçš„å°æ•°ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†è¡¨ç¤ºÂ±0ï¼Œä»¥åŠæ¥è¿‘äº 0çš„å¾ˆå°çš„æ•°å­—ã€‚
    
    - Eå…¨ä¸º1
    
    å¦‚æœæœ‰æ•ˆæ•°å­—Må…¨ä¸º0ï¼Œè¡¨ç¤ºÂ±æ— ç©·å¤§ï¼ˆæ­£è´Ÿå–å†³äºç¬¦å·ä½sï¼‰ï¼›
    

## ä½œä¸š

çŒœåæ¬¡ï¼š

5ä½è¿åŠ¨å‘˜å‚åŠ äº†10ç±³å°è·³æ°´æ¯”èµ›ï¼Œæœ‰äººè®©ä»–ä»¬é¢„æµ‹æ¯”èµ›ç»“æœï¼š

Aé€‰æ‰‹è¯´ï¼šBç¬¬äºŒï¼Œæˆ‘ç¬¬ä¸‰ï¼›

Bé€‰æ‰‹è¯´ï¼šæˆ‘ç¬¬äºŒï¼ŒEç¬¬å››ï¼›

Cé€‰æ‰‹è¯´ï¼šæˆ‘ç¬¬ä¸€ï¼ŒDç¬¬äºŒï¼›

Dé€‰æ‰‹è¯´ï¼šCæœ€åï¼Œæˆ‘ç¬¬ä¸‰ï¼›

Eé€‰æ‰‹è¯´ï¼šæˆ‘ç¬¬å››ï¼ŒAç¬¬ä¸€ï¼›

æ¯”èµ›ç»“æŸåï¼Œæ¯ä½é€‰æ‰‹éƒ½è¯´å¯¹äº†ä¸€åŠï¼Œè¯·ç¼–ç¨‹ç¡®å®šæ¯”èµ›çš„åæ¬¡ã€‚

```c
#include<stdio.h>
int main()
{
	int a = 0, b = 0, c = 0, d = 0, e = 0;
	for (a = 1; a <= 5; a++)
		for (b = 1; b <= 5; b++)
			for (c = 1; c <= 5; c++)
				for (d = 1; d <= 5; d++)
					for (e = 1; e <= 5; e++)
						if ((b == 2) + (a == 3) == 1 &&
							(b == 2) + (e == 4) == 1 &&
							(c == 1) + (d == 2) == 1 &&
							(c == 5) + (d == 3) == 1 &&
							(e == 4) + (a == 1) == 1 &&
							a * b * c * d * e == 120)
							printf("a=%d,b=%d,c=%d,d=%d,e=%d\n", a, b, c, d, e);
	return 0;
}
```

çŒœå‡¶æ‰‹ï¼š

æ—¥æœ¬æŸåœ°å‘ç”Ÿäº†ä¸€ä»¶è°‹æ€æ¡ˆï¼Œè­¦å¯Ÿé€šè¿‡æ’æŸ¥ç¡®å®šæ€äººå‡¶æ‰‹å¿…ä¸º4ä¸ªå«Œç–‘çŠ¯çš„ä¸€ä¸ªã€‚

ä»¥ä¸‹ä¸º4ä¸ªå«Œç–‘çŠ¯çš„ä¾›è¯:

Aè¯´ï¼šä¸æ˜¯æˆ‘ã€‚

Bè¯´ï¼šæ˜¯Cã€‚

Cè¯´ï¼šæ˜¯Dã€‚

Dè¯´ï¼šCåœ¨èƒ¡è¯´

å·²çŸ¥3ä¸ªäººè¯´äº†çœŸè¯ï¼Œ1ä¸ªäººè¯´çš„æ˜¯å‡è¯ã€‚

ç°åœ¨è¯·æ ¹æ®è¿™äº›ä¿¡æ¯ï¼Œå†™ä¸€ä¸ªç¨‹åºæ¥ç¡®å®šåˆ°åº•è°æ˜¯å‡¶æ‰‹ã€‚

```c
#include<stdio.h>
int main() {
	char killer = 0;
	for (killer = 'a'; killer <= 'd'; killer++)
		if ((killer != 'a') + (killer == 'c') + (killer == 'd') + (killer != 'd') == 3)
			printf("%c\n", killer);
	return 0;
}
```

æ¨è¾‰ä¸‰è§’

```c
#include<stdio.h>
int main() {
	int arr[10][10] = { 0 };
	int i = 0, j = 0;
	int n = 0;
	scanf("%d", &n);
	for(i=0;i<n;i++)
		for (j = 0; j <= i; j++) {
			if (j == 0 || j == i)
				arr[i][j] = 1;
			else
				arr[i][j] = arr[i - 1][j - 1] + arr[i - 1][j];
		}
	for (i = 0; i < n; i++) {
		for (j = 0; j <= i; j++)
			printf("%d\t", arr[i][j]);
		printf("\n");
	}
	return 0;
}
```

# æŒ‡é’ˆçš„è¿›é˜¶

## å­—ç¬¦æŒ‡é’ˆ

```c
#include <stdio.h>
int main()
{
    char str1[] = "hello bit.";
    char str2[] = "hello bit.";
    const char* str3 = "hello bit.";
    const char* str4 = "hello bit.";
    if (str1 == str2)
        printf("str1 and str2 are same\n");
    else
        printf("str1 and str2 are not same\n");
	//str1 and str2 are not same
    if (str3 == str4)
        printf("str3 and str4 are same\n");
    else
        printf("str3 and str4 are not same\n");
	//str3 and str4 are same
    return 0;
}
```

 `char* pstr = "hello bit.";` æœ¬è´¨æ˜¯æŠŠå¸¸é‡å­—ç¬¦ä¸² `hello bit.` çš„é¦–å­—ç¬¦çš„åœ°å€æ”¾åˆ°äº†`pstr`ä¸­ã€‚

## æŒ‡é’ˆæ•°ç»„

```c
int* arr1[10]; //æ•´å½¢æŒ‡é’ˆçš„æ•°ç»„
char *arr2[4]; //ä¸€çº§å­—ç¬¦æŒ‡é’ˆçš„æ•°ç»„
char **arr3[5];//äºŒçº§å­—ç¬¦æŒ‡é’ˆçš„æ•°ç»„
```

## æ•°ç»„æŒ‡é’ˆ

æ•°ç»„æŒ‡é’ˆæ˜¯èƒ½å¤ŸæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆ

```c
#include <stdio.h>
int main()
{
    int arr[10] = { 1,2,3,4,5,6,7,8,9,0 };
    int(*p)[10] = &arr;//æŠŠæ•°ç»„arrçš„åœ°å€èµ‹å€¼ç»™æ•°ç»„æŒ‡é’ˆå˜é‡p
    for (int i = 0; i < 10; i++)
        printf("%d ", (*p)[i]);
    return 0;
}
```

```c
#include <stdio.h>
void print_arr1(int arr[3][5], int row, int col)
{
    int i = 0;
    for (i = 0; i < row; i++)
    {
        int j = 0;
        for (j = 0; j < col; j++)
            printf("%d ", arr[i][j]);
        printf("\n");
    }
}
void print_arr2(int(*arr)[5], int row, int col)
{
    int i = 0;
    for (i = 0; i < row; i++)
    {
        int j = 0;
        for (j = 0; j < col; j++)
            printf("%d ", arr[i][j]);
        printf("\n");
    }
}
int main()
{
    int arr[3][5] = { 1,2,3,4,5,6,7,8,9,10 };
    print_arr1(arr, 3, 5);
    //æ•°ç»„åarrï¼Œè¡¨ç¤ºé¦–å…ƒç´ çš„åœ°å€
    //ä½†æ˜¯äºŒç»´æ•°ç»„çš„é¦–å…ƒç´ æ˜¯äºŒç»´æ•°ç»„çš„ç¬¬ä¸€è¡Œ
    //æ‰€ä»¥è¿™é‡Œä¼ é€’çš„arrï¼Œå…¶å®ç›¸å½“äºç¬¬ä¸€è¡Œçš„åœ°å€ï¼Œæ˜¯ä¸€ç»´æ•°ç»„çš„åœ°å€
    //å¯ä»¥æ•°ç»„æŒ‡é’ˆæ¥æ¥æ”¶
    print_arr2(arr, 3, 5);
    return 0;
}
```

## æ•°ç»„å‚æ•°ã€æŒ‡æ•°å‚æ•°

### ä¸€ç»´æ•°ç»„ä¼ å‚

```c
void test1(int arr[], int sz);
void test2(int* arr, int sz);
void test3(int* str[], int sz);
void test4(int** str, int sz);
int main() {
	int arr[] = { 1,2,3,4,5,6,7,8,9,0 };
	int sz1 = sizeof(arr) / sizeof(arr[0]);
	test1(arr, sz1);
	test2(arr, sz1);
	char* str[] = { "hello","hi","nihao" };
	int sz2 = sizeof(str) / sizeof(str[0]);
	test3(str, sz2);
	test4(str, sz2);
	return 0;
}
```

### äºŒç»´æ•°ç»„ä¼ å‚

```c
void test1(int arr[3][4], int row, int col);
void test1(int arr[][4], int row, int col);
void test1(int(*arr)[4], int row, int col);
int main() {
	int arr[3][4] = { {1,2,3,4},{2,3,4,5},{3,4,5,6} };
	int row = sizeof(arr) / sizeof(arr[0]);
	int col = sizeof(arr[0]) / sizeof(arr[0][0]);
	return 0;
}
```

### ä¸€çº§æŒ‡é’ˆä¼ å‚

```c
void test(int* p);
int main() {
	int a = 10;
	int* p= &a;
	int arr[] = { 1,2,3,4,5,6,7,8,9,0 };
	test(&a);
	test(p);
	test(arr);
	return 0;
}
```

### äºŒçº§æŒ‡é’ˆä¼ å‚

```c
void test(int** ptr);
int main(){
	int n = 10;
	int* p = &n;
	int** pp = &p;
	test(pp);
	test(&p);
	return 0;
}
```

## å‡½æ•°æŒ‡é’ˆ

```c
int Add(int x, int y)
{
	return x + y;
}
int main()
{
	printf("%p\n", Add);		//å‡½æ•°Addçš„åœ°å€
	printf("%p\n", &Add);		//å‡½æ•°Addçš„åœ°å€
	//&å‡½æ•°å å’Œ å‡½æ•°å éƒ½æ˜¯å‡½æ•°çš„åœ°å€
	//int(*p)(int, int) = &Add;
	int(*p)(int, int) = Add; 	//Addæ˜¯å‡½æ•°åœ°å€ï¼Œç±»ä¼¼äºæ•°å€¼æŒ‡é’ˆçš„å®šä¹‰
	//p - å‡½æ•°æŒ‡é’ˆå ï¼Œ int(*)(int,int) - pçš„ç±»å‹
	printf("%d\n", p(2, 3));//5
	printf("%d\n", (*p)(2, 3));//5
	printf("%d\n", (**p)(2, 3));//5
	printf("%d\n", (***p)(2, 3));//5	//*å°±æ˜¯æ‘†è®¾
	//printf("%d\n", *p(2, 3));	//err
	return 0;
}

é€†å¤©çš„ä¸¤ä¸ªå‡½æ•°æŒ‡é’ˆçš„è§£é‡Šï¼š
(*(void (*)())0)();
void (*)() 				- å‡½æ•°æŒ‡é’ˆç±»å‹
(void (*)())0 			- å°†0å¼ºåˆ¶è½¬æ¢ç±»å‹æˆå‡½æ•°çš„åœ°å€
*(void (*)())0)		 	- è§£å¼•ç”¨å‡½æ•°åœ°å€ - è°ƒç”¨0åœ°å€å¤„çš„è¯¥å‡½æ•°
(*(void (*)())0)(); 		- è°ƒç”¨0åœ°å€çš„å‡½æ•°ï¼Œæ— å‚ï¼Œè¿”å›ç±»å‹ä¸ºvoid

void (*signal(int, void(*)(int)))(int);
signal(int, void(*)(int)) 			- signalæ˜¯ä¸€ä¸ªå‡½æ•°çš„å£°æ˜ï¼Œint å’Œ  void(*)(int) æ˜¯å‡½æ•°å‚æ•°ç±»å‹
void (*			)(int);	  	-signalå‡½æ•°çš„è¿”å›ç±»å‹ä¹Ÿæ˜¯å‡½æ•°æŒ‡é’ˆï¼Œè¯¥å‡½æ•°æŒ‡é’ˆæŒ‡å‘çš„å‡½æ•°çš„å‚æ•°æ˜¯intï¼Œè¿”å›ç±»å‹æ˜¯void
ç®€åŒ–è¯¥å‡½æ•°
typedef void(*pfun_t)(int);
pfun_t signal(int, pfun_t);
```

## å‡½æ•°æŒ‡é’ˆæ•°ç»„

```c
#include<stdio.h>
void menu() {
	printf("*********************\n");
	printf("*****1.Add 2.Sub*****\n");
	printf("*****3.Mul 4.Div*****\n");
	printf("*****0.Exit     *****\n");
	printf("*********************\n");
}
void Add(int x, int y) {
	return x + y;
}
void Sub(int x, int y) {
	return x - y;
}
void Mul(int x, int y) {
	return x * y;
}
void Div(int x, int y) {
	return x / y;
}
int (*p[5])(int, int) = { NULL,Add,Sub,Mul,Div };
int main() {
	int input = 0;
	int x, y;
	int ret = 0;
	do {
		menu();
		printf("è¯·é€‰æ‹©:>");
		scanf("%d", &input);
		if (input == 0) {
			printf("é€€å‡ºè®¡ç®—å™¨\n");
			break;
		}
		else if (input >= 1 && input <= 4) {
			printf("è¯·è¾“å…¥ä¸¤ä¸ªæ•´æ•°:>");
			scanf("%d %d", &x, &y);
			ret = p[input](x, y);
			printf("ç»“æœä¸º:>%d\n", ret);
		}
		else {
			printf("è¯·é‡æ–°é€‰æ‹©\n");
		}
	} while (input);
	return 0;
}
```

## æŒ‡å‘å‡½æ•°æŒ‡é’ˆæ•°ç»„çš„æŒ‡é’ˆ

```c
int (*(*pp)[5])(int, int) = &p;
```

## å›è°ƒå‡½æ•°

å›è°ƒå‡½æ•°å°±æ˜¯ä¸€ä¸ªé€šè¿‡å‡½æ•°æŒ‡é’ˆè°ƒç”¨çš„å‡½æ•°

```c
void menu(){
	printf("************************\n");
	printf("***1.Add        2.Sub***\n");
	printf("***3.Mul        4.Div***\n");
	printf("***      0.exit      ***\n");
	printf("************************\n");
}
int Add(int x, int y){
	return x + y;
}
int Sub(int x, int y){
	return x - y;
}
int Mul(int x, int y){
	return x * y;
}
int Div(int x, int y){
	return x / y;
}
void Calc(int(*p)(int, int)){
	int x = 0, y = 0;
	printf("è¯·è¾“å…¥æ“ä½œæ•°>>");
	scanf("%d%d", &x, &y);
	printf("%d\n", p(x, y));
}
int main(){
	int input = 0;
	do{
		menu();
		printf("è¯·é€‰æ‹©>>");
		scanf("%d", &input);
		switch (input){
		case 1:
			Calc(Add);
			break;
		case 2:
			Calc(Sub);
			break;
		case 3:
			Calc(Mul);
			break;
		case 4:
			Calc(Div);
			break;
		case 0:
			printf("é€€å‡º");
			break;
		default:
			printf("é€‰æ‹©é”™è¯¯");
			break;
		}
	} while (input);
	return 0;
}
```

å…³äº`void*`çš„è§£é‡Šï¼š

`void*` ç±»å‹çš„æŒ‡é’ˆä¸èƒ½è¿›è¡Œè§£å¼•ç”¨æ“ä½œï¼Œå¯ä»¥æ¥æ”¶ä»»æ„ç±»å‹çš„åœ°å€ï¼Œä¸èƒ½è¿›è¡Œ+-æ•´æ•°çš„æ“ä½œ

```c
int main()
{
	int a = 10;
	char ch = 'w';
	void* p = &a;
	//*p = 20;		//void* ç±»å‹çš„æŒ‡é’ˆä¸èƒ½è¿›è¡Œè§£å¼•ç”¨æ“ä½œ
	p = &ch;		//void* ç±»å‹çš„æŒ‡é’ˆå¯ä»¥æ¥æ”¶ä»»æ„ç±»å‹çš„åœ°å€
	//p++;			//void* ç±»å‹çš„æŒ‡é’ˆä¸èƒ½è¿›è¡Œ+-æ•´æ•°çš„æ“ä½œ
	return 0;
}
```

- **`qsort`**å‡½æ•°

```c
void qsort(void* base, size_t num, size_t size, int(*compar)(const void* e1, const void* e2));
å¤´æ–‡ä»¶ï¼š #include<stdlib.h>
base â€”â€” å°±æ˜¯è¦æ’åºæ•°ç»„çš„é¦–å…ƒç´ åœ°å€
num â€”â€” æ•°ç»„å…ƒç´ çš„ä¸ªæ•°
size â€”â€” å°±æ˜¯æ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ çš„æ‰€å å­—èŠ‚æ•°ï¼Œç”¨sizeof(arr[0])æ¥è®¡ç®—
int(*compar)(const void* e1, const void* e2))
	è¿™ä¸ªå‡½æ•°æ˜¯è‡ªå·±å®šä¹‰çš„ï¼Œ* e1å’Œ* e2æ˜¯ä½ è¦æ’åºæ•°ç»„çš„ä¸¤ä¸ªè¿›è¡Œæ¯”è¾ƒçš„å…ƒç´ ï¼Œä½ å¿…é¡»ä¿è¯ä½ æ‰€å®šä¹‰çš„å‡½æ•°è¿”å›å€¼éµå®ˆä¸‹åˆ—è§„åˆ™ï¼š
	å¦‚æœ* e1å¤§äº* e2ï¼Œå°±è¿”å›å¤§äº0çš„æ•°ï¼ˆå‡½æ•°çš„è¿”å›ç±»å‹ä¸ºæ•´å½¢ï¼‰
	å¦‚æœ* e1å°äº* e2ï¼Œå°±è¿”å›å°äº0çš„æ•°
	å¦‚æœ* e1ç­‰äº* e2ï¼Œå°±è¿”å›ç­‰äº0çš„æ•°
	å¼ºåˆ¶ç±»å‹è½¬æ¢æ—¶ï¼Œç±»å‹åº”è¯¥ä¸ºå®å‚çš„ç±»å‹ï¼Œæ¯”å¦‚ä½ è¦æ¯”è¾ƒintå‹æ•°æ®ï¼Œé‚£ä¹ˆå¼ºåˆ¶è½¬æ¢ä¸ºintå‹ï¼Œå¦‚æœæ˜¯ç»“æ„ä½“å°±å¼ºåˆ¶è½¬æ¢ä¸ºç»“æ„ä½“
	å‡åºï¼šreturn *(type*)e1 - *(type*)e2;ï¼Œé™åºï¼šreturn *(type*)e2 - *(type*)e1;ï¼Œå­—ç¬¦ä¸²ç”¨strcmp
```

```c
#include<stdlib.h>
#include<string.h>
int cmp_int(const void* e1,const void* e2)
{
	return *(int*)e1 - *(int*)e2;
}
struct stu
{
	char name[20];
	short age;
};
int cmp_stu_by_age(const void* e1, const void* e2)
{
	//return  ((struct stu*)e1)->age - ((struct stu*)e2)->age;
	return (*(struct stu*)e1).age - (*(struct stu*)e2).age;
}
int cmp_stu_by_name(const void* e1, const void* e2)
{
	return strcmp((*(struct stu*)e1).name, (*(struct stu*)e2).name);
	//å­—ç¬¦ä¸²æ¯”è¾ƒä¸èƒ½ç›´æ¥ç›¸å‡ï¼Œè¦ä½¿ç”¨strcmp
}
void test1()
{
	int arr[] = { 10,9,8,7,6,5,4,3,2,1 };
	int sz = sizeof(arr) / sizeof(arr[0]);
	qsort(arr, sz, sizeof(arr[0]), cmp_int);
	int i = 0;
	for (i = 0; i < sz; i++)
	{
		printf("%d ", arr[i]);
	}
	printf("\n");
}
void test2()
{
	struct stu s[] = { {"zhangsan",18},{"wangwu",8},{"lisi",28} };
	int sz = sizeof(s) / sizeof(s[0]);
	qsort(s, sz, sizeof(s[0]), cmp_stu_by_age);
	int i = 0;
	for (i = 0; i < sz; i++)
	{
		printf("%s %d    ", s[i].name, s[i].age);
	}
	printf("\n");
	qsort(s, sz, sizeof(s[0]), cmp_stu_by_name);
	for (i = 0; i < sz; i++)
	{
		printf("%s %d    ", s[i].name, s[i].age);
	}
	printf("\n");
}
int main()
{
	test1();	//æ•´å‹æ•°ç»„å¿«æ’
	test2();	//ç»“æ„ä½“å¿«æ’
	return 0;
}
```

ä½¿ç”¨å›è°ƒå‡½æ•°å®ç°bubble_sort

```c
#include<stdio.h>
#include<string.h>
int cmp_int(const void* e1,const void* e2)
{
	return *(int*)e1 - *(int*)e2;
}
struct stu
{
	char name[20];
	short age;
};
int cmp_stu_by_age(const void* e1, const void* e2)
{
	//return  ((struct stu*)e1)->age - ((struct stu*)e2)->age;
	return (*(struct stu*)e1).age - (*(struct stu*)e2).age;
}
int cmp_stu_by_name(const void* e1, const void* e2)
{
	return strcmp((*(struct stu*)e1).name, (*(struct stu*)e2).name);
	//å­—ç¬¦ä¸²æ¯”è¾ƒä¸èƒ½ç›´æ¥ç›¸å‡ï¼Œè¦ä½¿ç”¨strcmp
}
void Swap(char* buf1, char* buf2, int width)
{
	int i = 0;
	for (i = 0; i < width; i++)
	{
		char tmp = *buf1;
		*buf1 = *buf2;
		*buf2 = tmp;
		buf1++;
		buf2++;
	}
}
void bubble_sort(void* base, int sz, int width, int(*cmp)(void* e1, void* e2))
{
	int i = 0;
	int ret = 0;
	for (i = 0; i < sz - 1;  i++)
	{
		int j = 0;
		for (j = 0; j < sz - 1 - i; j++)
		{
			ret = cmp((char*)base + j * width, (char*)base + (j + 1) * width);
			if (ret > 0)
				Swap((char*)base + j * width, (char*)base + (j + 1) * width, width);
		}
	}
}
void test1()
{
	int arr[] = { 10,8,7,9,6,2,1,3,5,4 };
	int sz = sizeof(arr) / sizeof(arr[0]);
	bubble_sort(arr, sz, sizeof(arr[0]), cmp_int);
	int i = 0;
	for (i = 0; i < sz; i++)
	{
		printf("%d ", arr[i]);
	}
	printf("\n");
}
void test2()
{
	struct stu s[] = { {"zhangsan",18},{"wangwu",8},{"lisi",28} };
	int sz = sizeof(s) / sizeof(s[0]);
	bubble_sort(s, sz, sizeof(s[0]), cmp_stu_by_age);
	int i = 0;
	for (i = 0; i < sz; i++)
	{
		printf("%s %d    ", s[i].name, s[i].age);
	}
	printf("\n");
	bubble_sort(s, sz, sizeof(s[0]), cmp_stu_by_name);
	for (i = 0; i < sz; i++)
	{
		printf("%s %d    ", s[i].name, s[i].age);
	}
	printf("\n");
}
int main()
{
	test1();	//æ•´å‹æ•°ç»„å†’æ³¡æ’åº
	test2();	//ç»“æ„ä½“å†’æ³¡æ’åº
	return 0;
}
```

## æŒ‡é’ˆå’Œæ•°ç»„ç¬”è¯•é¢˜è§£æ

```c
int main()
{
	//ä¸€ç»´æ•°ç»„
	int a[] = { 1,2,3,4 };
	printf("%d\n", sizeof(a));				//16	//a ä»£è¡¨æ•´ä¸ªæ•°ç»„
	printf("%d\n", sizeof(a + 0));			//4/8   //a æ˜¯é¦–å…ƒç´ åœ°å€ï¼Œa+0 è¿˜æ˜¯é¦–å…ƒç´ åœ°å€
	printf("%d\n", sizeof(*a));				//4		//a æ˜¯é¦–å…ƒç´ åœ°å€ï¼Œ*a æ˜¯é¦–å…ƒç´ 
	printf("%d\n", sizeof(a + 1));			//4/8	//a æ˜¯é¦–å…ƒç´ åœ°å€ï¼Œa+1 è¿˜æ˜¯ç¬¬äºŒä¸ªå…ƒç´ åœ°å€
	printf("%d\n", sizeof(a[1]));			//4		//a[1] == 2
	printf("%d\n", sizeof(&a));				//4/8	//&a æ˜¯æ•´ä¸ªæ•°ç»„çš„åœ°å€
	printf("%d\n", sizeof(*&a));			//16	//*&a ç›¸å½“äº a
	printf("%d\n", sizeof(&a + 1));			//4/8	//è¶Šè¿‡æ•°ç»„çš„åœ°å€
	printf("%d\n", sizeof(&a[0]));			//4/8	//é¦–å…ƒç´ åœ°å€
	printf("%d\n", sizeof(&a[0] + 1));		//4/8	//ç¬¬äºŒä¸ªå…ƒç´ çš„åœ°å€
	//å­—ç¬¦æ•°ç»„
	char arr[] = { 'a','b','c','d','e','f' };
	printf("%d\n", sizeof(arr));			//6		//æ•°ç»„çš„åœ°å€ï¼Œè®¡ç®—æ•´ä¸ªæ•°ç»„å¤§å°
	printf("%d\n", sizeof(arr + 0));		//4/8	//é¦–å…ƒç´ åœ°å€
	printf("%d\n", sizeof(*arr));			//1		//é¦–å…ƒç´ 
	printf("%d\n", sizeof(arr[1]));			//1		//ç¬¬äºŒä¸ªå…ƒç´ 
	printf("%d\n", sizeof(&arr));			//4/8	//æ•´ä¸ªæ•°ç»„çš„åœ°å€
	printf("%d\n", sizeof(&arr + 1));		//4/8	//è¶Šè¿‡æ•°ç»„çš„åœ°å€
	printf("%d\n", sizeof(&arr[0] + 1));	//4/8	//ç¬¬äºŒä¸ªå…ƒç´ çš„åœ°å€
	printf("%d\n", strlen(arr));			//éšæœºå€¼//è®¡ç®—å­—ç¬¦ä¸²arré•¿åº¦ï¼Œæ‰¾ä¸åˆ°â€˜\0'
	printf("%d\n", strlen(arr + 0));		//éšæœºå€¼//è®¡ç®—ä»ä¸‹æ ‡0å¼€å§‹çš„å­—ç¬¦ä¸²arré•¿åº¦æ‰¾ä¸åˆ°â€˜\0'
	printf("%d\n", strlen(*arr));			//err	//strlen(char*)ï¼Œéæ³•è®¿é—®å†…å­˜
	printf("%d\n", strlen(arr[1]));			//err	//strlen(char*)ï¼Œéæ³•è®¿é—®å†…å­˜
	printf("%d\n", strlen(&arr));			//éšæœºå€¼//è®¡ç®—å­—ç¬¦ä¸²arré•¿åº¦ï¼Œæ‰¾ä¸åˆ°â€˜\0'
	printf("%d\n", strlen(&arr + 1));		//éšæœºå€¼//è®¡ç®—è¶Šè¿‡æ•°ç»„çš„å­—ç¬¦ä¸²é•¿åº¦ï¼Œæ‰¾ä¸åˆ°â€˜\0'
	printf("%d\n", strlen(&arr[0] + 1));	//éšæœºå€¼//è®¡ç®—ä»ä¸‹æ ‡1å¼€å§‹çš„å­—ç¬¦ä¸²arré•¿åº¦æ‰¾ä¸åˆ°â€˜\0'

	char arr[] = "abcdef";
	printf("%d\n", sizeof(arr));			//7		//æ•°ç»„æ‰€å å†…å­˜çš„å¤§å°
	printf("%d\n", sizeof(arr + 0));		//4/8	//é¦–å…ƒç´ åœ°å€
	printf("%d\n", sizeof(*arr));			//1		//é¦–å…ƒç´ 'a'
	printf("%d\n", sizeof(arr[1]));			//1		//ç¬¬äºŒä¸ªå…ƒç´ 'b'
	printf("%d\n", sizeof(&arr));			//4/8	//æ•°ç»„åœ°å€
	printf("%d\n", sizeof(&arr + 1));		//4/8	//è¶Šè¿‡æ•°ç»„çš„åœ°å€
	printf("%d\n", sizeof(&arr[0] + 1));	//4/8	//ç¬¬äºŒä¸ªå…ƒç´ 'b'çš„åœ°å€
	printf("%d\n", strlen(arr));			//6		//å­—ç¬¦ä¸²é•¿åº¦
	printf("%d\n", strlen(arr + 0));		//6		//å­—ç¬¦ä¸²é•¿åº¦	
	printf("%d\n", strlen(*arr));			//err	//strlen(char*)ï¼Œéæ³•è®¿é—®å†…å­˜
	printf("%d\n", strlen(arr[1]));			//err	//strlen(char*)ï¼Œéæ³•è®¿é—®å†…å­˜
	printf("%d\n", strlen(&arr));			//6		//å­—ç¬¦ä¸²é•¿åº¦
	printf("%d\n", strlen(&arr + 1));		//éšæœºå€¼//è¶Šè¿‡æ•°ç»„çš„å­—ç¬¦ä¸²é•¿åº¦
	printf("%d\n", strlen(&arr[0] + 1));	//5		//è®¡ç®—ä»ä¸‹æ ‡1å¼€å§‹çš„å­—ç¬¦ä¸²é•¿åº¦

	char* p = "abcdef";
	printf("%d\n", sizeof(p));				//4/8	//pæ˜¯æŒ‡é’ˆå˜é‡ï¼Œå­—ç¬¦ä¸²é¦–å…ƒç´ åœ°å€
	printf("%d\n", sizeof(p + 1));			//4/8	//ç¬¬äºŒä¸ªå…ƒç´ åœ°å€
	printf("%d\n", sizeof(*p));				//7		//å­—ç¬¦ä¸²æ‰€å å†…å­˜ç©ºé—´çš„å¤§å°
	printf("%d\n", sizeof(p[0]));			//1		//é¦–å…ƒç´ 'a'çš„å¤§å°ï¼Œarr[0] == *(arr+0) p[0] == *(p+0)
	printf("%d\n", sizeof(&p));				//4/8	//å–pçš„åœ°å€
	printf("%d\n", sizeof(&p + 1));			//4/8	//å–è¶Šè¿‡pçš„åœ°å€
	printf("%d\n", sizeof(&p[0] + 1));		//4/8	//ç¬¬äºŒä¸ªå…ƒç´ 'b'çš„åœ°å€
	printf("%d\n", strlen(p));				//6		//å­—ç¬¦ä¸²å¤§å°
	printf("%d\n", strlen(p + 1));			//5		//è®¡ç®—ä»ä¸‹æ ‡1å¼€å§‹çš„å­—ç¬¦ä¸²é•¿åº¦
	printf("%d\n", strlen(*p));				//err	
	printf("%d\n", strlen(p[0]));			//err
	printf("%d\n", strlen(&p));				//éšæœºå€¼
	printf("%d\n", strlen(&p + 1));			//éšæœºå€¼
	printf("%d\n", strlen(&p[0] + 1));		//5

	//äºŒç»´æ•°ç»„
	int a[3][4] = { 0 };
	printf("%d\n", sizeof(a));				//4/8	//äºŒç»´æ•°ç»„çš„å¤§å°
	printf("%d\n", sizeof(a[0][0]));		//4		//ç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—å…ƒç´ çš„å¤§å°
	printf("%d\n", sizeof(a[0]));			//16	//a[0]æ˜¯ç¬¬ä¸€è¡Œçš„æ•°ç»„åï¼Œè®¡ç®—ç¬¬ä¸€è¡Œå…¨éƒ¨å…ƒç´ çš„å¤§å°
	printf("%d\n", sizeof(a[0] + 1));		//4/8	//ç¬¬ä¸€è¡Œç¬¬äºŒåˆ—å…ƒç´ çš„åœ°å€ï¼Œç›¸å½“äº&a[0][1]
	printf("%d\n", sizeof(*(a[0] + 1)));	//4		//ç¬¬ä¸€è¡Œç¬¬äºŒåˆ—å…ƒç´ çš„å¤§å°ï¼Œç›¸å½“äºa[0][1]
	printf("%d\n", sizeof(a + 1));			//4/8	//ç¬¬äºŒè¡Œåœ°å€çš„å¤§å°
	printf("%d\n", sizeof(*(a + 1)));		//16	//ç¬¬äºŒè¡Œå…¨éƒ¨å…ƒç´ çš„å¤§å°
	printf("%d\n", sizeof(&a[0] + 1));		//4/8	//ç¬¬äºŒè¡Œåœ°å€çš„å¤§å°
	printf("%d\n", sizeof(*(&a[0] + 1)));	//16	//ç¬¬äºŒè¡Œå…¨éƒ¨å…ƒç´ çš„å¤§å°
	printf("%d\n", sizeof(*a));				//16	//ç¬¬ä¸€è¡Œå…¨éƒ¨å…ƒç´ çš„å¤§å°
	printf("%d\n", sizeof(a[3]));			//16	//sizeofæ‹¬å·å†…å‚æ•°ä¸ä¼šå‚ä¸çœŸå®è®¡ç®—çš„
	return 0;
}
```

```c
int main()
{
    int a[5] = { 1, 2, 3, 4, 5 };
    int* ptr = (int*)(&a + 1);      
    //å¼ºåˆ¶ç±»å‹è½¬æ¢åptråªå¯è®¿é—®4ä¸ªå­—èŠ‚ï¼ŒptræŒ‡å‘è¶Šè¿‡æ•°ç»„aåçš„åœ°å€
    printf("%d,%d", *(a + 1), *(ptr - 1));//2ï¼Œ5
    //*(a+1)==a[1] *(ptr-1)==ptr[-1]
    return 0;
}

struct Test
{
	int Num;
	char* pcName;
	short sDate;
	char cha[2];
	short sBa[4];
}*p;
//å‡è®¾pçš„å€¼ä¸º0x100000,ä¸‹é¢è¡¨è¾¾å¼æ±‚å€¼
int main()
{
	p = (struct Test*)0x100000;
	//åå…­è¿›åˆ¶çš„0x1å’Œåè¿›åˆ¶1ä¸€æ ·
	printf("%p\n", p + 0x1);
	//åœ°å€+-æ•´æ•°çš„çŸ¥è¯†ç‚¹ï¼ŒæŒ‡é’ˆçš„ç±»å‹å†³å®šäº†æŒ‡é’ˆå‘å‰æˆ–è€…å‘åèµ°ä¸€æ­¥æœ‰å¤šå¤§
	//0x100014
	printf("%p\n", (unsigned long) p + 0x1);
	//æ•´å‹åŠ 1
	//0x100001
	printf("%p\n", (unsigned int*)p + 0x1);
	//æ— ç¬¦å·æ•´å‹æŒ‡é’ˆå˜é‡åŠ 1å°±ç§»åŠ¨4ä¸ªå­—èŠ‚
	//0x100004
	return 0;
}

int main()
{
	int a[4] = { 1,2,3,4 };
	int* ptr1 = (int*)(&a + 1);
	//å¼ºåˆ¶è½¬æ¢æˆæ•´å‹ç±»å‹ï¼ŒæŒ‡å‘è¶Šè¿‡æ•°ç»„açš„åœ°å€
	int* ptr2 = (int*)((int)a + 1);
	//å¼ºåˆ¶è½¬æ¢æˆæ•´å‹ç±»å‹ï¼Œï¼ˆint)a+1å°±æ˜¯æŒ‡å‘é¦–å…ƒç´ 1(01 00 00 00)çš„ç¬¬äºŒä¸ªå­—èŠ‚00
	//åœ°å€å‘ååä¸€ä¸ªå­—èŠ‚ï¼Œ*ptr2 == 00 00 00 02
	printf("%x,%x", ptr1[-1], *ptr2);
	//4ï¼Œ2000000
	return 0;
}

int main()
{
	int a[3][2] = { (0,1),(2,3),(4,5) };
	//a[3][2] = { 1, 3, 5};
	int* p;
	p = a[0];//a[0]æ˜¯ç¬¬ä¸€è¡Œæ•°ç»„åï¼ŒpæŒ‡å‘ç¬¬ä¸€è¡Œç¬¬ä¸€åˆ—å…ƒç´ çš„åœ°å€
	printf("%d\n", p[0]);
	//p[0] == a[0][0] == 1
	return 0;
}

int main()
{
	int a[5][5];
	int(*p)[4];
	p = a;
	//pæŒ‡å‘ç¬¬ä¸€è¡Œçš„åœ°å€,pçš„æ•°ç»„æ¯åˆ—æœ‰4ä¸ªå…ƒç´ 
	printf("%p,%d\n", &p[4][2] - &a[4][2], &p[4][2] - &a[4][2]);
	//-4ç”¨æŒ‡é’ˆæ‰“å°ï¼Œå…¶è¡¥ç ä¼šè¢«è§†ä¸ºæ— ç¬¦å·æ•°æ‰“å°
	//11111111 11111111 11111111 11111100
	//FF FF FF FC,-4
	return 0;
}

int main()
{
	int aa[2][5] = { 1,2,3,4,5,6,7,8,9,10 };
	int* ptr1 = (int*)(&aa + 1);
	//æŒ‡å‘è¶Šè¿‡æ•°ç»„çš„åœ°å€
	int* ptr2 = (int*)(*(aa + 1));
	//aa+1æ˜¯ç¬¬äºŒè¡Œçš„åœ°å€ï¼Œè§£å¼•ç”¨å¾—åˆ°ç¬¬äºŒè¡Œçš„æ•°ç»„å
	//*(aa+1) == aa[1]
	printf("%d,%d", *(ptr1 - 1), *(ptr2 - 1));
	return 0;
}

int main()
{
	char* a[] = { "work","at","alibaba" };
	//æŒ‡é’ˆæŒ‡å‘å¸¸é‡å­—ç¬¦ä¸²çš„é¦–å…ƒç´ åœ°å€
	char** pa = a;
	//æŒ‡å‘aæ•°ç»„çš„é¦–å…ƒç´ åœ°å€
	pa++;
	printf("%s\n", *pa);
	return 0;
}

int main()
{
	char* c[] = { "ENTER","NEW","POINT","FIRET" };
	char** cp[] = { c + 3,c + 2,c + 1,c };
	char*** cpp = cp;
	//æ³¨æ„++cppåcppå­˜å‚¨çš„åœ°å€ä¹Ÿä¼šå˜
	printf("%s\n", **++cpp);
	//cppæŒ‡å‘c+2ï¼Œä¸¤æ¬¡è§£å¼•ç”¨å¾—åˆ°"POINT"çš„é¦–å…ƒç´ åœ°å€
	//POINT
	printf("%s\n", *--*++cpp + 3);
	//cppæŒ‡å‘c+1ï¼Œ*--(c+1)ï¼Œ*cï¼Œå¾—åˆ°"ENTER"çš„é¦–å…ƒç´ åœ°å€ï¼Œå†+3å°±æŒ‡å‘"ER"çš„"E"çš„åœ°å€
	//ER
	printf("%s\n", *cpp[-2] + 3);
	//**(cpp-2)åcppçš„å€¼ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè¿˜æ˜¯æŒ‡å‘c+1
	//(cpp-2)æŒ‡å‘äº†c+3ï¼Œä¸¤æ¬¡è§£å¼•ç”¨å¾—åˆ°"FIRST"çš„é¦–å…ƒç´ åœ°å€ï¼Œå†+3å°±æŒ‡å‘"ET"çš„"E"çš„åœ°å€
	//ET
	printf("%s\n", cpp[-1][-1] + 1);
	//*(*(cpp-1)-1)
	//cpp-1æŒ‡å‘äº†c+2ï¼Œ*(c+1)å¾—åˆ°"NEW"çš„é¦–å…ƒç´ åœ°å€ï¼Œå†+1å°±æŒ‡å‘"EW"çš„"E"çš„åœ°å€
	//EW
	return 0;
}

int main()
{
	unsigned int a = 0x1234;
	unsigned char b = *(unsigned char*)&a;
	//å–åœ°å€aå†è§£å¼•ç”¨åªèƒ½è®¿é—®1ä¸ªå­—èŠ‚
	printf("%d\n", b);
	return 0;
}
```

# å­—ç¬¦å‡½æ•°å’Œå­—ç¬¦ä¸²å‡½æ•°

## å­—ç¬¦ä¸²å‡½æ•°

### `strlen`

```c
size_t strlen ( const char * str );
```

- å­—ç¬¦ä¸²å·²ç»`'\0'`ä½œä¸ºç»“æŸæ ‡å¿—ï¼Œ`strlen`å‡½æ•°è¿”å›çš„æ˜¯åœ¨å­—ç¬¦ä¸²ä¸­`'\0'`å‰é¢å‡ºç°çš„å­—ç¬¦ä¸ªæ•°ï¼ˆä¸åŒ…å«`'\0'`)ã€‚
- å‚æ•°æŒ‡å‘çš„å­—ç¬¦ä¸²å¿…é¡»è¦ä»¥`'\0'`ç»“æŸã€‚
- æ³¨æ„å‡½æ•°çš„è¿”å›å€¼ä¸º`size_t`ï¼Œæ˜¯æ— ç¬¦å·çš„ã€‚

```c
//my_strlençš„ä¸‰ç§æ–¹æ³•ï¼š1ã€è®¡æ•°å™¨  2ã€é€’å½’  3ã€æŒ‡é’ˆå‡æŒ‡é’ˆ
//è®¡æ•°å™¨
#include<stdio.h>
#include<assert.h>
unsigned int my_strlen(const char* str)
{
	assert(str);
    int count = 0;
    while (*str)
    {
        count++;
        str++;
    }
    return count;
}

//é€’å½’(ä¸åˆ›å»ºä¸´æ—¶å˜é‡)
unsigned int my_strlen(const char* str)
{
	assert(str);
    if (*str)
        return 1 + my_strlen(++str);
    else
        return 0;
}

//æŒ‡é’ˆå‡æŒ‡é’ˆ
unsigned int my_strlen(const char* str)
{
	assert(str);
    const char* p = str;
    while (*p++);
    p--;
    return p - str;
} 
int main()
{
    char arr[] = "abcdef";
    printf("å­—ç¬¦ä¸²é•¿åº¦ = %d\n", my_strlen(arr));
    return 0;
}
```

### **`strcpy`**

```c
char* strcpy(char * destination, const char * source );
```

- è¿”å›ç›®æ ‡å­—ç¬¦ä¸²åœ°å€ã€‚
- sourceå¿…é¡»ä»¥`'\0'`ç»“æŸï¼Œä¼šå°†sourceä¸­çš„`'\0'`æ‹·è´åˆ°destinationç©ºé—´ã€‚
- destinationå¿…é¡»è¶³å¤Ÿå¤§ï¼Œä»¥ç¡®ä¿èƒ½å­˜æ”¾sourceã€‚destinationç©ºé—´å¿…é¡»å¯å˜ã€‚

```c
#include<stdio.h>
#include<assert.h>
char* my_strcpy(char* dest, const char* src)
{
    assert(dest && src);
    char* tmp = dest;
    while (*dest++ = *src++);
    return tmp;
}
int main()
{
    char arr1[] = "abcdef";
    char arr2[] = "bit";
    printf("%s\n", my_strcpy(arr1, arr2));
    return 0;
}
```

### **`strcat`**

```c
char * strcat ( char * destination, const char * source );
```

- æŠŠsourceæ‰€æŒ‡å‘çš„å­—ç¬¦ä¸²ï¼ˆåŒ…æ‹¬`'\0'`ï¼‰å¤åˆ¶åˆ°destinationæ‰€æŒ‡å‘çš„å­—ç¬¦ä¸²åé¢ï¼ˆåˆ é™¤destinationåŸæ¥æœ«å°¾çš„`'\0'`ï¼‰ã€‚
- è¦ä¿è¯destinationè¶³å¤Ÿé•¿ï¼Œä»¥å®¹çº³è¢«å¤åˆ¶è¿›æ¥çš„sourceã€‚sourceä¸­åŸæœ‰çš„å­—ç¬¦ä¸å˜ã€‚è¿”å›destinationã€‚
- **å­—ç¬¦ä¸²ä¸èƒ½ç”¨`strcat`è‡ªå·±ç»™è‡ªå·±è¿½åŠ ã€‚**

```c
#include<stdio.h>
#include<assert.h>
char* my_strcat(char* dest, const char* src)
{
    assert(dest && src);
    char* p = dest;
    while (*dest)
        dest++;
    while (*dest++ = *src++);
    return p;
}
int main()
{
    char arr1[] = "abcdef\0xxxxxx";
    char arr2[] = "bit";
    printf("%s\n", my_strcat(arr1, arr2));
    return 0;
}
```

### **`strcmp`**

```c
int strcmp(const char* str1, const char* str2);
```

- å½“`str1 < str2`æ—¶ï¼Œè¿”å›ä¸ºè´Ÿæ•°ï¼›å½“`str1 == str2`æ—¶ï¼Œè¿”å›å€¼= 0ï¼›å½“`str1 > str2`æ—¶ï¼Œè¿”å›æ­£æ•°ã€‚
- ä¸¤ä¸ªå­—ç¬¦ä¸²è‡ªå·¦å‘å³é€ä¸ªå­—ç¬¦ç›¸æ¯”ï¼ˆæŒ‰ASCIIå€¼å¤§å°ç›¸æ¯”è¾ƒï¼‰ï¼Œç›´åˆ°å‡ºç°ä¸åŒçš„å­—ç¬¦æˆ–é‡`'\0'`ä¸ºæ­¢ã€‚
- å½“ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸ç›¸ç­‰æ—¶ï¼ŒCæ ‡å‡†æ²¡æœ‰è§„å®šè¿”å›å€¼ä¼šæ˜¯1 æˆ– -1ï¼Œåªè§„å®šäº†æ­£æ•°å’Œè´Ÿæ•°ã€‚ï¼ˆVSç¼–è¯‘å™¨ä¸‹è¿”å›1ã€-1ã€0ï¼‰ã€‚æœ‰äº›ä¼šæŠŠä¸¤ä¸ªå­—ç¬¦çš„ASCIIç ä¹‹å·®ä½œä¸ºæ¯”è¾ƒç»“æœç”±å‡½æ•°å€¼è¿”å›ã€‚ä½†æ— è®ºå¦‚ä½•ä¸èƒ½ä»¥æ­¤æ¡ä¾æ®ä½œä¸ºç¨‹åºä¸­çš„æµç¨‹é€»è¾‘ã€‚

```c
#include<stdio.h>
#include<assert.h>
int my_strcmp(const char* str1, const char* str2)
{
    assert(str1 && str2);
    while (*str1 == *str2)
    {
        if (*str1 == '\0')
            return 0;
        str1++;
        str2++;
    }
    return *str1 - *str2;
}
int main()
{
    char arr1[] = "abcdef";
    char arr2[] = "abcqwe";
    int ret = my_strcmp(arr1, arr2);
    if (ret > 0)
        printf("arr1>arr2\n");
    else if (ret < 0)
        printf("arr1<arr2\n");
    else
        printf("arr1=arr2\n");
    return 0;
}
```

### **`strncpy`**

```c
char* strncpy(char* strDestination, const char* strSource, size_t num);
```

- æ‹·è´numä¸ªå­—ç¬¦ä»æºå­—ç¬¦ä¸²åˆ°ç›®æ ‡ç©ºé—´ã€‚
- å¦‚æœæºå­—ç¬¦ä¸²çš„é•¿åº¦å°äºnumï¼Œåˆ™æ‹·è´å®Œæºå­—ç¬¦ä¸²ä¹‹åï¼Œåœ¨ç›®æ ‡çš„åè¾¹è¿½åŠ `'\0'`ï¼Œç›´åˆ°numä¸ªã€‚

```c
#include<stdio.h>
#include<assert.h>
char* my_strncpy(char* dest, const char* src, unsigned int num)
{
    assert(dest && src);
    char* p = dest;
    while (num && *src)
    {
        *dest++ = *src++;
        num--;
    }
    while(num--)
        *dest++ = '\0';
    return p;
}
int main()
{
    char p1[] = "abcde";
    char p2[] = "qwer";
    int num = 3;
    printf("%s\n", my_strncpy(p1, p2, num));
    //qwede\0

    char p1[] = "abcde";
    char p2[] = "qw";
    int num = 4;
    printf("%s\n", my_strncpy(p1, p2, num));
    //qw\0\0e\0
    return 0;
}
```

### **`strncat`**

```c
char* strncat(char* destination, const char* source, size_t num);
```

- è¿½åŠ numä¸ªå­—ç¬¦ä»æºå­—ç¬¦ä¸²åˆ°ç›®æ ‡ç©ºé—´ã€‚
- å¦‚æœæºå­—ç¬¦ä¸²çš„é•¿åº¦å°äºnumï¼Œåˆ™è¿½åŠ å®Œæºå­—ç¬¦ä¸²ä¹‹åï¼Œåœ¨ç›®æ ‡çš„åè¾¹è¿½åŠ `'\0'`ã€‚

```c
#include<stdio.h>
#include<assert.h>
char* my_strncat(char* dest, const char* src, unsigned int num)
{
	assert(dest && src);
	char* p = dest;
	while (*dest)
		dest++;
	while (num && *src)
	{
		*dest++ = *src++;
		num--;
	}
	*dest = '\0';
	return p;
}
int main()
{
	char p1[] = "hello\0xxxxxx";
	char p2[] = "world";
	int num = 3;
	printf("%s\n", my_strncat(p1, p2, num));
	//hellowor\0xxx\0   å½“num == 3æ—¶
	//helloworld\0x\0   å½“num == 7æ—¶
	return 0;
}
```

### **`strncmp`**

```c
int strncmp(const char* str1, const char* str2, size_t num);
```

- æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„å‰numä¸ªå­—ç¬¦

```c
#include<stdio.h>
#include<assert.h>
int my_strncmp(const char* str1, const char* str2, unsigned int num)
{
	assert(str1 && str2);
	while (num && *str1 && *str1 == *str2)
	{
		str1++;
		str2++;
		num--;
	}
	return *str1 - *str2;
}
int main()
{
	char p1[] = "abcde";
	char p2[] = "abcf";
	int num = 4;
	int ret = my_strncmp(p1, p2, num);
	if (ret > 0)
		printf("p1>p2\n");
	else if (ret < 0)
		printf("p1<p2\n");
	else
		printf("p1=p2\n");
	return 0;
}
```

### **`strstr`**

```c
char *strstr( const char *string, const char *strCharSet );
```

- `strstr`å‡½æ•°ç”¨äºåˆ¤æ–­å­—ç¬¦ä¸²str2æ˜¯å¦æ˜¯str1çš„å­ä¸²ã€‚å¦‚æœæ˜¯ï¼Œåˆ™è¯¥å‡½æ•°è¿”å› str1å­—ç¬¦ä¸²ä» str2ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®å¼€å§‹åˆ° str1ç»“å°¾çš„å­—ç¬¦ä¸²ï¼›å¦åˆ™ï¼Œè¿”å›NULLã€‚

```c
#include<stdio.h>
#include<assert.h>
char* my_strstr(const char* str1, const char* str2) {
	assert(str1 && str2);
	const char* p1 = str1;
	const char* p2 = str2;
	while (*str1) {
		p1 = str1;
		p2 = str2;
		while (*p1 && *p2 && *p1 == *p2) {
			p1++, p2++;
		}
		if (*p2 == '\0')
			return str1;
		str1++;
	}
	return NULL;
}
int main() {
	char str1[] = "abababccabc";
	char str2[] = "abc";
	char* p = my_strstr(str1, str2);
	if (p)
		printf("æ‰¾åˆ°äº†\n");
	else
		printf("æ‰¾ä¸åˆ°\n");

	return 0;
}
```

### **`strtok`**

```c
char *strtok( char *str, const char *sep );
```

- sepå‚æ•°æ˜¯ä¸ªå­—ç¬¦ä¸²ï¼Œå®šä¹‰äº†ç”¨ä½œåˆ†éš”ç¬¦çš„å­—ç¬¦é›†åˆã€‚
- ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒåŒ…å«äº†0ä¸ªæˆ–è€…å¤šä¸ªç”±sepå­—ç¬¦ä¸²ä¸­ä¸€ä¸ªæˆ–è€…å¤šä¸ªåˆ†éš”ç¬¦åˆ†å‰²çš„æ ‡è®°ã€‚
- `strtok`å‡½æ•°æ‰¾åˆ°strä¸­çš„ä¸‹ä¸€ä¸ªæ ‡è®°ï¼Œå¹¶å°†å…¶ç”¨ `\0` ç»“å°¾ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘è¿™ä¸ªæ ‡è®°çš„æŒ‡é’ˆã€‚ï¼ˆæ³¨ï¼š `strtok`å‡½æ•°ä¼šæ”¹å˜è¢«æ“ä½œçš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨`strtok`å‡½æ•°åˆ‡åˆ†çš„å­—ç¬¦ä¸²ä¸€èˆ¬éƒ½æ˜¯ä¸´æ—¶æ‹·è´çš„å†…å®¹å¹¶ä¸”å¯ä¿®æ”¹ã€‚ï¼‰
- `strtok`å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ä¸º`NULL` ï¼Œå‡½æ•°å°†æ‰¾åˆ°strä¸­ç¬¬ä¸€ä¸ªæ ‡è®°ï¼Œ`strtok`å‡½æ•°å°†ä¿å­˜å®ƒåœ¨å­—ç¬¦ä¸² ä¸­çš„ä½ç½®ã€‚
- `strtok`å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸º`NULL`ï¼Œå‡½æ•°å°†åœ¨åŒä¸€ä¸ªå­—ç¬¦ä¸²ä¸­è¢«ä¿å­˜çš„ä½ç½®å¼€å§‹ï¼ŒæŸ¥æ‰¾ä¸‹ä¸€ä¸ªæ ‡è®°ã€‚
- å¦‚æœå­—ç¬¦ä¸²ä¸­ä¸å­˜åœ¨æ›´å¤šçš„æ ‡è®°ï¼Œåˆ™è¿”å›`NULL`æŒ‡é’ˆã€‚

```c
#include<stdio.h>
int main()
{
    char str[] = "-This.a,sample-string.";
    char* sep = "-,.";
    char* pch = NULL;
    printf("Splitting string \"%s\" into tokens:\n", str);
    for (pch = strtok(str, sep); pch != NULL; pch = strtok(NULL, sep))
        printf("%s\n", pch);
    return 0;
}
```

### **`strerror`**

```c
char* strerror( int errnum );
```

```c
#include<stdio.h>
#include<string.h>
#include<errno.h>
int main()
{
    //errno - æ˜¯ä¸€ä¸ªå…¨å±€çš„é”™è¯¯çš„å˜é‡
    FILE* pf = fopen("test.txt", "r");
    if (pf == NULL) {
        printf("%s\n", strerror(errno));
        //perror("fopen");
       return 1;
    }
    else
        printf("open file successfully");
    fclose(pf);
    pf = NULL;
    return 0;
}
```

## å­—ç¬¦å‡½æ•°

```c
#include<stdio.h>
#include<ctype.h>		//å­—ç¬¦å‡½æ•°å¼•ç”¨å¤´æ–‡ä»¶
int main()
{
    //å­—ç¬¦åˆ†ç±»å‡½æ•°
    char ch = '10';
    //isdight   æ˜¯å¦æ˜¯æ•°å­—
    int ret = isdigit(ch);
    printf("%d\n", ret);    //4

    //isxdight  æ˜¯å¦æ˜¯åå…­è¿›åˆ¶
    ret = isxdigit('0');
    printf("%d\n", ret);    //128

    //iscntrl   æ˜¯å¦æ˜¯æ§åˆ¶å­—ç¬¦
    ret = iscntrl('\n');
    printf("%d\n", ret);    //32

    //isspace   æ˜¯å¦ç©ºç™½å­—ç¬¦
    ret = isspace(' ');
    printf("%d\n", ret);    //8

    //islower   æ˜¯å¦æ˜¯å°å†™å­—æ¯
    ret = islower('a');
    printf("%d\n", ret);    //2

    //isupper   æ˜¯å¦æ˜¯å¤§å†™å­—æ¯
    ret = isupper('A');
    printf("%d\n", ret);    //1

    //isalpha   æ˜¯å¦æ˜¯å­—æ¯
    ret = isalpha('a');
    printf("%d\n", ret);    //2

    //isalnum   æ˜¯å¦æ˜¯å­—æ¯æˆ–æ•°å­—
    ret = isalnum('0');
    printf("%d\n", ret);    //4
    
    //ispunct   æ˜¯å¦æ˜¯æ ‡ç‚¹
    ret = ispunct(';');
    printf("%d\n", ret);    //16

    //isgraph   æ˜¯å¦æ˜¯å›¾å½¢å­—ç¬¦
    ret = isgraph('0');
    printf("%d\n", ret);    //4

    //isprint ä»»ä½•å¯æ‰“å°å­—ç¬¦ åŒ…æ‹¬å›¾å½¢å­—ç¬¦å’Œç©ºç™½å­—ç¬¦
    ret = isprint('\n');
    printf("%d\n", ret);    //0

    //ä»¥ä¸Šå‡½æ•°è¿”å›å€¼ï¼šå¦‚æœå‚æ•°æ˜¯åˆ™è¿”å›é0ï¼Œå¦åˆ™è¿”å›0ã€‚
    return 0;
}

int main()
{
    //å­—ç¬¦è½¬æ¢å‡½æ•°
    char ch = 'a';
    //tolower å°†å¤§å†™å­—æ¯è½¬æ¢ä¸ºå°å†™å­—ç¬¦ã€‚
    //å¦‚æœä¼ é€’ç»™tolower()å‡½æ•°çš„å‚æ•°ä¸æ˜¯å¤§å†™å­—æ¯ï¼Œåˆ™å®ƒè¿”å›ä¼ é€’ç»™è¯¥å‡½æ•°çš„ç›¸åŒå­—ç¬¦ã€‚
    char ret = toupper(ch);
    printf("%c\n", ret);

    //toupper å°†å°å†™å­—æ¯è½¬æ¢ä¸ºå¤§å†™å­—ç¬¦ã€‚
    //å¦‚æœä¼ é€’ç»™toupper()å‡½æ•°çš„å‚æ•°ä¸æ˜¯å°å†™å­—æ¯ï¼Œåˆ™å®ƒè¿”å›ä¼ é€’ç»™è¯¥å‡½æ•°çš„ç›¸åŒå­—ç¬¦ã€‚
    ret = tolower(ret);
    printf("%c\n", ret);
    return 0;
}
```

| å‡½æ•° | åŠŸèƒ½æè¿° |
| --- | --- |
| iscntrl | ä»»ä½•æ§åˆ¶å­—ç¬¦ï¼ˆå¦‚æ¢é¡µã€æ¢è¡Œç­‰ï¼‰ |
| isspace | å¦‚åŒ…æ‹¬ç©ºæ ¼ã€æ¢é¡µã€æ¢è¡Œã€å›è½¦ã€åˆ¶è¡¨ç¬¦æˆ–å‚ç›´åˆ¶è¡¨ç¬¦ |
| isdigit | åè¿›åˆ¶æ•°å­—ï¼ˆ0~9ï¼‰ |
| isxdigit | åå…­è¿›åˆ¶æ•°å­—ï¼ˆåŒ…æ‹¬æ‰€æœ‰åè¿›åˆ¶æ•°å­—ã€å°å†™å­—æ¯a~f æˆ– å¤§å†™å­—æ¯A~Fï¼‰ |
| islower | å°å†™å­—æ¯ï¼ˆa~zï¼‰ |
| isupper | å¤§å†™å­—æ¯ï¼ˆA~Zï¼‰ |
| isalpha | å­—æ¯ï¼ˆa~z æˆ– A~Zï¼‰ |
| isalnum | å­—æ¯æˆ–æ•°å­—ï¼ˆåŒ…æ‹¬a~zã€ A~Z å’Œ 0~9ï¼‰ |
| ispunct | æ ‡ç‚¹ç¬¦å·ï¼ˆå³ä»»ä½•ä¸å±äºæ•°å­—æˆ–å­—æ¯çš„å›¾å½¢å­—ç¬¦ï¼‰ |
| isgraph | ä»»ä½•å›¾å½¢å­—ç¬¦ï¼ˆå³éç©ºæ ¼å­—ç¬¦ï¼‰ |
| isprint | ä»»ä½•å¯æ‰“å°å­—ç¬¦ï¼ˆåŒ…æ‹¬å›¾å½¢å­—ç¬¦å’Œç©ºç™½å­—ç¬¦ï¼‰ |

## å†…å­˜å‡½æ•°

### `memcpy`

```c
void *memcpy( void *dest, const void *src, size_t count );
```

- å‡½æ•°`memcpy`ä»sourceçš„ä½ç½®å¼€å§‹å‘åå¤åˆ¶numä¸ªå­—èŠ‚çš„æ•°æ®åˆ°destinationçš„å†…å­˜ä½ç½®ã€‚
- è¿™ä¸ªå‡½æ•°åœ¨é‡åˆ° '\0' çš„æ—¶å€™å¹¶ä¸ä¼šåœä¸‹æ¥ã€‚
- å¦‚æœsourceå’Œdestinationæœ‰ä»»ä½•çš„é‡å ï¼Œå¤åˆ¶çš„ç»“æœéƒ½æ˜¯æœªå®šä¹‰çš„ã€‚
- Cè¯­è¨€æ ‡å‡†ä¸­çš„`memcpy`å‡½æ•°åªæ‹·è´ä¸é‡å çš„å­—èŠ‚ï¼Œè€Œåœ¨VSç¼–è¯‘å™¨ä¸­å¯ä»¥å¤„ç†é‡å æ‹·è´ï¼Œç±»ä¼¼äº`memmove`ã€‚

```c
#include<stdio.h>
#include<string.h> //å†…å­˜å‡½æ•°å¤´æ–‡ä»¶
int main()
{
    int arr1[] = { 1,2,3,4,5 };
    int arr2[5] = { 0 };
    memcpy(arr2, arr1, sizeof(arr1));
    int i = 0;
    for (i = 0; i < 5; i++)
        printf("%d ", arr2[i]);
    return 0;
}

//æ¨¡æ‹Ÿå®ç°memcpy
#include<stdio.h>
#include<assert.h>
void* my_memcpy(void* dst, const void* src, size_t num)
{
    assert(dst && src);
    void* ret = dst;
    while (num--)
    {
        *(char*)dst = *(char*)src;
        ++(char*)dst;
        ++(char*)src;
    }
    return ret;
}
int main()
{
    int arr1[] = { 1,2,3,4,5,6,7,8,9,10 };
    int arr2[10] = { 0 };
    my_memcpy(arr2, arr1+2, 20);
    int sz = sizeof(arr2) / sizeof(arr2[0]);
    int i = 0;
    for (i = 0; i < sz; i++)
        printf("%d ", arr2[i]);
    return 0;
}
```

### `memmove`

```c
void *memmove( void *dest, const void *src, size_t count );
```

- å’Œ`memcpy`çš„å·®åˆ«å°±æ˜¯`memmove`å‡½æ•°å¤„ç†çš„æºå†…å­˜å—å’Œç›®æ ‡å†…å­˜å—æ˜¯å¯ä»¥é‡å çš„ã€‚
- å¦‚æœæºç©ºé—´å’Œç›®æ ‡ç©ºé—´å‡ºç°é‡å ï¼Œå°±å¾—ä½¿ç”¨`memmove`å‡½æ•°å¤„ç†ã€‚

```c
#include<stdio.h>
#include<assert.h>
void* my_memmove(void* dst, const void* src, size_t num)
{
    assert(dst && src);
    void* ret = dst;
    if (dst < src)
        while (num--)
        {
            *(char*)dst = *(char*)src;
            ++(char*)dst, ++(char*)src;
        }
    else
        while (num--)
        {
            *((char*)dst + num) = *((char*)src + num);
        }
    return ret;
}
int main()
{
    int arr[] = { 1,2,3,4,5,6,7,8,9,10 };
    my_memmove(arr + 2, arr, 20);
    int sz = sizeof(arr) / sizeof(arr[0]);
    int i = 0;
    for (i = 0; i < sz; i++)
        printf("%d ", arr[i]);
    return 0;
}
```

### `memcmp`

```c
int memcmp( const void *ptr1, const void *ptr2, size_t count );
```

- æ¯”è¾ƒä»ptr1å’Œptr2æŒ‡é’ˆå¼€å§‹çš„numä¸ªå­—èŠ‚
- å¦‚æœè¿”å›å€¼ < 0ï¼Œåˆ™è¡¨ç¤º str1 å°äº str2ã€‚å¦‚æœè¿”å›å€¼ > 0ï¼Œåˆ™è¡¨ç¤º str2 å°äº str1ã€‚å¦‚æœè¿”å›å€¼ = 0ï¼Œåˆ™è¡¨ç¤º str1 ç­‰äº str2ã€‚

```c
#include<stdio.h>
#include<assert.h>
int my_memcmp(const void* ptr1, const void* ptr2, size_t num)
{
    assert(ptr1 && ptr2);
    if (!num)
        return 0;
    while ((num--) && (*(char*)ptr1 == *(char*)ptr2))
        ++(char*)ptr1, ++(char*)ptr2;
    return *(char*)ptr1 - *(char*)ptr2;
}
int main()
{
    int p1[] = { 1,2,3,4,5 };
    int p2[] = { 1,2,3,3,3 };
    int ret = my_memcmp(p1, p2,8);
    if (ret > 0)
        printf("p1 > p2");
    else if (ret < 0)
        printf("p1 < p2");
    else
        printf("p1 = p2");
    return 0;
}
```

### `memset`

```c
void *memset( void *dest, int c, size_t count );  
```

- destæŒ‡å‘è¦å¡«å……çš„å†…å­˜å—ã€‚
- cæ˜¯è¦è¢«è®¾ç½®çš„å€¼ã€‚
- countæ˜¯è¦è¢«è®¾ç½®è¯¥å€¼çš„å­—ç¬¦æ•°ã€‚
- è¿”å›ç±»å‹æ˜¯ä¸€ä¸ªæŒ‡å‘å­˜å‚¨åŒºçš„æŒ‡é’ˆã€‚

```c
#include<stdio.h>
#include<string.h>
int main() {
	int arr[10];
	memset(arr, 1, sizeof(arr));
	int i = 0;
	for (i = 0; i < 10; i++)
		printf("%d ", arr[i]);
	return 0;
}
```

# è‡ªå®šä¹‰ç±»å‹

## ç»“æ„ä½“

**åˆé˜¶ç»“æ„ä½“**

```c
#include<stdio.h>
struct S
{
	char arr[10];
	int i;
}s1 = { "123",4 };//å…¨å±€å˜é‡
struct P
{
	char ch;
	struct S s;
	float f;
	struct P* next;//ç»“æ„ä½“è‡ªå¼•ç”¨
};
struct P p1 = { 'A',{"hello",10},95.5f,NULL };//å…¨å±€å˜é‡

void Print1(struct P sp)
{
	printf("%c %s %d %f\n", sp.ch, sp.s.arr, sp.s.i, sp.f);
}
void Print2(struct P* p)
{
	printf("%c %s %d %f\n", (*p).ch, (*p).s.arr, (*p).s.i, (*p).f);
	printf("%c %s %d %f\n", p->ch, p->s.arr, p->s.i, p->f);
}

int main()
{
	struct P p2 = { 'B',{"hi",99},3.14f,NULL };//å±€éƒ¨å˜é‡
	Print1(p2);
	Print2(&p2);
	return 0;
}
```

> ç»“æ„ä½“ä¼ å‚é¦–é€‰**ä¼ åœ°å€**ã€‚å‡½æ•°ä¼ å‚çš„æ—¶å€™ï¼Œå‚æ•°æ˜¯éœ€è¦å‹æ ˆçš„ã€‚å¦‚æœä¼ é€’ä¸€ä¸ªç»“æ„ä½“å¯¹è±¡çš„æ—¶å€™ï¼Œç»“æ„ä½“è¿‡å¤§ï¼Œå‚æ•°å‹æ ˆçš„çš„ç³»ç»Ÿå¼€é”€æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´æ€§èƒ½çš„ä¸‹é™ã€‚


```c
typedef struct stu      
{
    char name[20];
    short age;
    char sex[5];
    int id[20];
}stu;//ç»“æ„ä½“ç±»å‹ struct stu é‡å‘½åä¸º stu
stu s1;

struct//åŒ¿åç»“æ„ä½“ç±»å‹
{
    int a;
    char b;
    float c;
}x;//åŒ¿åç»“æ„ä½“ç±»å‹åªèƒ½åœ¨å£°æ˜æ—¶å®šä¹‰ã€‚
struct
{
    int a;
    char b;
    float c;
}a[20], * p;
//*p = &x;  éæ³•ï¼Œç¼–è¯‘å™¨ä¼šæŠŠä¸Šé¢çš„ä¸¤ä¸ªå£°æ˜å½“æˆå®Œå…¨ä¸åŒçš„ä¸¤ä¸ªç±»å‹ã€‚
//åŒ¿åç»“æ„ä½“ç±»å‹ä¸é€‚ç”¨ç»“æ„ä½“é‡å‘½åã€‚
```

**è‡ªå¼•ç”¨**

```c
//é”™è¯¯è‡ªå¼•ç”¨
struct Node
{
    int data;
    struct Node next;
};
//æ­£ç¡®è‡ªå¼•ç”¨
struct Node
{
    int data;
    struct Node* next;
};
typedef struct Node
{
 int data;
 struct Node* next;//ä¸èƒ½å†™æˆNode* next;
}Node;
```

**ä¹±åºåˆå§‹åŒ–**

```c
typedef struct stu      
{
    char name[20];
    short age;
    char sex[5];
    int id[20];
}stu;
int main() {
    stu s = { .age = 18,.id = 20240423,.name = "zhangsan",.sex = "male" };
    return 0;
}
```

**ç»“æ„ä½“å†…å­˜å¯¹é½**

1. ç¬¬ä¸€ä¸ªæˆå‘˜åœ¨ä¸ç»“æ„ä½“å˜é‡åç§»é‡ä¸º0çš„åœ°å€å¤„ã€‚
2. å…¶ä»–æˆå‘˜å˜é‡è¦**å¯¹é½åˆ°æŸä¸ªæ•°å­—ï¼ˆå¯¹é½æ•°ï¼‰çš„æ•´æ•°å€çš„åœ°å€å¤„**ã€‚ å¯¹é½æ•° = ç¼–è¯‘å™¨é»˜è®¤çš„ä¸€ä¸ªå¯¹é½æ•° ä¸ è¯¥æˆå‘˜å¤§å°çš„è¾ƒå°å€¼ã€‚æ•°ç»„çš„æœ€å¤§å¯¹é½æ•°ä¾æ®å…ƒç´ ç±»å‹ã€‚ VSä¸­é»˜è®¤çš„å€¼ä¸º8
3. **ç»“æ„ä½“æ€»å¤§å°ä¸ºæœ€å¤§å¯¹é½æ•°ï¼ˆæ¯ä¸ªæˆå‘˜å˜é‡éƒ½æœ‰ä¸€ä¸ªå¯¹é½æ•°ï¼‰çš„æ•´æ•°å€**ã€‚
4. å¦‚æœåµŒå¥—äº†ç»“æ„ä½“çš„æƒ…å†µï¼ŒåµŒå¥—çš„ç»“æ„ä½“å¯¹é½åˆ°**è‡ªå·±æˆå‘˜çš„æœ€å¤§å¯¹é½æ•°çš„æ•´æ•°å€å¤„**ï¼Œç»“æ„ä½“çš„æ•´ä½“å¤§å°å°±æ˜¯æ‰€æœ‰æœ€å¤§å¯¹é½æ•°ï¼ˆå«åµŒå¥—ç»“æ„ä½“çš„å¯¹é½æ•°ï¼‰çš„æ•´æ•°å€ã€‚

```c
struct S1
{
    char c1;
    int i;
    char c2;
};
printf("%d\n", sizeof(struct S1));//12

struct S2
{
    char c1;
    char c2;
    int i;
};
printf("%d\n", sizeof(struct S2));//8

struct S3
{
    double d;
    char c;
    int i;
};
printf("%d\n", sizeof(struct S3));//16

struct S4
{
    char c1;
    struct S3 s3;
    double d;
};
printf("%d\n", sizeof(struct S4));//32
```

- ä¸ºä»€ä¹ˆå­˜åœ¨å†…å­˜å¯¹é½?
    - å¹³å°åŸå› (ç§»æ¤åŸå› )ï¼šä¸æ˜¯æ‰€æœ‰çš„ç¡¬ä»¶å¹³å°éƒ½èƒ½è®¿é—®ä»»æ„åœ°å€ä¸Šçš„ä»»æ„æ•°æ®çš„ï¼›æŸäº›ç¡¬ä»¶å¹³å°åªèƒ½åœ¨æŸäº›åœ°å€å¤„å–æŸäº›ç‰¹å®šç±»å‹çš„æ•°æ®ï¼Œå¦åˆ™æŠ›å‡ºç¡¬ä»¶å¼‚å¸¸ã€‚
    - æ€§èƒ½åŸå› ï¼šæ•°æ®ç»“æ„(å°¤å…¶æ˜¯æ ˆ)åº”è¯¥å°½å¯èƒ½åœ°åœ¨è‡ªç„¶è¾¹ç•Œä¸Šå¯¹é½ã€‚åŸå› åœ¨äºï¼Œä¸ºäº†è®¿é—®æœªå¯¹é½çš„å†…å­˜ï¼Œå¤„ç†å™¨éœ€è¦ä½œä¸¤æ¬¡å†…å­˜è®¿é—®ï¼›è€Œå¯¹é½çš„å†…å­˜è®¿é—®ä»…éœ€è¦ä¸€æ¬¡è®¿é—®ã€‚

> é‚£åœ¨è®¾è®¡ç»“æ„ä½“çš„æ—¶å€™ï¼Œè®©å ç”¨ç©ºé—´å°çš„æˆå‘˜å°½é‡é›†ä¸­åœ¨ä¸€èµ·ï¼Œæ—¢æ»¡è¶³å¯¹é½ï¼ŒåˆèŠ‚çœç©ºé—´ã€‚


```c
#include <stdio.h>
#pragma pack(8)//è®¾ç½®é»˜è®¤å¯¹é½æ•°ä¸º8
//ç¼–è¯‘é€‰é¡¹ï¼Œè¡¨ç¤º8å­—èŠ‚å¯¹é½
struct S1
{
    char c1;
    int i;
    char c2;
};
#pragma pack()//å–æ¶ˆè®¾ç½®çš„é»˜è®¤å¯¹é½æ•°ï¼Œè¿˜åŸä¸ºé»˜è®¤
#pragma pack(1)//è®¾ç½®é»˜è®¤å¯¹é½æ•°ä¸º1
struct S2
{
    char c1;
    int i;
    char c2;
};
#pragma pack()//å–æ¶ˆè®¾ç½®çš„é»˜è®¤å¯¹é½æ•°ï¼Œè¿˜åŸä¸ºé»˜è®¤
int main()
{
    //è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ
    printf("%d\n", sizeof(struct S1));
    printf("%d\n", sizeof(struct S2));
    return 0;
}
```

**åç§»é‡è®¡ç®—**

```c
#include<stdio.h>
#define OFFSETOF(type,member) (int)&(((type*)0)->member)
struct S
{
    char a;
    int b;
    char c;
};
int main()
{
    printf("%d\n", OFFSETOF(struct S, a));
    printf("%d\n", OFFSETOF(struct S, b));
    printf("%d\n", OFFSETOF(struct S, c));
    return 0;
}
```

## ä½æ®µ

1. ä½æ®µçš„æˆå‘˜å¯ä»¥æ˜¯ int unsigned int signed int æˆ–è€…æ˜¯ char ï¼ˆå±äºæ•´å½¢å®¶æ—ï¼‰ç±»å‹
2. ä½æ®µçš„ç©ºé—´ä¸Šæ˜¯æŒ‰ç…§éœ€è¦ä»¥4ä¸ªå­—èŠ‚ï¼ˆ int ï¼‰æˆ–è€…1ä¸ªå­—èŠ‚ï¼ˆ char ï¼‰çš„æ–¹å¼æ¥å¼€è¾Ÿçš„ã€‚
3. ä½æ®µæ¶‰åŠå¾ˆå¤šä¸ç¡®å®šå› ç´ ï¼Œä½æ®µæ˜¯ä¸è·¨å¹³å°çš„ï¼Œæ³¨é‡å¯ç§»æ¤çš„ç¨‹åºåº”è¯¥é¿å…ä½¿ç”¨ä½æ®µã€‚

```c
struct S
{
	char a : 3;
	char b : 4;
	char c : 5;
	char d : 4;
};
int main()
{
	struct S s = { 0 };
	s.a = 10;	//00001010	//010
	s.b = 12;	//00001100	//1100
	s.c = 3;	//00000011	//00011
	s.d = 4;	//00000100	//0100
	//ä»¥1å­—èŠ‚å¼€è¾Ÿå†…å­˜ 
	//0110 0010 0000 0011 0000 0100
	//  6   2    0   3    0   4
	return 0;
}
```

**ä½æ®µçš„è·¨å¹³å°é—®é¢˜**

1. int ä½æ®µè¢«å½“æˆæœ‰ç¬¦å·æ•°è¿˜æ˜¯æ— ç¬¦å·æ•°æ˜¯ä¸ç¡®å®šçš„ã€‚
2. ä½æ®µä¸­æœ€å¤§ä½çš„æ•°ç›®ä¸èƒ½ç¡®å®šã€‚ï¼ˆ16ä½æœºå™¨æœ€å¤§16ï¼Œ32ä½æœºå™¨æœ€å¤§32ï¼Œå†™æˆ27ï¼Œåœ¨16ä½æœºå™¨ä¼šå‡ºé—®é¢˜ã€‚
3. ä½æ®µä¸­çš„æˆå‘˜åœ¨å†…å­˜ä¸­ä»å·¦å‘å³åˆ†é…ï¼Œè¿˜æ˜¯ä»å³å‘å·¦åˆ†é…æ ‡å‡†å°šæœªå®šä¹‰ã€‚
4. å½“ä¸€ä¸ªç»“æ„åŒ…å«ä¸¤ä¸ªä½æ®µï¼Œç¬¬äºŒä¸ªä½æ®µæˆå‘˜æ¯”è¾ƒå¤§ï¼Œæ— æ³•å®¹çº³äºç¬¬ä¸€ä¸ªä½æ®µå‰©ä½™çš„ä½æ—¶ï¼Œæ˜¯èˆå¼ƒå‰©ä½™çš„ä½è¿˜æ˜¯åˆ©ç”¨ï¼Œè¿™æ˜¯ä¸ç¡®å®šçš„ã€‚

**ä½æ®µçš„åº”ç”¨**

<img src="https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239399.png" alt="image" style="zoom: 33%;" />

## æšä¸¾

```c
#include<stdio.h>
enum Day//æ˜ŸæœŸ
{
	Mon,	//0
	Tues,	//1
	Wed,	//2
	Thur,	//3
	Fri,	//4
	Sat,	//5
	Sun		//6
};
enum Sex//æ€§åˆ«
{
	MALE = 1,	//1
	FEMALE,	//2
	SECRET	//3
};
enum Color//é¢œè‰²
{
	RED,	//0
	GREEN = 9,//9
	BLUE	//10
};
int main()
{
	enum Day a = Mon;// åªèƒ½æ‹¿æšä¸¾å¸¸é‡ç»™æšä¸¾å˜é‡èµ‹å€¼ï¼Œæ‰ä¸ä¼šå‡ºç°ç±»å‹çš„å·®å¼‚ã€‚
	enum Color b = BLUE;
	b = 11;	//err
	//b æ˜¯enum Colorç±»å‹ï¼Œ11 æ˜¯intç±»å‹
	//è™½ç„¶åœ¨Cè¯­è¨€ç¼–è¯‘ç¯å¢ƒä¸‹æœªæŠ¥é”™ï¼Œä½†å®é™…æ˜¯é”™è¯¯è¯­æ³•ï¼Œåœ¨C++ä¸­ä¼šæŠ¥é”™ã€‚
	printf("%d %d\n", sizeof(enum Day), sizeof(Mon));	//4 4
	return 0;
}
```

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `#define` å®šä¹‰å¸¸é‡ï¼Œä¸ºä»€ä¹ˆéè¦ä½¿ç”¨æšä¸¾ï¼Ÿ

æšä¸¾çš„ä¼˜ç‚¹ï¼š

1. å¢åŠ ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§
2. å’Œ`#define`å®šä¹‰çš„æ ‡è¯†ç¬¦æ¯”è¾ƒæšä¸¾æœ‰ç±»å‹æ£€æŸ¥ï¼Œæ›´åŠ ä¸¥è°¨
3. é˜²æ­¢äº†å‘½åæ±¡æŸ“ï¼ˆå°è£…ï¼‰
4. ä¾¿äºè°ƒè¯•
5. ä½¿ç”¨æ–¹ä¾¿ï¼Œä¸€æ¬¡å¯ä»¥å®šä¹‰å¤šä¸ªå¸¸é‡

## è”åˆ

è”åˆä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„è‡ªå®šä¹‰ç±»å‹ï¼Œè¿™ç§ç±»å‹å®šä¹‰çš„å˜é‡ä¹ŸåŒ…å«ä¸€ç³»åˆ—çš„æˆå‘˜ï¼Œç‰¹å¾æ˜¯**è¿™äº›æˆå‘˜å…¬ç”¨åŒä¸€å—ç©ºé—´**ï¼ˆæ‰€ä»¥è”åˆä¹Ÿå«å…±ç”¨ä½“ï¼‰ã€‚

```c
#include<stdio.h>
union Un
{
	char c;
	int i;
};
int main()
{
	//è”åˆå˜é‡çš„å®šä¹‰
	union Un un;
	//è®¡ç®—è¿ä¸ªå˜é‡çš„å¤§å°
	printf("%d\n", sizeof(un));		//4
	//åœ°å€ç›¸åŒ
	printf("%p\n", &un);//0133FE88
	printf("%p\n", &(un.i));//0133FE88
	printf("%p\n", &(un.c));//0133FE88
	un.i = 0x11223344;
	un.c = 0x55;
	printf("%x\n", un.i);
	//11223355
	return 0;
}
```

**è®¡ç®—è”åˆçš„å¤§å°**

è”åˆçš„å¤§å°è‡³å°‘æ˜¯æœ€å¤§æˆå‘˜çš„å¤§å°ã€‚

å½“æœ€å¤§æˆå‘˜å¤§å°ä¸æ˜¯æœ€å¤§å¯¹é½æ•°çš„æ•´æ•°å€çš„æ—¶å€™ï¼Œå°±è¦å¯¹é½åˆ°æœ€å¤§å¯¹é½æ•°çš„æ•´æ•°å€ã€‚

```c
union Un1
{
	char c[5];	//æ•°ç»„å…ƒç´ çš„ç±»å‹ç®—å¯¹é½æ•° å¯¹é½æ•°æ˜¯1
	int i;		//å¯¹é½æ•°æ˜¯4
};
union Un2
{
	short c[7];	//å¯¹é½æ•°æ˜¯2
	int i;		//å¯¹é½æ•°æ˜¯4
};
int main()
{
	//ä¸‹é¢è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ
	printf("%d\n", sizeof(union Un1));//8
	printf("%d\n", sizeof(union Un2));//16
	return 0;
}
```

```c
åˆ¤æ–­å¤§å°ç«¯ï¼š
#include<stdio.h>
union Un
{
	char c;
	int i;
};
int main()
{
	union Un u;
	u.i = 1;
	if (u.c == 1)
		printf("å°ç«¯\n");
	else
		printf("å¤§ç«¯\n");
	return 0;
}
```

# åŠ¨æ€å†…å­˜ç®¡ç†

## åŠ¨æ€å†…å­˜å‡½æ•°

### `mallocå’Œfree`

```c
void* malloc(size_t size);
```

è¿™ä¸ªå‡½æ•°å‘å†…å­˜ç”³è¯·ä¸€å—è¿ç»­å¯ç”¨çš„ç©ºé—´ï¼Œå¹¶è¿”å›æŒ‡å‘è¿™å—ç©ºé—´çš„æŒ‡é’ˆã€‚

- å¦‚æœå¼€è¾ŸæˆåŠŸï¼Œåˆ™è¿”å›ä¸€ä¸ªæŒ‡å‘å¼€è¾Ÿå¥½ç©ºé—´çš„æŒ‡é’ˆã€‚
- å¦‚æœå¼€è¾Ÿå¤±è´¥ï¼Œåˆ™è¿”å›ä¸€ä¸ª`NULL`æŒ‡é’ˆï¼Œå› æ­¤`malloc`çš„è¿”å›å€¼ä¸€å®šè¦åšæ£€æŸ¥ã€‚
- è¿”å›å€¼çš„ç±»å‹æ˜¯ `void*` ï¼Œæ‰€ä»¥`malloc`å‡½æ•°å¹¶ä¸çŸ¥é“å¼€è¾Ÿç©ºé—´çš„ç±»å‹ï¼Œå…·ä½“åœ¨ä½¿ç”¨çš„æ—¶å€™ä½¿ç”¨è€…è‡ªå·±æ¥å†³å®šã€‚
- å¦‚æœå‚æ•° size ä¸º0ï¼Œ`malloc`çš„è¡Œä¸ºæ˜¯æ ‡å‡†æ˜¯æœªå®šä¹‰çš„ï¼Œå–å†³äºç¼–è¯‘å™¨ã€‚

Cè¯­è¨€æä¾›äº†å¦å¤–ä¸€ä¸ªå‡½æ•°freeï¼Œä¸“é—¨æ˜¯ç”¨æ¥åšåŠ¨æ€å†…å­˜çš„é‡Šæ”¾å’Œå›æ”¶çš„ï¼Œå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š

```c
void free(void* ptr);
```

`free`å‡½æ•°ç”¨æ¥é‡Šæ”¾åŠ¨æ€å¼€è¾Ÿçš„å†…å­˜ã€‚

- å¦‚æœå‚æ•° ptr æŒ‡å‘çš„ç©ºé—´ä¸æ˜¯åŠ¨æ€å¼€è¾Ÿçš„ï¼Œé‚£`free`å‡½æ•°çš„è¡Œä¸ºæ˜¯æœªå®šä¹‰çš„ã€‚
- å¦‚æœå‚æ•° ptr æ˜¯`NULL`æŒ‡é’ˆï¼Œåˆ™å‡½æ•°ä»€ä¹ˆäº‹éƒ½ä¸åšã€‚

```c
#include<stdio.h>
#include<stdlib.h>
#include<errno.h>
#include<string.h>
int main()
{
	int* p = malloc(10 * (sizeof(int)));
	if (p == NULL)
	{
		printf("%s\n", strerror(errno));
		return 1;
		//Not enough space
	}
	int i = 0;
	for (i = 0; i < 10; i++)
	{
		*(p + i) = i + 1;
		printf("%d ", *(p + i));
	}
	printf("\n");
	//å½“åŠ¨æ€ç”³è¯·çš„ç©ºé—´ä¸å†ä½¿ç”¨æ—¶ï¼Œå°±åº”è¯¥è¿˜ç»™æ“ä½œç³»ç»Ÿï¼Œé‡Šæ”¾è¯¥ç©ºé—´ã€‚
	free(p);
	p = NULL;
	return 0;
}
```

### `calloc`

```c
void* calloc(size_t num, size_t size);
```

- å‡½æ•°çš„åŠŸèƒ½æ˜¯ä¸º num ä¸ªå¤§å°ä¸º size çš„å…ƒç´ å¼€è¾Ÿä¸€å—ç©ºé—´ï¼Œ**å¹¶ä¸”æŠŠç©ºé—´çš„æ¯ä¸ªå­—èŠ‚åˆå§‹åŒ–ä¸º0**ã€‚

```c
#include<stdio.h>
#include<stdlib.h>
int main()
{
	int* p = (int*)calloc(10, sizeof(int));
	if (p == NULL)
	{
		printf("%s\n", strerror(errno));
		return 1;
	}
	else
	{
		int i = 0;
		for (i = 0; i < 10; i++)
		{
			printf("%d ", *(p + i));
			//æ¯ä¸ªå­—èŠ‚åˆå§‹åŒ–ä¸º0
		}
	}
	free(p);
	p = NULL;
	return 0;
}
```

### `realloc`

æœ‰æ—¶ä¼šæˆ‘ä»¬å‘ç°è¿‡å»ç”³è¯·çš„ç©ºé—´å¤ªå°äº†ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬åˆä¼šè§‰å¾—ç”³è¯·çš„ç©ºé—´è¿‡å¤§äº†ï¼Œé‚£ä¸ºäº†åˆç†çš„æ—¶å€™å†…å­˜ï¼Œæˆ‘ä»¬ä¸€å®šä¼šå¯¹å†…å­˜çš„å¤§å°åšçµæ´»çš„è°ƒæ•´ã€‚é‚£`realloc` å‡½æ•°å°±å¯ä»¥åšåˆ°å¯¹åŠ¨æ€å¼€è¾Ÿå†…å­˜å¤§å°çš„è°ƒæ•´ã€‚

```c
void* realloc(void* ptr, size_t size);
```

- ptr æ˜¯è¦è°ƒæ•´çš„å†…å­˜åœ°å€
- size è°ƒæ•´ä¹‹åæ–°å¤§å°
- è¿”å›å€¼ä¸ºè°ƒæ•´ä¹‹åçš„å†…å­˜èµ·å§‹ä½ç½®ã€‚
- è¿™ä¸ªå‡½æ•°è°ƒæ•´åŸå†…å­˜ç©ºé—´å¤§å°çš„åŸºç¡€ä¸Šï¼Œè¿˜ä¼šå°†åŸæ¥å†…å­˜ä¸­çš„æ•°æ®ç§»åŠ¨åˆ°æ–°çš„ç©ºé—´ã€‚
- `realloc`åœ¨è°ƒæ•´å†…å­˜ç©ºé—´çš„æ˜¯å­˜åœ¨ä¸¤ç§æƒ…å†µï¼š
  
    æƒ…å†µ1ï¼šè¦æ‰©å±•å†…å­˜å°±ç›´æ¥åŸæœ‰å†…å­˜ä¹‹åç›´æ¥è¿½åŠ ç©ºé—´ï¼ŒåŸæ¥ç©ºé—´çš„æ•°æ®ä¸å‘ç”Ÿå˜åŒ–ã€‚
    
    æƒ…å†µ2ï¼šåŸæœ‰ç©ºé—´ä¹‹åæ²¡æœ‰è¶³å¤Ÿå¤šçš„ç©ºé—´æ—¶ï¼Œæ‰©å±•çš„æ–¹æ³•æ˜¯ï¼šåœ¨å †ç©ºé—´ä¸Šå¦æ‰¾ä¸€ä¸ªåˆé€‚å¤§å°çš„è¿ç»­ç©ºé—´æ¥ä½¿ç”¨ï¼Œ**é‡Šæ”¾æ‰åŸæ¥çš„ç©ºé—´**ã€‚è¿™æ ·å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„å†…å­˜åœ°å€ã€‚
    

```c
#include<stdio.h>
#include<stdlib.h>
int main() {
	int* p = (int*)malloc(5 * sizeof(int));
	if (!p) {
		perror("malloc");
		return 1;
	}
	int i = 0;
	for (i = 0; i < 5; i++)
		*(p + i) = i;
	int* ptr = (int*)realloc(p, 10 * sizeof(int));
	if (ptr)
		p = ptr;
	for (i = 0; i < 10; i++)
		*(p + i) = i;
	free(p);
	p = NULL;
	return 0;
}

int* p = (int*)realloc(NULL, 40);
ç­‰ä»·äº
int* p = (int*)malloc(40);
```

## å¸¸è§çš„åŠ¨æ€å†…å­˜é”™è¯¯

```c
//å¯¹NULLæŒ‡é’ˆçš„è§£å¼•ç”¨æ“ä½œ
void test()
{
	int* p = (int*)malloc(INT_MAX / 4);
	*p = 20;//å¦‚æœpçš„å€¼æ˜¯NULLï¼Œå°±ä¼šæœ‰é—®é¢˜
	free(p);
}

//å¯¹åŠ¨æ€å¼€è¾Ÿç©ºé—´çš„è¶Šç•Œè®¿é—®
void test()
{
	int i = 0;
	int* p = (int*)malloc(10 * sizeof(int));
	if (NULL == p)
	{
		exit(EXIT_FAILURE);
	}
	for (i = 0; i <= 10; i++)
	{
		*(p + i) = i;//å½“iæ˜¯10çš„æ—¶å€™è¶Šç•Œè®¿é—®
	}
	free(p);
}

//å¯¹éåŠ¨æ€å¼€è¾Ÿå†…å­˜ä½¿ç”¨freeé‡Šæ”¾
void test()
{
	int a = 10;
	int* p = &a;
	free(p);//på±äºå±€éƒ¨å˜é‡ï¼Œåœ¨æ ˆåŒºå¼€è¾Ÿï¼Œfreeåªé‡Šæ”¾å †åŒºå¼€è¾Ÿçš„å†…å­˜ç©ºé—´
}

//ä½¿ç”¨freeé‡Šæ”¾ä¸€å—åŠ¨æ€å¼€è¾Ÿå†…å­˜çš„ä¸€éƒ¨åˆ†
void test()
{
	int* p = (int*)malloc(100);
	p++;
	free(p);//pä¸å†æŒ‡å‘åŠ¨æ€å†…å­˜çš„èµ·å§‹ä½ç½®ï¼Œå‘åè·³äº†4ä¸ªå­—èŠ‚ã€‚
	//æ³¨æ„ï¼šp++åpæŒ‡å‘çš„ä½ç½®å°±è·Ÿç€å˜äº†ï¼Œp+iä¸ä¼šæ”¹å˜pæŒ‡å‘çš„ä½ç½®ã€‚
}

//å¯¹åŒä¸€å—åŠ¨æ€å†…å­˜å¤šæ¬¡é‡Šæ”¾
void test()
{
	int* p = (int*)malloc(100);
	free(p);
	free(p);//é‡å¤é‡Šæ”¾
}

//åŠ¨æ€å¼€è¾Ÿå†…å­˜å¿˜è®°é‡Šæ”¾ï¼ˆå†…å­˜æ³„æ¼ï¼‰
void test()
{
	int* p = (int*)malloc(100);
	if (NULL != p)
	{
		*p = 20;
	}
}
int main()
{
	test();
	while (1);
}
```

## ç»å…¸ç¬”è¯•é¢˜

**é¢˜ç›®ä¸€**

```c
void GetMemory(char* p)
{
	p = (char*)malloc(100);
}
void Test(void)
{
	char* str = NULL;
	GetMemory(str);
	strcpy(str, "hello world");	//ç¨‹åºå´©æºƒ
	printf(str);
}
int main()
{
	Test();
	return 0; 
}
//å…³äºç©ºæŒ‡é’ˆä¼ å‚é—®é¢˜:
//strä»¥å€¼çš„å½¢å¼ä¼ é€’ç»™pï¼Œåˆ™è°ƒç”¨GetMemoryå‡½æ•°åpçš„å€¼ä¸ºNULLï¼Œç„¶åå¼€è¾Ÿå†…å­˜ç©ºé—´çš„åœ°å€å†èµ‹å€¼ç»™pï¼Œæ­¤å€¼å¹¶æœªä¼ ç»™str
//GetMemoryç»“æŸååŠ¨æ€å†…å­˜ç©ºé—´æœªé‡Šæ”¾ï¼Œå¹¶ä¸”æ— æ³•æ‰¾åˆ°ï¼Œé€ æˆå†…å­˜æ³„æ¼
æ”¹æ­£1ï¼š
void GetMemory(char** p)
{
	*p = (char*)malloc(100);
}
void Test(void)
{
	char* str = NULL;
	GetMemory(&str);
	strcpy(str, "hello world");
printf(str);
	free(str);
	str = NULL;
}
int main()
{
	Test();
	return 0;
}
```

**é¢˜ç›®äºŒ**

```c
char* GetMemory(void)
{
	char p[] = "hello world";
	return p;
}
void Test(void)
{
	char* str = NULL;
	str = GetMemory();
	printf(str);
}
int main()
{
	Test();
	return 0;
}
//å…³äºè¿”å›æ ˆç©ºé—´åœ°å€çš„é—®é¢˜ï¼š
//åœ¨å‡½æ•°ç»“æŸåï¼Œåœ°å€ç¡®å®ä¼ é€’ç»™äº†strï¼Œä½†åœ°å€ä¸­çš„å†…å®¹å·²ç»è¢«é‡Šæ”¾ï¼Œé€ æˆé‡æŒ‡é’ˆéæ³•è®¿é—®å†…å­˜
æ”¹æ­£ï¼š
char* GetMemory(void)
{
	char* p = "hello world";//å¸¸é‡å­—ç¬¦ä¸²å¹¶ä¸ä¼šéšå‡½æ•°é”€æ¯
	//static char p[] = "hello world";
	return p;
}

void Test(void)
{
	char* str = NULL;
	str = GetMemory(str);
	printf(str);
}
int main()
{
	Test();
	return 0;
}
```

**é¢˜ç›®ä¸‰**

```c
void GetMemory(char** p, int num)
{
	*p = (char*)malloc(num);
}
void Test(void)
{
	char* str = NULL;
	GetMemory(&str, 100);
	strcpy(str, "hello");
	printf(str);
}
int main()
{
	Test();
	return 0;
}
//æœªé‡Šæ”¾ç©ºé—´ï¼Œé€ æˆå†…å­˜æ³„æ¼
void GetMemory(char** p, int num)
{
	*p = (char*)malloc(num);
}
void Test(void)
{
	char* str = NULL;
	GetMemory(&str, 100);
	strcpy(str, "hello");
	printf(str);
	free(str);
	str = NULL;
}
int main()
{
	Test();
	return 0;
}
```

**é¢˜ç›®å››**

```c
void Test(void)
{
	char* str = (char*)malloc(100);
	strcpy(str, "hello");
	free(str);
	if (str != NULL)
	{
		strcpy(str, "world");
		printf(str);
	}
}
int main()
{
	Test();
	return 0;
}
//é‡Šæ”¾ç©ºé—´æ—©äº†ï¼Œstrå˜æˆé‡æŒ‡é’ˆï¼Œéæ³•è®¿é—®å†…å­˜
void Test(void)
{
	char* str = (char*)malloc(100);
	strcpy(str, "hello");
	if (str != NULL)
	{
		strcpy(str, "world");
		printf(str);
	}
	free(str);
	str = NULL;
}
int main()
{
	Test();
	return 0;
}
```

## C/C++ç¨‹åºçš„å†…å­˜å¼€è¾Ÿ

è¯¦è§C++ 5.1ç« èŠ‚

## æŸ”æ€§æ•°ç»„

C99ä¸­ï¼Œç»“æ„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ å…è®¸æ˜¯æœªçŸ¥å¤§å°çš„æ•°ç»„ï¼Œè¿™å°±å«åšã€æŸ”æ€§æ•°ç»„ã€æˆå‘˜ã€‚

```c
typedef struct st_type
{
	int i;
	int a[0];//æŸ”æ€§æ•°ç»„æˆå‘˜
}type_a;
//æœ‰äº›ç¼–è¯‘å™¨ä¼šæŠ¥é”™æ— æ³•ç¼–è¯‘å¯ä»¥æ”¹æˆï¼š
typedef struct st_type
{
	int i;
	int a[];//æŸ”æ€§æ•°ç»„æˆå‘˜
}type_a;
```

**ç‰¹ç‚¹ï¼š**

- ç»“æ„ä¸­çš„æŸ”æ€§æ•°ç»„æˆå‘˜å‰é¢å¿…é¡»è‡³å°‘ä¸€ä¸ªå…¶ä»–æˆå‘˜ã€‚
- `sizeof` è¿”å›çš„è¿™ç§ç»“æ„å¤§å°ä¸åŒ…æ‹¬æŸ”æ€§æ•°ç»„çš„å†…å­˜ã€‚
- åŒ…å«æŸ”æ€§æ•°ç»„æˆå‘˜çš„ç»“æ„ç”¨`malloc`å‡½æ•°è¿›è¡Œå†…å­˜çš„åŠ¨æ€åˆ†é…ï¼Œå¹¶ä¸”åˆ†é…çš„å†…å­˜åº”è¯¥å¤§äºç»“æ„çš„å¤§å°ï¼Œä»¥é€‚åº”æŸ”æ€§æ•°ç»„çš„é¢„æœŸå¤§å°ã€‚

```c
typedef struct st_type
{
	int i;
	int a[0];//æŸ”æ€§æ•°ç»„æˆå‘˜
}type_a;
printf("%d\n", sizeof(type_a));//è¾“å‡ºçš„æ˜¯4
```

**ä½¿ç”¨**

```c
#include<stdio.h>
typedef struct st_type
{
	int i;
	int a[0];//æŸ”æ€§æ•°ç»„æˆå‘˜
}type_a;
int main()
{
	int i = 0;
	type_a* p = (type_a*)malloc(sizeof(type_a) + 100 * sizeof(int));
	if (p == NULL) {
		perror("malloc");
		return 1;
	}
	p->i = 100;
	for (i = 0; i < 100; i++)
	{
		p->a[i] = i;
	}
	free(p);
	p = NULL;
	return 0;
}
```

**æŸ”æ€§æ•°ç»„çš„ä¼˜åŠ¿**

```c
#include<stdio.h>
typedef struct st_type
{
	int i;
	int* a;
}type_a;
int main()
{
	type_a* p = (type_a*)malloc(sizeof(type_a));
	if (p == NULL) {
		perror("malloc::p");
		return 1;
	}
	p->i = 100;
	p->a = (int*)malloc(p->i * sizeof(int));
	if(p->a==NULL) {
		perror("malloc::a");
		return 1;
	}
	int i = 0;
	for (i = 0; i < 100; i++)
		p->a[i] = i;
	free(p->a);
	p->a = NULL;
	free(p);
	p = NULL;
	return 0;
}
```

ç¬¬ä¸€ä¸ªå¥½å¤„æ–¹ä¾¿å†…å­˜é‡Šæ”¾ï¼Œç¬¬äºŒä¸ªå¥½å¤„æœ‰åˆ©äºè®¿é—®é€Ÿåº¦

# æ–‡ä»¶æ“ä½œ

## å®šä¹‰

ç£ç›˜ä¸Šçš„æ–‡ä»¶æ˜¯æ–‡ä»¶ã€‚ä½†æ˜¯åœ¨ç¨‹åºè®¾è®¡ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬è°ˆçš„æ–‡ä»¶æœ‰ä¸¤ç§ï¼šç¨‹åºæ–‡ä»¶ã€æ•°æ®æ–‡ä»¶ï¼ˆä»æ–‡ä»¶åŠŸèƒ½çš„è§’åº¦æ¥åˆ†ç±»çš„ï¼‰ã€‚

- ç¨‹åºæ–‡ä»¶

åŒ…æ‹¬æºç¨‹åºæ–‡ä»¶ï¼ˆåç¼€ä¸º.cï¼‰,ç›®æ ‡æ–‡ä»¶ï¼ˆwindowsç¯å¢ƒåç¼€ä¸º.objï¼‰,å¯æ‰§è¡Œç¨‹åºï¼ˆwindowsç¯å¢ƒåç¼€ä¸º.exeï¼‰ã€‚

- æ•°æ®æ–‡ä»¶

æ ¹æ®æ•°æ®çš„ç»„ç»‡å½¢å¼ï¼Œæ•°æ®æ–‡ä»¶è¢«ç§°ä¸º**æ–‡æœ¬æ–‡ä»¶æˆ–è€…äºŒè¿›åˆ¶æ–‡ä»¶**ã€‚

æ•°æ®åœ¨å†…å­˜ä¸­ä»¥äºŒè¿›åˆ¶çš„å½¢å¼å­˜å‚¨ï¼Œå¦‚æœä¸åŠ è½¬æ¢çš„è¾“å‡ºåˆ°å¤–å­˜ï¼Œå°±æ˜¯**äºŒè¿›åˆ¶æ–‡ä»¶**ã€‚

å¦‚æœè¦æ±‚åœ¨å¤–å­˜ä¸Šä»¥ASCIIç çš„å½¢å¼å­˜å‚¨ï¼Œåˆ™éœ€è¦åœ¨å­˜å‚¨å‰è½¬æ¢ã€‚ä»¥ASCIIå­—ç¬¦çš„å½¢å¼å­˜å‚¨çš„æ–‡ä»¶å°±æ˜¯**æ–‡æœ¬æ–‡ä»¶**ã€‚

- æ–‡ä»¶å

ä¸€ä¸ªæ–‡ä»¶è¦æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ–‡ä»¶æ ‡è¯†ï¼Œä»¥ä¾¿ç”¨æˆ·è¯†åˆ«å’Œå¼•ç”¨ã€‚ æ–‡ä»¶ååŒ…å«3éƒ¨åˆ†ï¼šæ–‡ä»¶è·¯å¾„+æ–‡ä»¶åä¸»å¹²+æ–‡ä»¶åç¼€

ä¾‹å¦‚ï¼š `c:\code\test.txt` ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæ–‡ä»¶æ ‡è¯†å¸¸è¢«ç§°ä¸ºæ–‡ä»¶åã€‚

## æ–‡ä»¶ç¼“å†²åŒº

ANSIC æ ‡å‡†é‡‡ç”¨â€œç¼“å†²æ–‡ä»¶ç³»ç»Ÿâ€å¤„ç†çš„æ•°æ®æ–‡ä»¶çš„ï¼Œæ‰€è°“ç¼“å†²æ–‡ä»¶ç³»ç»Ÿæ˜¯æŒ‡ç³»ç»Ÿè‡ªåŠ¨åœ°åœ¨å†…å­˜ä¸­ä¸ºç¨‹åºä¸­æ¯ä¸€ä¸ªæ­£åœ¨ä½¿ç”¨çš„æ–‡ä»¶å¼€è¾Ÿä¸€å—â€œæ–‡ä»¶ç¼“å†²åŒºâ€ã€‚ä»å†…å­˜å‘ç£ç›˜è¾“å‡ºæ•°æ®ä¼šå…ˆé€åˆ°å†…å­˜ä¸­çš„ç¼“å†²åŒºï¼Œè£…æ»¡ç¼“å†²åŒºåæ‰ä¸€èµ·é€åˆ°ç£ç›˜ä¸Šã€‚å¦‚æœä»ç£ç›˜å‘è®¡ç®—æœºè¯»å…¥æ•°æ®ï¼Œåˆ™ä»ç£ç›˜æ–‡ä»¶ä¸­è¯»å–æ•°æ®è¾“å…¥åˆ°å†…å­˜ç¼“å†²åŒºï¼ˆå……æ»¡ç¼“å†²åŒºï¼‰ï¼Œç„¶åå†ä»ç¼“å†²åŒºé€ä¸ªåœ°å°†æ•°æ®é€åˆ°ç¨‹åºæ•°æ®åŒºï¼ˆç¨‹åºå˜é‡ç­‰ï¼‰ã€‚ç¼“å†²åŒºçš„å¤§å°æ ¹æ®Cç¼–è¯‘ç³»ç»Ÿå†³å®šçš„ã€‚

<img src="https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239400.png" alt="image-20240508200453709" style="zoom: 50%;" />

## æ–‡ä»¶æ‰“å¼€å’Œå…³é—­

**æ–‡ä»¶æŒ‡é’ˆ**ï¼šç¼“å†²æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå…³é”®çš„æ¦‚å¿µæ˜¯â€œæ–‡ä»¶ç±»å‹æŒ‡é’ˆâ€ï¼Œç®€ç§°â€œæ–‡ä»¶æŒ‡é’ˆâ€ã€‚å¤´æ–‡ä»¶æ—¶`stdio.h`

```c
FILE* pf;	//æ–‡ä»¶æŒ‡é’ˆå˜é‡
```

**æ‰“å¼€å’Œå…³é—­æ–‡ä»¶**

æ–‡ä»¶åœ¨è¯»å†™ä¹‹å‰åº”è¯¥å…ˆæ‰“å¼€æ–‡ä»¶ï¼Œåœ¨ä½¿ç”¨ç»“æŸä¹‹ååº”è¯¥å…³é—­æ–‡ä»¶ã€‚

```c
//æ‰“å¼€æ–‡ä»¶
FILE* fopen(const char* filename, const char* mode);
//å…³é—­æ–‡ä»¶
int fclose(FILE * æµ);
```

`fopen`ï¼šå¦‚æœæ–‡ä»¶æˆåŠŸæ‰“å¼€ï¼Œè¯¥å‡½æ•°å°†è¿”å›æŒ‡å‘ FILE å¯¹è±¡çš„æŒ‡é’ˆï¼Œè¯¥å¯¹è±¡å¯ç”¨äºåœ¨å°†æ¥çš„æ“ä½œä¸­æ ‡è¯†æµã€‚æ‰“å¼€å¤±è´¥åˆ™è¿”å› `NULL`

`fclose`ï¼šå¦‚æœ æµ æˆåŠŸå…³é—­ï¼Œåˆ™è¿”å›0ã€‚å¤±è´¥æ—¶ï¼Œè¿”å› `EOF`ã€‚

åªè¦æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªæ–‡ä»¶æµã€‚æœ‰äº†æ–‡ä»¶æµä¹‹åï¼Œå°±å¯ä»¥å¯¹æ–‡ä»¶è¿›è¡Œç›¸åº”çš„è¯»å†™æ“ä½œã€‚

| æ–‡ä»¶ä½¿ç”¨æ–¹å¼ | å«ä¹‰ | å¦‚æœæŒ‡å®šæ–‡ä»¶ä¸å­˜åœ¨ |
| --- | --- | --- |
| "r"ï¼ˆåªè¯»ï¼‰ | ä¸ºäº†è¾“å…¥æ•°æ®ï¼Œæ‰“å¼€ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ–‡æœ¬æ–‡ä»¶ | å‡ºé”™ |
| "w"ï¼ˆåªå†™ï¼‰ | ä¸ºäº†è¾“å‡ºæ•°æ®ï¼Œæ‰“å¼€ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ | å»ºç«‹ä¸€ä¸ªæ–°çš„æ–‡ä»¶ |
| "a"ï¼ˆè¿½åŠ ï¼‰ | å‘æ–‡æœ¬æ–‡ä»¶å°¾æ·»åŠ æ•°æ® | å‡ºé”™ |
| "rb"ï¼ˆåªè¯»ï¼‰ | ä¸ºäº†è¾“å…¥æ•°æ®ï¼Œæ‰“å¼€ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ | å‡ºé”™ |
| "wb"ï¼ˆåªå†™ï¼‰ | ä¸ºäº†è¾“å‡ºæ•°æ®ï¼Œæ‰“å¼€ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ | å»ºç«‹ä¸€ä¸ªæ–°çš„æ–‡ä»¶ |
| "ab"ï¼ˆè¿½åŠ ï¼‰ | å‘ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å°¾æ·»åŠ æ•°æ® | å‡ºé”™ |
| "r+"ï¼ˆè¯»å†™ï¼‰ | ä¸ºäº†è¯»å’Œå†™ï¼Œæ‰“å¼€ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ | å‡ºé”™ |
| "w+"ï¼ˆè¯»å†™ï¼‰ | ä¸ºäº†è¯»å’Œå†™ï¼Œå»ºè®®ä¸€ä¸ªæ–°çš„æ–‡ä»¶ | å»ºç«‹ä¸€ä¸ªæ–°çš„æ–‡ä»¶ |
| "a+"ï¼ˆè¯»å†™ï¼‰ | æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶å°¾è¿›è¡Œè¯»å†™ | å»ºç«‹ä¸€ä¸ªæ–°çš„æ–‡ä»¶ |
| "rb+"ï¼ˆè¯»å†™ï¼‰ | ä¸ºäº†è¯»å’Œå†™æ‰“å¼€ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ | å‡ºé”™ |
| "wb+"ï¼ˆè¯»å†™ï¼‰ | ä¸ºäº†è¯»å’Œå†™ï¼Œæ–°å»ºä¸€ä¸ªæ–°çš„äºŒè¿›åˆ¶æ–‡ä»¶ | å»ºç«‹ä¸€ä¸ªæ–°çš„æ–‡ä»¶ |
| "ab+"ï¼ˆè¯»å†™ï¼‰ | æ‰“å¼€ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶å°¾è¿›è¡Œè¯»å’Œå†™ | å»ºç«‹ä¸€ä¸ªæ–°çš„æ–‡ä»¶ |

> ç»å¯¹è·¯å¾„å†™æ³•
> ç”±äºæ–œæ \\åœ¨Cè¯­è¨€ä¸­æ˜¯ä½œä¸ºè½¬ä¹‰å­—ç¬¦æ¥ä½¿ç”¨çš„ï¼Œå› æ­¤ï¼Œå¿…é¡»ç”¨ \\\\ ï¼Œæ‰èƒ½è¡¨ç¤ºä¸€ä¸ªæ–œæ å­—ç¬¦æœ¬èº«
> fopen("F:\\\\cs\\\\Code\\\\C\\\\C\\\\text.txt", "r");
>
> ç›¸å¯¹è·¯å¾„å†™æ³•
> fopen("text.txt", "r");//å½“å‰ç›®å½•ä¸­çš„æ–‡ä»¶
>  .. è¡¨ç¤ºä¸Šä¸€çº§è·¯å¾„
>  .  è¡¨ç¤ºå½“å‰è·¯å¾„
> fopen("../test.txt", "r");//ä¸Šä¸€çº§è·¯å¾„
> fopen("../../test.txt", "r");//ä¸Šä¸Šä¸€çº§è·¯å¾„

```c
#include<stdio.h>
int main()
{
	FILE* pf = fopen("text.txt", "r");
	if (!pf)
	{
		perror("fopen");
		//No such file or directory
		return 1;
	}
	fclose(pf);
	pf = NULL;
	return 0;
}
```

**æ ‡å‡†æ–‡ä»¶æµ**

Cè¯­è¨€è¿˜æœ‰3ä¸ªç‰¹æ®Šçš„æ–‡ä»¶æµ**ï¼Œå³æ ‡å‡†è¾“å…¥æµï¼ˆstdinï¼‰ã€æ ‡å‡†è¾“å‡ºæµï¼ˆstdoutï¼‰å’Œæ ‡å‡†é”™è¯¯è¾“å‡ºæµï¼ˆstderrï¼‰ã€‚**

æ ‡å‡†è¾“å…¥æµæ˜¯å’Œé”®ç›˜ç›¸å…³è”çš„ï¼Œæ ‡å‡†è¾“å‡ºæµå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºæµæ˜¯å’Œæ§åˆ¶å°çª—å£ç›¸å…³è”çš„ã€‚

## æ–‡ä»¶çš„é¡ºåºè¯»å†™

| åŠŸèƒ½ | å‡½æ•°å | é€‚ç”¨äº | å‡½æ•°å | é€‚ç”¨äº |
| --- | --- | --- | --- | --- |
| å­—ç¬¦è¾“å…¥å‡½æ•° | fgetc | æ‰€æœ‰çš„è¾“å…¥æµ | getchar | stdin |
| å­—ç¬¦è¾“å‡ºå‡½æ•° | fputc | æ‰€æœ‰çš„è¾“å‡ºæµ | putchar | stdout |
| æ–‡æœ¬è¡Œè¾“å…¥å‡½æ•° | fgets | æ‰€æœ‰çš„è¾“å…¥æµ | gets | stdin |
| æ–‡æœ¬è¡Œè¾“å‡ºå‡½æ•° | fputs | æ‰€æœ‰çš„è¾“å‡ºæµ | puts | stdout |
| æ ¼å¼åŒ–è¾“å…¥å‡½æ•° | fscanf | æ‰€æœ‰çš„è¾“å…¥æµ | scanf | stdin |
| æ ¼å¼åŒ–è¾“å‡ºå‡½æ•° | fprintf | æ‰€æœ‰çš„è¾“å‡ºæµ | printf | stdout |
| äºŒè¿›åˆ¶è¾“å…¥å‡½æ•° | fread | æ–‡ä»¶ |  |  |
| äºŒè¿›åˆ¶è¾“å‡ºå‡½æ•° | fwrite | æ–‡ä»¶ |  |  |
| æ ¼å¼åŒ–è¾“å…¥å‡½æ•° | sscanf | ç¼“å†²åŒº |  |  |
| æ ¼å¼åŒ–è¾“å‡ºå‡½æ•° | sprintf | ç¼“å†²åŒº |  |  |

### å­—ç¬¦è¾“å…¥è¾“å‡ºå‡½æ•°`fgetc fputc getchar putchar`

- **`fgetc`**

  ```c
  int fgetc ( FILE * stream );
  ```

  è¿”å›æŒ‡å®šæµçš„å†…éƒ¨æ–‡ä»¶ä½ç½®æŒ‡ç¤ºå™¨å½“å‰æŒ‡å‘çš„å­—ç¬¦ï¼ˆæå‡ä¸ºÂ intÂ å€¼ï¼‰ã€‚ç„¶åï¼Œå†…éƒ¨æ–‡ä»¶ä½ç½®æŒ‡ç¤ºå™¨å°†å‰è¿›åˆ°ä¸‹ä¸€ä¸ªå­—ç¬¦ã€‚
  å¦‚æœè°ƒç”¨æ—¶æµä½äºæ–‡ä»¶æœ«å°¾ï¼Œåˆ™è¯¥å‡½æ•°å°†è¿”å›Â `EOF`Â å¹¶è®¾ç½®æµçš„æ–‡ä»¶æœ«å°¾æŒ‡ç¤ºå™¨Â ï¼ˆ`feof`ï¼‰ ã€‚å¦‚æœå‘ç”Ÿè¯»å–é”™è¯¯ï¼Œè¯¥å‡½æ•°å°†è¿”å›Â `EOF`Â å¹¶è®¾ç½®æµçš„é”™è¯¯æŒ‡ç¤ºå™¨Â ï¼ˆ`ferror`ï¼‰ã€‚

- **`fputs`**

  ```c
  int fputc ( int character, FILE * stream );
  ```

  å°†å­—ç¬¦å†™å…¥æµå¹¶æ¨è¿›ä½ç½®æŒ‡ç¤ºå™¨ã€‚
  æˆåŠŸåï¼Œå°†è¿”å›æ‰€å†™å­—ç¬¦ã€‚å¦‚æœå‘ç”Ÿå†™å…¥é”™è¯¯ï¼Œåˆ™è¿”å›`EOF`å¹¶è®¾ç½®é”™è¯¯æŒ‡ç¤ºå™¨ï¼ˆ`ferror`ï¼‰ã€‚

- **`getchar`**

  ```c
  int getchar ( void );
  ```

  è¿”å›æ ‡å‡†è¾“å…¥`stdin`ä¸­çš„ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼ˆæå‡ä¸º int å€¼ï¼‰ã€‚
  å¦‚æœè°ƒç”¨æ—¶æµä½äºæ–‡ä»¶æœ«å°¾ï¼Œåˆ™è¯¥å‡½æ•°å°†è¿”å›Â `EOF`Â å¹¶è®¾ç½®æµçš„æ–‡ä»¶æœ«å°¾æŒ‡ç¤ºå™¨Â ï¼ˆ`feof`ï¼‰ ã€‚å¦‚æœå‘ç”Ÿè¯»å–é”™è¯¯ï¼Œè¯¥å‡½æ•°å°†è¿”å›Â `EOF`Â å¹¶è®¾ç½®æµçš„é”™è¯¯æŒ‡ç¤ºå™¨Â ï¼ˆ`ferror`ï¼‰ã€‚

- **`putchar`**

  ```c
  int putchar ( int character );
  ```

  å°†å­—ç¬¦å†™å…¥æ ‡å‡†è¾“å‡ºÂ `stdout`ã€‚
  æˆåŠŸåï¼Œå°†è¿”å›æ‰€å†™å­—ç¬¦ã€‚å¦‚æœå‘ç”Ÿå†™å…¥é”™è¯¯ï¼Œåˆ™è¿”å›`EOF`å¹¶è®¾ç½®*é”™è¯¯æŒ‡ç¤ºå™¨*ï¼ˆ`ferror`ï¼‰ã€‚

```c
#include<stdio.h>
int main()
{
	//fputc
	char buf1[] = "hello world";
	FILE* pf = fopen("test.txt", "w");
	if (!pf)
	{
		perror("fopen");
		return 1;
	}
	char* p1 = buf1;
	while (*p1) {
		fputc(*p1, pf);
		p1++;
	}
	fclose(pf);
	pf = NULL;

	///fgetc
	char buf2[50] = { 0 };
	pf = fopen("test.txt", "r");
	if (!pf)
	{
		perror("fopen");
		return 1;
	}
	char* p2 = buf2;
	while ((*p2 = fgetc(pf)) != EOF)
		p2++;
	*p2 = '\0';
	printf("%s\n", buf2);
	fclose(pf);
	pf = NULL;
	return 0;
}
```

### æ–‡æœ¬è¡Œè¾“å…¥è¾“å‡ºå‡½æ•°`fgets fputs gets puts`

- **`fgets`**

  ```c
  char * fgets(char* str, int num, FILE * stream);
  ```

  ä»æµä¸­è¯»å–å­—ç¬¦ï¼Œå¹¶å°†å®ƒä»¬ä½œä¸ºå­—ç¬¦ä¸²å­˜å‚¨åˆ° str ä¸­ï¼Œç›´åˆ°è¯»å– **num-1**ä¸ªå­—ç¬¦æˆ–**åˆ°è¾¾æ¢è¡Œç¬¦æˆ–æ–‡ä»¶æœªå°¾**ã€‚
  **æ¢è¡Œç¬¦**ä½¿ `fgets` åœæ­¢è¯»å–ï¼Œä½†å®ƒè¢«å‡½æ•°è§†ä¸ºæœ‰æ•ˆå­—ç¬¦ï¼Œå¹¶åŒ…å«åœ¨**å¤åˆ¶åˆ° str çš„å­—ç¬¦ä¸²ä¸­**ã€‚**`â€˜\0â€™`å­—ç¬¦ä¼šè‡ªåŠ¨é™„åŠ åˆ°å¤åˆ¶åˆ° str** çš„å­—ç¬¦ä¹‹åã€‚
  æˆåŠŸåï¼Œè¯¥å‡½æ•°è¿”å› strã€‚
  å¦‚æœåœ¨å°è¯•è¯»å–å­—ç¬¦æ—¶é‡åˆ°æ–‡ä»¶æœªå°¾ï¼Œåˆ™è®¾ç½® `eof` æŒ‡ç¤ºç¬¦(`feof`)ã€‚å¦‚æœåœ¨è¯»å–ä»»ä½•å­—ç¬¦ä¹‹å‰å‘ç”Ÿè¿™ç§æƒ…å†µï¼Œåˆ™è¿”å›çš„æŒ‡é’ˆä¸º`NULL`(å¹¶ä¸” str çš„å†…å®¹ä¿æŒä¸å˜)ã€‚
  å¦‚æœå‘ç”Ÿè¯»å–é”™è¯¯ï¼Œåˆ™è®¾ç½®é”™è¯¯æŒ‡ç¤ºç¬¦(`ferror`)ï¼Œå¹¶è¿”å›`NULL`(ä½† str æŒ‡å‘çš„å†…å®¹å¯èƒ½å·²æ›´æ”¹)ã€‚

- **`fputs`**

  ```c
  int fputs(const char* str, FILE * stream);
  ```

  å°† str æŒ‡å‘çš„å­—ç¬¦ä¸²å†™å…¥æµã€‚è¯¥å‡½æ•°ä»æŒ‡å®šçš„åœ°å€strå¼€å§‹å¤åˆ¶ï¼Œç›´åˆ°åˆ°è¾¾`â€˜\0â€™`å­—ç¬¦ã€‚æ­¤`â€˜\0â€™`å­—ç¬¦ä¸ä¼šå¤åˆ¶åˆ°æµä¸­ã€‚
  æˆåŠŸåï¼Œå°†è¿”å›ä¸€ä¸ªéè´Ÿå€¼ã€‚
  å‡ºé”™æ—¶ï¼Œè¯¥å‡½æ•°è¿”å› `EOF` å¹¶è®¾ç½®é”™è¯¯æŒ‡ç¤ºå™¨(`ferror`)ã€‚

- **`gets`**ï¼Œæ­¤å‡½æ•°åœ¨ C æˆ– C++ ä¸­ä¸å†å¯ç”¨ï¼ˆä» C11 å’Œ C++ 14 å¼€å§‹ï¼‰

  ```c
  char * gets ( char * str );
  ```

  ä»æ ‡å‡†è¾“å…¥`stdin`è¯»å–å­—ç¬¦ï¼Œå¹¶å°†å®ƒä»¬ä½œä¸ºå­—ç¬¦ä¸²å­˜å‚¨åˆ° str ä¸­ï¼Œç›´åˆ°åˆ°è¾¾æ¢è¡Œç¬¦æˆ–æ–‡ä»¶æœ«å°¾ã€‚**æ¢è¡Œç¬¦ä¸ä¼šå¤åˆ¶åˆ° str ä¸­ã€‚`â€˜\0â€™`å­—ç¬¦ä¼šè‡ªåŠ¨é™„åŠ åˆ°å¤åˆ¶åˆ° str çš„å­—ç¬¦ä¹‹åã€‚**
  æˆåŠŸåï¼Œè¯¥å‡½æ•°è¿”å› strã€‚
  å¦‚æœåœ¨å°è¯•è¯»å–å­—ç¬¦æ—¶é‡åˆ°æ–‡ä»¶æœªå°¾ï¼Œåˆ™è®¾ç½® `eof` æŒ‡ç¤ºç¬¦(`feof`)ã€‚å¦‚æœåœ¨è¯»å–ä»»ä½•å­—ç¬¦ä¹‹å‰å‘ç”Ÿè¿™ç§æƒ…å†µï¼Œåˆ™è¿”å›çš„æŒ‡é’ˆä¸º`NULL`(å¹¶ä¸” str çš„å†…å®¹ä¿æŒä¸å˜)ã€‚
  å¦‚æœå‘ç”Ÿè¯»å–é”™è¯¯ï¼Œåˆ™è®¾ç½®é”™è¯¯æŒ‡ç¤ºç¬¦(`ferror`)ï¼Œå¹¶è¿”å›`NULL`(ä½† str æŒ‡å‘çš„å†…å®¹å¯èƒ½å·²æ›´æ”¹)ã€‚

- **`puts`**ï¼Œæ­¤å‡½æ•°åœ¨ C æˆ– C++ ä¸­ä¸å†å¯ç”¨ï¼ˆä» C11 å’Œ C++ 14 å¼€å§‹ï¼‰

  ```c
  int puts ( const char * str );
  ```

  å°† str æŒ‡å‘çš„å­—ç¬¦ä¸²å†™å…¥æ ‡å‡†è¾“å‡º`stdout`å¹¶**é™„åŠ æ¢è¡Œç¬¦ **ã€‚è¯¥å‡½æ•°ä»æŒ‡å®šçš„åœ°å€ (str)å¼€å§‹å¤åˆ¶ï¼Œç›´åˆ°åˆ°è¾¾`â€˜\0â€™` å­—ç¬¦ã€‚`â€˜\0â€™` å­—ç¬¦ä¸ä¼šå¤åˆ¶åˆ°æµä¸­ã€‚
  æˆåŠŸåï¼Œå°†è¿”å›ä¸€ä¸ªéè´Ÿå€¼ã€‚
  å‡ºé”™æ—¶ï¼Œè¯¥å‡½æ•°è¿”å› `EOF` å¹¶è®¾ç½®é”™è¯¯æŒ‡ç¤ºå™¨(`ferror`)ã€‚

```c
#include<stdio.h>
int main()
{
	//fputs
	FILE* pf = fopen("text.txt", "w");
	if (!pf)
	{
		perror("fopen");
		return 1;
	}
	char str[] = "FUCK YOU NVDIA";
	fputs(str, pf);
	fclose(pf);
	pf = NULL;
	//fgets
	char buf[256] = { 0 };
	pf = fopen("text.txt", "r");
	if (!pf)
	{
		perror("fopen");
		return 1;
	}
	while (fgets(buf, 256, pf))
		puts(buf);
	fclose(pf);
	pf = NULL;
	return 0;
}
```

### æ ¼å¼åŒ–è¾“å…¥è¾“å‡ºå‡½æ•°`fscanf fprintf scanf printf sscanf sprintf`

- **`fscanf`**

  ```c
  int fscanf ( FILE * stream, const char * format, ... );
  ```

  ä»æµä¸­è¯»å–æ•°æ®ï¼Œå¹¶æ ¹æ®å‚æ•°æ ¼å¼å°†å®ƒä»¬å­˜å‚¨åˆ°å…¶ä»–å‚æ•°æ‰€æŒ‡å‘çš„ä½ç½®ã€‚
  æˆåŠŸåï¼Œè¯¥å‡½æ•°è¿”å›æˆåŠŸå¡«å……çš„å‚æ•°åˆ—è¡¨çš„é¡¹æ•°ã€‚æ­¤è®¡æ•°å¯èƒ½ä¸é¢„æœŸçš„é¡¹ç›®æ•°åŒ¹é…ï¼Œä¹Ÿå¯èƒ½ç”±äºåŒ¹é…å¤±è´¥ã€è¯»å–é”™è¯¯æˆ–æ–‡ä»¶æœ«å°¾çš„èŒƒå›´è€Œæ›´å°‘ï¼ˆç”šè‡³ä¸ºé›¶ï¼‰ã€‚
  å¦‚æœåœ¨è¯»å–æ—¶å‘ç”Ÿè¯»å–é”™è¯¯æˆ–åˆ°è¾¾æ–‡ä»¶æœ«å°¾ï¼Œåˆ™è®¾ç½®æ­£ç¡®çš„æŒ‡ç¤ºå™¨ï¼ˆ`feof`æˆ–`ferror`ï¼‰ã€‚è€Œä¸”ï¼Œå¦‚æœåœ¨æˆåŠŸè¯»å–ä»»ä½•æ•°æ®ä¹‹å‰å‘ç”Ÿä»»ä½•æƒ…å†µï¼Œåˆ™è¿”å›`EOF`ã€‚

- **`fprintf`**

  ```c
  int fprintf ( FILE * stream, const char * format, ...);
  ```

  å°†æŒ‰æ ¼å¼æŒ‡å‘çš„å­—ç¬¦ä¸²å†™å…¥æµã€‚
  æˆåŠŸåï¼Œå°†è¿”å›å†™å…¥çš„å­—ç¬¦æ€»æ•°ã€‚
  å¦‚æœå‘ç”Ÿå†™å…¥é”™è¯¯ï¼Œåˆ™è®¾ç½®é”™è¯¯æŒ‡ç¤ºç¬¦ï¼ˆ`ferror`ï¼‰ å¹¶è¿”å›è´Ÿæ•°ã€‚

- **`scanf`**

  ```c
  int scanf ( const char * format, ... );
  ```

  ä»Â `stdin`Â è¯»å–æ•°æ®ï¼Œå¹¶æ ¹æ®å‚æ•°æ ¼å¼å°†å®ƒä»¬å­˜å‚¨åˆ°ç›¸åº”çš„å˜é‡ã€‚**è¯¥å‡½æ•°å°†è¯»å–å¹¶å¿½ç•¥åœ¨ä¸‹ä¸€ä¸ªéç©ºæ ¼å­—ç¬¦ä¹‹å‰é‡åˆ°çš„ä»»ä½•ç©ºæ ¼å­—ç¬¦ï¼ˆç©ºæ ¼å­—ç¬¦åŒ…æ‹¬ç©ºæ ¼ã€æ¢è¡Œç¬¦å’Œåˆ¶è¡¨ç¬¦ï¼‰**
  **æˆåŠŸåï¼Œè¯¥å‡½æ•°è¿”å›æˆåŠŸå¡«å……çš„å‚æ•°åˆ—è¡¨çš„é¡¹æ•°ã€‚**æ­¤è®¡æ•°å¯èƒ½ä¸é¢„æœŸçš„é¡¹ç›®æ•°åŒ¹é…ï¼Œä¹Ÿå¯èƒ½ç”±äºåŒ¹é…å¤±è´¥ã€è¯»å–é”™è¯¯æˆ–æ–‡ä»¶æœ«å°¾çš„èŒƒå›´è€Œæ›´å°‘ï¼ˆç”šè‡³ä¸ºé›¶ï¼‰ã€‚
  å¦‚æœåœ¨è¯»å–æ—¶å‘ç”Ÿè¯»å–é”™è¯¯æˆ–åˆ°è¾¾æ–‡ä»¶æœ«å°¾ï¼Œåˆ™è®¾ç½®æ­£ç¡®çš„æŒ‡ç¤ºå™¨ï¼ˆ`feof`æˆ–`ferror`ï¼‰ã€‚è€Œä¸”ï¼Œå¦‚æœåœ¨æˆåŠŸè¯»å–ä»»ä½•æ•°æ®ä¹‹å‰å‘ç”Ÿä»»ä½•æƒ…å†µï¼Œåˆ™è¿”å›`EOF`ã€‚

- **`printf`**

  ```c
  int printf ( const char * format, ... );
  ```

  å°†æ ¼å¼æŒ‡å‘çš„å­—ç¬¦ä¸²å†™å…¥æ ‡å‡†è¾“å‡º `stdout`ã€‚
  æˆåŠŸåï¼Œå°†è¿”å›å†™å…¥çš„å­—ç¬¦æ€»æ•°ã€‚å¦‚æœå‘ç”Ÿå†™å…¥é”™è¯¯ï¼Œåˆ™è®¾ç½®é”™è¯¯æŒ‡ç¤ºç¬¦ï¼ˆ`ferror`ï¼‰ å¹¶è¿”å›è´Ÿæ•°ã€‚

- **`sscanf`**

  ```c
  int sscanf ( const char * s, const char * format, ...);
  ```

  ä»strè¯»å–æ•°æ®ï¼Œå¹¶æ ¹æ®å‚æ•°*æ ¼å¼*å°†å®ƒä»¬å­˜å‚¨åˆ°é™„åŠ å‚æ•°ç»™å®šçš„ä½ç½®ï¼Œå°±åƒä½¿ç”¨Â `scanf`Â ä¸€æ ·ã€‚
  æˆåŠŸåï¼Œè¯¥å‡½æ•°è¿”å›æˆåŠŸå¡«å……çš„å‚æ•°åˆ—è¡¨çš„é¡¹æ•°ã€‚æ­¤è®¡æ•°å¯èƒ½ä¸é¢„æœŸçš„é¡¹ç›®æ•°åŒ¹é…ï¼Œä¹Ÿå¯èƒ½ç”±äºåŒ¹é…å¤±è´¥ã€è¯»å–é”™è¯¯æˆ–æ–‡ä»¶æœ«å°¾çš„èŒƒå›´è€Œæ›´å°‘ï¼ˆç”šè‡³ä¸ºé›¶ï¼‰ã€‚å¦‚æœåœ¨æˆåŠŸè¯»å–ä»»ä½•æ•°æ®ä¹‹å‰å‘ç”Ÿè¾“å…¥å¤±è´¥ï¼Œåˆ™è¿”å›EOFã€‚

- **`sprintf`**

  ```c
  int sprintf ( char * str, const char * format, ... );
  ```

  å°†å­—ç¬¦ä¸²å­˜å‚¨åœ¨ str æŒ‡å‘çš„ç¼“å†²åŒºã€‚ç¼“å†²åŒºçš„å¤§å°åº”è¶³å¤Ÿå¤§ï¼Œä»¥åŒ…å«æ•´ä¸ªç”Ÿæˆçš„å­—ç¬¦ä¸²ã€‚`â€˜\0â€™`å­—ç¬¦ä¼šè‡ªåŠ¨è¿½åŠ åœ¨å†…å®¹ä¹‹åã€‚
  æˆåŠŸåï¼Œå°†è¿”å›å†™å…¥çš„å­—ç¬¦æ€»æ•°ã€‚æ­¤è®¡æ•°ä¸åŒ…æ‹¬è‡ªåŠ¨è¿½åŠ åœ¨å­—ç¬¦ä¸²æœ«å°¾çš„`â€˜\0â€™`å­—ç¬¦ã€‚å¤±è´¥æ—¶ï¼Œè¿”å›è´Ÿæ•°ã€‚

```c
#include<stdio.h>
typedef struct STU
{
	int num;
	char name[20];
	float score;
}STU;

int main()
{
	//fprintf
	STU stu1[] = { {1,"zhangsan",95.5},{2,"lisi",97.8},{3,"wangwu",60.0} };
	FILE* pf = fopen("test.txt", "w");
	int sz = sizeof(stu1) / sizeof(stu1[0]);
	if (!pf)
	{
		perror("fopen");
		return 1;
	}
	int i = 0;
	for (i = 0; i < sz; i++)
		fprintf(pf, "%-3d %-10s %-3.1f\n", stu1[i].num, stu1[i].name, stu1[i].score);
	fclose(pf);
	pf = NULL;
	//fscanf
	pf = fopen("test.txt", "r");
	if (!pf)
	{
		perror("fopen");
		return 1;
	}
	STU stu2[5] = { 0 };
	i = 0;
	while (fscanf(pf, "%d%s%f", &stu2[i].num, stu2[i].name, &stu2[i].score) != EOF)
	{
		printf("%-3d %-10s %-3.1f\n", stu2[i].num, stu2[i].name, stu2[i].score);
		i++;
	}
	fclose(pf);
	pf = NULL;
	return 0;
}
```

```c
#include<stdio.h>
typedef struct STU
{
	int num;
	char name[20];
	float score;
}STU;
int main()
{
	STU stu1 = { 1,"zhangsan",95.5 };
	char buf[1024];
	int i = sprintf(buf, "%d %s %f\n", stu1.num, stu1.name, stu1.score);
	printf("%s%d\n", buf, i);	//21ä¸ªå­—ç¬¦åŒ…æ‹¬ç©ºæ ¼å’Œæ¢è¡Œ
	STU stu2 = { 0 };
	sscanf(buf, "%d%s%f", &(stu2.num), stu2.name, &(stu2.score));
	printf("output : %d %s %f\n", stu2.num, stu2.name, stu2.score);
	return 0;
}
```

### äºŒè¿›åˆ¶è¾“å…¥è¾“å‡ºå‡½æ•°`fwrite fread`

- **`fread`**

  ```c
  size_t fread(void* ptr, size_t size, size_t count, FILE * stream);
  ```


  ä»æµä¸­è¯»å– count ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ çš„å¤§å°ä¸ºå­—èŠ‚å¤§å°ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åœ¨ ptr æŒ‡å®šçš„å†…å­˜å—ä¸­ã€‚æµçš„ä½ç½®æŒ‡ç¤ºå™¨æŒ‰è¯»å–çš„æ€»å­—èŠ‚æ•°å‰è¿›ã€‚
  è¿”å›æˆåŠŸè¯»å–çš„å…ƒç´ æ€»æ•°ã€‚å¦‚æœæ­¤æ•°å­—ä¸ count å‚æ•°ä¸åŒï¼Œåˆ™è¡¨ç¤ºè¯»å–æ—¶å‘ç”Ÿè¯»å–é”™è¯¯æˆ–åˆ°è¾¾æ–‡ä»¶æœªå°¾ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œéƒ½è®¾ç½®äº†æ­£ç¡®çš„æŒ‡æ ‡ï¼Œå¯ä»¥åˆ†åˆ«ä½¿ç”¨`ferror` å’Œ `feof` è¿›è¡Œæ£€æŸ¥ã€‚
  å¦‚æœ size æˆ– count ä¸ºé›¶ï¼Œåˆ™è¯¥å‡½æ•°è¿”å›é›¶ï¼Œå¹¶ä¸” ptr æŒ‡å‘çš„æµçŠ¶æ€å’Œå†…å®¹ä¿æŒä¸å˜ã€‚

- **`fwrite`**

  ```c
  size_t fwrite(const void* ptr, size_t size, size_t count, FILE * stream);
  ```

  ä» ptr æŒ‡å‘çš„å†…å­˜å—è¯»å–countä¸ªå…ƒç´ æ¥ç€å†™å…¥æµï¼Œæ¯ä¸ªå…ƒç´ çš„å¤§å°ä¸ºå­—èŠ‚å¤§å°ã€‚æµçš„ä½ç½®æŒ‡ç¤ºå™¨æŒ‰å†™å…¥çš„æ€»å­—èŠ‚æ•°å‰è¿›ã€‚
  è¿”å›æˆåŠŸå†™å…¥çš„å…ƒç´ æ€»æ•°ã€‚å¦‚æœæ­¤æ•°å­—ä¸ count å‚æ•°ä¸åŒï¼Œåˆ™å†™å…¥é”™è¯¯ä¼šé˜»æ­¢å‡½æ•°å®Œæˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†ä¸ºæµè®¾ç½®é”™è¯¯æŒ‡ç¤ºå™¨(`ferror`)ã€‚
  å¦‚æœ size æˆ– count ä¸ºé›¶ï¼Œåˆ™å‡½æ•°è¿”å›é›¶ï¼Œé”™è¯¯æŒ‡ç¤ºå™¨ä¿æŒä¸å˜ã€‚

```c
#include<stdio.h>
typedef struct
{
	char name[20];
	short age;
	char sex[6];
}Info;
int main()
{
	//fwrite
	Info a1[] = { {"zhangsan",18,"male"} ,{"lisi",20,"female"},{"wangwu",38,"male"} };
	FILE* pf = fopen("test.dat", "wb");
	int sz = sizeof(a1) / sizeof(a1[0]);
	if (!pf) {
		perror("fopen");
		return 1;
	}
	if (fwrite(a1, sizeof(Info), sz, pf) == sz)
		printf("File wirtten successfully!\n");
	fclose(pf);
	pf = NULL;
	//fread
	Info a2[5] = { 0 };
	pf = fopen("test.dat", "rb");
	if (!pf) {
		perror("fopen");
		return 1;
	}
	if (fread(a2, sizeof(Info), sz, pf) == sz)
	{
		int i = 0;
		for (i = 0; i < sz; i++)
			printf("%s %d %s\n", a2[i].name, a2[i].age, a2[i].sex);

	}
	fclose(pf);
	pf = NULL;
	return 0;
}
```

## æ–‡ä»¶çš„éšæœºè¯»å†™

- **`fseek`**

```c
int fseek ( FILE * stream, long int offset, int origin );
```

å°†ä¸æµå…³è”çš„ä½ç½®æŒ‡ç¤ºå™¨è®¾ç½®ä¸ºæ–°ä½ç½®ã€‚
å¯¹äºä»¥äºŒè¿›åˆ¶æ¨¡å¼æ‰“å¼€çš„æµï¼Œæ–°ä½ç½®æ˜¯é€šè¿‡å‘åŸç‚¹æŒ‡å®šçš„å‚è€ƒä½ç½®æ·»åŠ åç§»é‡æ¥å®šä¹‰çš„ã€‚å¯¹äºåœ¨æ–‡æœ¬æ¨¡å¼ä¸‹æ‰“å¼€çš„æµï¼Œåç§»é‡åº”ä¸ºé›¶æˆ–ä¸Šä¸€æ¬¡è°ƒç”¨ `ftell` è¿”å›çš„å€¼ï¼Œå¹¶ä¸”å¿…é¡»SEEK SETæºã€‚

å¦‚æœæˆåŠŸï¼Œè¯¥å‡½æ•°å°†è¿”å›é›¶ã€‚å¦åˆ™ï¼Œå®ƒå°†è¿”å›éé›¶å€¼ã€‚å¦‚æœå‘ç”Ÿè¯»å–æˆ–å†™å…¥é”™è¯¯ï¼Œåˆ™è®¾ç½®*é”™è¯¯æŒ‡ç¤ºç¬¦*Â ï¼ˆ`ferror`ï¼‰ã€‚

è®¾ç½®çš„æŒ‡é’ˆçš„ä½ç½®æ˜¯ **èµ·å§‹ä½ç½® + åç§»é‡**ï¼Œ offset åç§»é‡å‚æ•° , å¯ä»¥ä¸ºæ­£æ•° , ä¹Ÿå¯ä»¥ä¸ºè´Ÿæ•°ã€‚

å…¶ä¸­çš„originå‚æ•°å°±æ˜¯èµ·å§‹ä½ç½® , æœ‰ä»¥ä¸‹ä¸‰ç§é€‰æ‹© :

æ–‡ä»¶å¤´ SEEK_SET 0ï¼Œå½“å‰ä½ç½® SEEK_CUR 1ï¼Œæ–‡ä»¶å°¾ SEEK_END 2

```c
#include<stdio.h>
int main()
{
	FILE* pf = fopen("test.txt", "w");
	if (!pf) {
		perror("fopen");
		return 1;
	}
	fputs("This is an apple.", pf);
	fseek(pf, 9, SEEK_SET);
	fputs(" sam", pf);
	fclose(pf);
	pf = NULL;
	return 0;
}
```

- **`ftell`**

```c
long int ftell ( FILE * stream );
```

è·å–æ–‡ä»¶çš„å½“å‰æŒ‡é’ˆä½ç½®ç›¸å¯¹äºæ–‡ä»¶é¦–åœ°å€çš„åç§»å­—èŠ‚æ•°ã€‚

æˆåŠŸåï¼Œè¿”å›ä½ç½®æŒ‡æ ‡çš„å½“å‰å€¼ã€‚

å¤±è´¥æ—¶ï¼Œè¿”å›-1Lï¼Œå¹¶å°†errnoè®¾ç½®ä¸ºç‰¹å®šäºç³»ç»Ÿçš„æ­£å€¼ã€‚

**ä½¿ç”¨åœºæ™¯ :**Â éšæœºæ–¹å¼å­˜å–æ–‡ä»¶æ—¶ , ä½¿ç”¨ `fseek` å‡½æ•°æ¥å›ç§»åŠ¨æŒ‡é’ˆ , ä¸å®¹æ˜“ç¡®å®šå½“å‰æŒ‡é’ˆä½ç½® , é€šè¿‡è°ƒç”¨Â `ftell`Â å‡½æ•°ç¡®å®šæŒ‡é’ˆä½ç½® ã€‚

```c
#include<stdio.h>
int main()
{
    FILE* pf = fopen("test.txt", "w");
    if (!pf) {
    	perror("fopen");
    	return 1;
    }
    fputs("This is an apple.", pf);
    fseek(pf, 0, SEEK_END);
    long int size = ftell(pf);
    fclose(pf);
    pf = NULL;
    printf("Size of myfile.txt: %ld bytes.\n", size);
    return 0;
}
```

- **`rewind`**

```c
void rewind ( FILE * stream );
```

è®©æ–‡ä»¶æŒ‡é’ˆçš„ä½ç½®å›åˆ°æ–‡ä»¶çš„èµ·å§‹ä½ç½®

```c
#include<stdio.h>
int main()
{
	FILE* pf = fopen("test.txt", "w+");
	if (!pf) {
	    perror("fopen");
	    return 1;
	}
	char buffer[27];
	char i = 0;
	for (i = 'A'; i <= 'Z'; i++)
		fputc(i, pf);
	rewind(pf);
	fread(buffer, 1, 26, pf);
	fclose(pf);
	pf = NULL;
	buffer[26] = '\0';
	puts(buffer);
	return 0;
}
```

- **`ferror`**

```c
int ferror ( FILE * stream);
```

ç”¨äºæ£€æµ‹æ–‡ä»¶è¯»å†™è¿‡ç¨‹ä¸­æ˜¯å¦æœ‰äº§ç”Ÿé”™è¯¯ã€‚

å¦‚æœè®¾ç½®äº†ä¸æµå…³è”çš„é”™è¯¯æŒ‡ç¤ºå™¨ï¼Œåˆ™è¿”å›éé›¶å€¼ã€‚å¦åˆ™ï¼Œå°†è¿”å›é›¶ã€‚

```c
#include <stdio.h>
int main()
{
	FILE* pf = fopen("test.txt", "w+");
	if (!pf) {
		perror("fopen");
		return 1;
	}
	fputc('x', pf);
	if (ferror(pf))
		printf("Error Writing to myfile.txt\n");
	fclose(pf);
	pf = NULL;
	return 0;
}
```

- **`feof`**

```c
int feof ( FILE * stream );
```

åœ¨æ–‡ä»¶è¯»å–è¿‡ç¨‹ä¸­ï¼Œä¸èƒ½ç”¨`feof`å‡½æ•°çš„è¿”å›å€¼ç›´æ¥ç”¨æ¥åˆ¤æ–­æ–‡ä»¶çš„æ˜¯å¦ç»“æŸã€‚è€Œæ˜¯åº”ç”¨äºå½“æ–‡ä»¶è¯»å–ç»“æŸçš„æ—¶å€™ï¼Œåˆ¤æ–­æ˜¯è¯»å–å¤±è´¥ç»“æŸï¼Œè¿˜æ˜¯é‡åˆ°æ–‡ä»¶å°¾ç»“æŸã€‚ 

1. æ–‡æœ¬æ–‡ä»¶è¯»å–æ˜¯å¦ç»“æŸï¼Œåˆ¤æ–­è¿”å›å€¼æ˜¯å¦ä¸º `EOF` ï¼ˆ `fgetc` ï¼‰ï¼Œæˆ–è€… `NULL` ï¼ˆ `fgets`ï¼‰ã€‚
2. äºŒè¿›åˆ¶æ–‡ä»¶çš„è¯»å–ç»“æŸåˆ¤æ–­ï¼Œåˆ¤æ–­è¿”å›å€¼æ˜¯å¦å°äºå®é™…è¦è¯»çš„ä¸ªæ•°ã€‚
ä¾‹å¦‚ï¼š`fread`åˆ¤æ–­è¿”å›å€¼æ˜¯å¦å°äºå®é™…è¦è¯»çš„ä¸ªæ•°ã€‚

```c
#include<stdio.h>
int main()
{
    int c; // æ³¨æ„ï¼šintï¼Œécharï¼Œè¦æ±‚å¤„ç†EOF
    FILE* fp = fopen("test.txt", "r");
    if (!fp) {
        perror("File opening failed");
        return 1;
    }
    //fgetc å½“è¯»å–å¤±è´¥çš„æ—¶å€™æˆ–è€…é‡åˆ°æ–‡ä»¶ç»“æŸçš„æ—¶å€™ï¼Œéƒ½ä¼šè¿”å›EOF
    while ((c = fgetc(fp)) != EOF)
    {
        putchar(c);
    }
    //åˆ¤æ–­æ˜¯ä»€ä¹ˆåŸå› ç»“æŸçš„
    if (ferror(fp))
        puts("I/O error when reading");
    else if (feof(fp))
        puts("End of file reached successfully");
    fclose(fp);
    fp = NULL;
    return 0;
}
```

```c
#include<stdio.h>
#define SIZE 5
int main()
{
    double a[SIZE] = { 1.,2.,3.,4.,5. };
    FILE* fp = fopen("test.bin", "wb"); // å¿…é¡»ç”¨äºŒè¿›åˆ¶æ¨¡å¼
    fwrite(a, sizeof * a, SIZE, fp); // å†™ double çš„æ•°ç»„
    fclose(fp);
    double b[SIZE];
    fp = fopen("test.bin", "rb");
    size_t ret_code = fread(b, sizeof * b, SIZE, fp); // è¯» double çš„æ•°ç»„
    if (ret_code == SIZE) {
        puts("Array read successfully, contents: ");
        for (int n = 0; n < SIZE; ++n) printf("%f ", b[n]);
        putchar('\n');
    }
    else { // error handling
        if (feof(fp))
            printf("Error reading test.bin: unexpected end of file\n");
        else if (ferror(fp)) {
            perror("Error reading test.bin");
        }
    }
    fclose(fp);
    fp = NULL;
    return 0;
}
```

- **`fflush`**

```c
int fflush ( FILE * stream );
```

å¦‚æœç»™å®šçš„æµæ˜¯æ‰“å¼€çš„ä»¥ä¾›å†™å…¥(æˆ–è€…å¦‚æœå®ƒæ˜¯ä¸ºæ›´æ–°è€Œæ‰“å¼€çš„ï¼Œå¹¶ä¸”æœ€åä¸€ä¸ª I/O æ“ä½œæ˜¯è¾“å‡ºæ“ä½œ)ï¼Œåˆ™å…¶è¾“å‡ºç¼“å†²åŒºä¸­çš„ä»»ä½•æœªå†™å…¥æ•°æ®éƒ½å°†å†™å…¥æ–‡ä»¶ã€‚å¦‚æœ æµ ä¸º`null`æŒ‡é’ˆï¼Œåˆ™åˆ·æ–°æ‰€æœ‰æ­¤ç±»æµã€‚

å½“æ–‡ä»¶å…³é—­ï¼ˆ`fclose`ï¼‰æ—¶ï¼Œæ— è®ºæ˜¯ç”±äºå…³é—­è°ƒç”¨è¿˜æ˜¯ç¨‹åºç»ˆæ­¢ï¼Œéƒ½ä¼šè‡ªåŠ¨åˆ·æ–°ä¸å…¶å…³è”çš„æ‰€æœ‰ç¼“å†²åŒºã€‚
è¿”å›é›¶å€¼è¡¨ç¤ºæˆåŠŸã€‚å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œå°†è¿”å›`EOF`å¹¶è®¾ç½®é”™è¯¯æŒ‡ç¤ºå™¨ï¼ˆ`ferror`ï¼‰ã€‚

```c
#include <stdio.h>
#include <windows.h>
int main()
{
    FILE* pf = fopen("test.txt", "w");
    fputs("abcdef", pf);//å…ˆå°†ä»£ç æ”¾åœ¨è¾“å‡ºç¼“å†²åŒº
    printf("ç¡çœ 10ç§’-å·²ç»å†™æ•°æ®äº†ï¼Œæ‰“å¼€test.txtæ–‡ä»¶ï¼Œå‘ç°æ–‡ä»¶æ²¡æœ‰å†…å®¹\n");
    Sleep(10000);
    printf("åˆ·æ–°ç¼“å†²åŒº\n");
    fflush(pf);//åˆ·æ–°ç¼“å†²åŒºæ—¶ï¼Œæ‰å°†è¾“å‡ºç¼“å†²åŒºçš„æ•°æ®å†™åˆ°æ–‡ä»¶ï¼ˆç£ç›˜ï¼‰
    //æ³¨ï¼šfflush åœ¨é«˜ç‰ˆæœ¬çš„VSä¸Šä¸èƒ½ä½¿ç”¨äº†
    printf("å†ç¡çœ 10ç§’-æ­¤æ—¶ï¼Œå†æ¬¡æ‰“å¼€test.txtæ–‡ä»¶ï¼Œæ–‡ä»¶æœ‰å†…å®¹äº†\n");
    Sleep(10000);
    fclose(pf);
    //æ³¨ï¼šfcloseåœ¨å…³é—­æ–‡ä»¶çš„æ—¶å€™ï¼Œä¹Ÿä¼šåˆ·æ–°ç¼“å†²åŒº
    pf = NULL;
    return 0;
}
```

# ç¨‹åºçš„ç¼–è¯‘å’Œé“¾æ¥

## è¯¦è§£ç¼–è¯‘+é“¾æ¥

**ç¨‹åºç¼–è¯‘çš„å››ä¸ªé˜¶æ®µ**ï¼š**é¢„å¤„ç†ï¼ˆPreprocessingï¼‰ã€ç¼–è¯‘ï¼ˆCompilationï¼‰ã€æ±‡ç¼–ï¼ˆAssemblyï¼‰ã€é“¾æ¥ï¼ˆLinkingï¼‰**ã€‚æ‰§è¡Œè¿™å››ä¸ªé˜¶æ®µçš„ç¨‹åºï¼ˆ**é¢„å¤„ç†å™¨ã€ç¼–è¯‘å™¨ã€æ±‡ç¼–å™¨ã€å’Œé“¾æ¥å™¨**ï¼‰ä¸€èµ·æ„æˆäº†ç¼–è¯‘ç³»ç»Ÿã€‚

![img](https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239401.png)

- é¢„å¤„ç†
  1. é¢„å¤„ç†å™¨ï¼ˆcppï¼‰å°†æ‰€æœ‰çš„**`#define`**åˆ é™¤ï¼Œå¹¶ä¸”å±•å¼€æ‰€æœ‰çš„å®å®šä¹‰ã€‚
  2. å¤„ç†æ‰€æœ‰çš„**æ¡ä»¶é¢„ç¼–è¯‘**æŒ‡ä»¤ï¼Œæ¯”å¦‚`#if`ã€`#ifdef`ã€`#elif`ã€`#else`ã€`#endif`ç­‰ã€‚
  3. å¤„ç†**`#include`**é¢„ç¼–è¯‘æŒ‡ä»¤ï¼Œå°†è¢«åŒ…å«çš„æ–‡ä»¶ç›´æ¥æ’å…¥åˆ°é¢„ç¼–è¯‘æŒ‡ä»¤çš„ä½ç½®ã€‚
  4. åˆ é™¤æ‰€æœ‰çš„**æ³¨é‡Š**ã€‚
  5. æ·»åŠ **è¡Œå·å’Œæ–‡ä»¶æ ‡è¯†**ï¼Œä»¥ä¾¿ç¼–è¯‘æ—¶äº§ç”Ÿè°ƒè¯•ç”¨çš„è¡Œå·åŠç¼–è¯‘é”™è¯¯è­¦å‘Šè¡Œå·ã€‚
  6. ä¿ç•™æ‰€æœ‰çš„**`#pragma`**ç¼–è¯‘å™¨æŒ‡ä»¤ï¼Œå› ä¸ºç¼–è¯‘å™¨éœ€è¦ä½¿ç”¨å®ƒä»¬ã€‚
- ç¼–è¯‘
  ç¼–è¯‘è¿‡ç¨‹å¯åˆ†ä¸º6æ­¥ï¼š**æ‰«æï¼ˆè¯æ³•åˆ†æï¼‰ã€è¯­æ³•åˆ†æã€è¯­ä¹‰åˆ†æã€æºä»£ç ä¼˜åŒ–ã€ä»£ç ç”Ÿæˆã€ç›®æ ‡ä»£ç ä¼˜åŒ–**ã€‚
- æ±‡ç¼–
  æ±‡ç¼–å™¨ï¼ˆasï¼‰å°†`hello.s`ç¿»è¯‘æˆæœºå™¨è¯­è¨€æŒ‡ä»¤ï¼ŒæŠŠè¿™äº›æŒ‡ä»¤æ‰“åŒ…æˆä¸€ç§å«åš**å¯é‡å®šä½ç›®æ ‡ç¨‹åº**çš„æ ¼å¼ï¼Œå¹¶å°†ç»“æœä¿å­˜åœ¨ç›®æ ‡æ–‡ä»¶`hello.o`ä¸­ï¼Œ`hello.o`æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ã€‚
- é“¾æ¥
  helloç¨‹åºè°ƒç”¨äº†`printf`å‡½æ•°ï¼Œå®ƒå­˜åœ¨äºä¸€ä¸ªåä¸º`printf.o`çš„å•ç‹¬çš„é¢„ç¼–è¯‘å¥½äº†çš„ç›®æ ‡æ–‡ä»¶ä¸­ï¼Œè€Œè¿™ä¸ªæ–‡ä»¶å¿…é¡»ä»¥æŸç§æ–¹å¼åˆå¹¶åˆ°æˆ‘ä»¬çš„hello.oç¨‹åºä¸­ã€‚è¿æ¥å™¨ï¼ˆldï¼‰å°±è´Ÿè´£å¤„ç†è¿™ç§åˆå¹¶ã€‚ç»“æœå°±å¾—åˆ°äº†helloæ–‡ä»¶ï¼Œå®ƒæ˜¯ä¸€ä¸ª**å¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶**ï¼ˆæˆ–è€…ç§°ä¸º**å¯æ‰§è¡Œæ–‡ä»¶**ï¼‰ï¼Œå¯ä»¥è¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç”±ç³»ç»Ÿæ‰§è¡Œã€‚ï¼ˆé“¾æ¥ç¨‹åºè¿è¡Œéœ€è¦çš„ä¸€å¤§å †ç›®æ ‡æ–‡ä»¶ï¼Œä»¥åŠæ‰€ä¾èµ–çš„å…¶å®ƒåº“æ–‡ä»¶ï¼Œæœ€åç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼‰ã€‚

## é¢„å¤„ç†è¯¦è§£

### é¢„å®šä¹‰ç¬¦å·

```c
__FILE__    //è¿›è¡Œç¼–è¯‘çš„æºæ–‡ä»¶ 
__LINE__    //æ–‡ä»¶å½“å‰çš„è¡Œå· 
__DATE__    //æ–‡ä»¶è¢«ç¼–è¯‘çš„æ—¥æœŸ 
__TIME__    //æ–‡ä»¶è¢«ç¼–è¯‘çš„æ—¶é—´ 
__STDC__    //å¦‚æœç¼–è¯‘å™¨éµå¾ªANSI Cï¼Œå…¶å€¼ä¸º1ï¼Œå¦åˆ™æœªå®šä¹‰
```

è¿™äº›é¢„å®šä¹‰ç¬¦å·éƒ½æ˜¯è¯­è¨€å†…ç½®çš„ã€‚

```c
#include<stdio.h>
int main()
{
	printf("name: %s\ndate: %s\ntime: %s\nline: %d\n", __FILE__, __DATE__, __TIME__, __LINE__);
	return 0;
}
//name: F:\cs\Code\C\C\16.c
//date : Apr 27 2024
//time : 19 : 09 : 18
//line : 4
```

### `#define`

- `#define` å®šä¹‰æ ‡è¯†ç¬¦

```c
è¯­æ³•æ ¼å¼ï¼š
#define name stuff
ä¸¾ä¸ªæ —å­ï¼š
#define MAX 1000
#define reg register          //ä¸º registerè¿™ä¸ªå…³é”®å­—ï¼Œåˆ›å»ºä¸€ä¸ªç®€çŸ­çš„åå­—
#define do_forever for(;;)     //ç”¨æ›´å½¢è±¡çš„ç¬¦å·æ¥æ›¿æ¢ä¸€ç§å®ç°
#define CASE break;case        //åœ¨å†™caseè¯­å¥çš„æ—¶å€™è‡ªåŠ¨æŠŠ breakå†™ä¸Šã€‚
// å¦‚æœå®šä¹‰çš„ stuffè¿‡é•¿ï¼Œå¯ä»¥åˆ†æˆå‡ è¡Œå†™ï¼Œé™¤äº†æœ€åä¸€è¡Œå¤–ï¼Œæ¯è¡Œçš„åé¢éƒ½åŠ ä¸€ä¸ªåæ–œæ (ç»­è¡Œç¬¦)ã€‚
#define DEBUG_PRINT printf("file:%s\nline:%d\ndate:%s\ntime:%s\n" ,\
							__FILE__,__LINE__ ,\
							__DATE__,__TIME__ ) 
#include<stdio.h>
int main()
{
	int input = MAX;
	scanf("%d", &input);
	switch (input)
	{
		case 1:
			printf("1\n");
		CASE 2:
			printf("2\n");
		CASE 3:
			printf("3\n");
	default:
		break;
	}
	DEBUG_PRINT;
	return 0;
}
```

æé—®ï¼šåœ¨defineå®šä¹‰æ ‡è¯†ç¬¦çš„æ—¶å€™ï¼Œè¦ä¸è¦åœ¨æœ€ååŠ ä¸Š `;` ?

```c
#define MAX 100;
int main()
{
	int max = 0;
	int input = 1;
	if (input)
		max = MAX;
	else//æŠ¥é”™æ²¡æœ‰åŒ¹é…çš„if,å› ä¸ºif(input) max=1000;;	,ç¬¬äºŒä¸ªåˆ†å·å°†ifä¸elseéš”ç»ã€‚
		max = 0;
	return 0;
}
```

- **`#define` å®šä¹‰å®**

```c
å£°æ˜æ–¹å¼ï¼š
#define name( parament-list ) stuff
å…¶ä¸­çš„ parament-list æ˜¯ä¸€ä¸ªç”±é€—å·éš”å¼€çš„ç¬¦å·è¡¨ï¼Œå®ƒä»¬å¯èƒ½å‡ºç°åœ¨stuffä¸­ã€‚
å‚æ•°åˆ—è¡¨çš„å·¦æ‹¬å·å¿…é¡»ä¸nameç´§é‚»ã€‚ å¦‚æœä¸¤è€…ä¹‹é—´æœ‰ä»»ä½•ç©ºç™½å­˜åœ¨ï¼Œå‚æ•°åˆ—è¡¨å°±ä¼šè¢«è§£é‡Šä¸ºstuffçš„ä¸€éƒ¨åˆ†ã€‚
```

```c
#include<stdio.h>
#define SQUARE1(X) X+X
#define SQUARE2(X) (X)+(X)
#define SQUARE3(X) ((X)+(X))
int main()
{
	printf("%d\n", 6 * SQUARE1(5 + 1));	//6*5+1+5+1=37
	printf("%d\n", 6 * SQUARE2(5 + 1));	//6*(5+1)+(5+1)=42
	printf("%d\n", 6 * SQUARE3(5 + 1));	//6*((5+1)+(5+1))=72
	return 0;
}
```

> æç¤ºï¼šç”¨äºå¯¹æ•°å€¼è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼çš„å®å®šä¹‰éƒ½åº”è¯¥ç”¨è¿™ç§æ–¹å¼åŠ ä¸Šæ‹¬å·ï¼Œé¿å…åœ¨ä½¿ç”¨å®æ—¶ç”±äºå‚æ•°ä¸­ çš„æ“ä½œç¬¦æˆ–é‚»è¿‘æ“ä½œç¬¦ä¹‹é—´ä¸å¯é¢„æ–™çš„ç›¸äº’ä½œç”¨ã€‚

- `#define` æ›¿æ¢è§„åˆ™

åœ¨ç¨‹åºä¸­æ‰©å±•`#define`å®šä¹‰ç¬¦å·å’Œå®æ—¶ï¼Œéœ€è¦æ¶‰åŠå‡ ä¸ªæ­¥éª¤ï¼š

1. åœ¨è°ƒç”¨å®æ—¶ï¼Œé¦–å…ˆå¯¹å‚æ•°è¿›è¡Œæ£€æŸ¥ï¼Œçœ‹çœ‹æ˜¯å¦åŒ…å«ä»»ä½•ç”±`#define`å®šä¹‰çš„ç¬¦å·ã€‚å¦‚æœæ˜¯ï¼Œå®ƒä»¬é¦–å…ˆè¢«æ›¿æ¢ã€‚ 
2. æ›¿æ¢æ–‡æœ¬éšåè¢«æ’å…¥åˆ°ç¨‹åºä¸­åŸæ¥æ–‡æœ¬çš„ä½ç½®ã€‚å¯¹äºå®ï¼Œå‚æ•°åè¢«ä»–ä»¬çš„å€¼æ›¿æ¢ã€‚
3. æœ€åï¼Œå†æ¬¡å¯¹ç»“æœæ–‡ä»¶è¿›è¡Œæ‰«æï¼Œçœ‹çœ‹å®ƒæ˜¯å¦åŒ…å«ä»»ä½•ç”±`#define`å®šä¹‰çš„ç¬¦å·ã€‚å¦‚æœæ˜¯ï¼Œå°±é‡å¤ä¸Š è¿°å¤„ç†è¿‡ç¨‹ã€‚ 

æ³¨æ„ï¼š 

1. å®å‚æ•°å’Œ`#define` å®šä¹‰ä¸­å¯ä»¥å‡ºç°å…¶ä»–`#define`å®šä¹‰çš„å˜é‡ã€‚ä½†æ˜¯å¯¹äºå®ï¼Œä¸èƒ½å‡ºç°é€’å½’ã€‚ 
2. å½“é¢„å¤„ç†å™¨æœç´¢`#define`å®šä¹‰çš„ç¬¦å·çš„æ—¶å€™ï¼Œå­—ç¬¦ä¸²å¸¸é‡çš„å†…å®¹å¹¶ä¸è¢«æœç´¢ã€‚

```c
#define MAX 10
#define MUL(X) ((X)*(X))
int main()
{
	int ret = 3 * MUL(MAX);//3*10*10=300
	printf("MAX = %d", MAX);//""ä¸­å­—ç¬¦ä¸²çš„MAXä¸è¢«æ›¿æ¢
	return 0;
}
```

- #å’Œ`##`

```c
//å­—ç¬¦ä¸²æœ‰è‡ªåŠ¨è¿æ¥çš„ç‰¹ç‚¹
#include<stdio.h>
int main()
{
	printf("hello bit\n");			//hello bit
	printf("hello" " bit\n");		//hello bit
	printf("hel"  "lo" " bit\n");	//hello bit
	return 0;
}
```

```c
#include<stdio.h>
#define PRINT(FORMAT, VALUE) printf("the value is "FORMAT"\n", VALUE)
int main()
{
	PRINT("%d", 10);
	//printf("the value is ""%d""\n",VALUE);
	//è¿™é‡Œåªæœ‰å½“å­—ç¬¦ä¸²ä½œä¸ºå®å‚æ•°çš„æ—¶å€™æ‰å¯ä»¥æŠŠå­—ç¬¦ä¸²æ”¾åœ¨å­—ç¬¦ä¸²ä¸­ã€‚
	return 0;
}
```

ä½¿ç”¨ `#` ï¼ŒæŠŠä¸€ä¸ªå®å‚æ•°å˜æˆå¯¹åº”çš„å­—ç¬¦ä¸²ï¼š

```c
#include<stdio.h>
#define PRINT(FORMAT, VALUE) printf("the value of "#VALUE" is "FORMAT "\n", VALUE)
int main()
{
	int i = 10;
	PRINT("%d", i + 3);
	//the value of i + 3 is 13
    //ä»£ç ä¸­çš„ #VALUE ä¼šé¢„å¤„ç†å™¨å¤„ç†ä¸ºï¼š"VALUE"
	return 0;
}
```

ä½¿ç”¨`##`å¯ä»¥æŠŠä½äºå®ƒä¸¤è¾¹çš„ç¬¦å·åˆæˆä¸€ä¸ªç¬¦å·ã€‚ å®ƒå…è®¸å®å®šä¹‰ä»åˆ†ç¦»çš„æ–‡æœ¬ç‰‡æ®µåˆ›å»ºæ ‡è¯†ç¬¦ï¼š

```c
#include<stdio.h>
#define ADD_TO_SUM(num, value) sum##num += value
int main()
{
	int sum5 = 3;
	ADD_TO_SUM(5, 10);//ç»™sum5åŠ 10
	printf("%d\n", sum5);
	return 0;
}
```

è¿™æ ·çš„è¿æ¥å¿…é¡»äº§ç”Ÿä¸€ä¸ªåˆæ³•çš„æ ‡è¯†ç¬¦ã€‚å¦åˆ™å…¶ç»“æœå°±æ˜¯æœªå®šä¹‰çš„ã€‚

- å¸¦å‰¯ä½œç”¨çš„å®å‚æ•°

```c
#include<stdio.h>
#define MAX(a, b) ( (a) > (b) ? (a) : (b) )
int main()
{
	int x = 5;
	int y = 8;
	int z = MAX(x++, y++);
	//((x++)>(y++)?(x++):(y++))
	//å…ˆåˆ¤æ–­x>y,ä¸æˆç«‹ï¼Œç„¶åx yè‡ªå¢æˆ6 9ï¼Œç„¶åy(9)èµ‹å€¼ç»™zï¼Œç„¶åyè‡ªå¢æˆ10
	printf("x=%d y=%d z=%d\n", x, y, z);
	return 0;
}
```

- å®å’Œå‡½æ•°çš„å¯¹æ¯”

å®ç›¸è¾ƒäºå‡½æ•°çš„ä¼˜åŠ¿ï¼š 

1. ç”¨äºè°ƒç”¨å‡½æ•°å’Œä»å‡½æ•°è¿”å›çš„ä»£ç å¯èƒ½æ¯”å®é™…æ‰§è¡Œè¿™ä¸ªå°å‹è®¡ç®—å·¥ä½œæ‰€éœ€è¦çš„æ—¶é—´æ›´å¤šã€‚æ‰€ä»¥**å®æ¯”å‡½æ•°åœ¨ç¨‹åº çš„è§„æ¨¡å’Œé€Ÿåº¦æ–¹é¢æ›´èƒœä¸€ç­¹**ã€‚ 
2. æ›´ä¸ºé‡è¦çš„æ˜¯å‡½æ•°çš„å‚æ•°å¿…é¡»å£°æ˜ä¸ºç‰¹å®šçš„ç±»å‹ã€‚æ‰€ä»¥å‡½æ•°åªèƒ½åœ¨ç±»å‹åˆé€‚çš„è¡¨è¾¾å¼ä¸Šä½¿ç”¨ã€‚åä¹‹è¿™ä¸ªå®æ€å¯ ä»¥é€‚ç”¨äºæ•´å½¢ã€é•¿æ•´å‹ã€æµ®ç‚¹å‹ç­‰å¯ä»¥ç”¨äº>æ¥æ¯”è¾ƒçš„ç±»å‹ã€‚**å®æ˜¯ç±»å‹æ— å…³çš„**ã€‚ 

å½“ç„¶å’Œå®ç›¸æ¯”å‡½æ•°ä¹Ÿæœ‰åŠ£åŠ¿çš„åœ°æ–¹ï¼š

1. æ¯æ¬¡ä½¿ç”¨å®çš„æ—¶å€™ï¼Œä¸€ä»½å®å®šä¹‰çš„ä»£ç å°†æ’å…¥åˆ°ç¨‹åºä¸­ã€‚é™¤éå®æ¯”è¾ƒçŸ­ï¼Œå¦åˆ™å¯èƒ½å¤§å¹…åº¦å¢åŠ ç¨‹åºçš„é•¿åº¦ã€‚ 
2. å®æ˜¯æ²¡æ³•è°ƒè¯•çš„ã€‚ 
3. å®ç”±äºç±»å‹æ— å…³ï¼Œä¹Ÿå°±ä¸å¤Ÿä¸¥è°¨ã€‚ 
4. å®å¯èƒ½ä¼šå¸¦æ¥è¿ç®—ç¬¦ä¼˜å…ˆçº§çš„é—®é¢˜ï¼Œå¯¼è‡´ç¨‹å®¹æ˜“å‡ºç°é”™ã€‚

> **å‘½åçº¦å®šï¼š**æŠŠå®åå…¨éƒ¨å¤§å†™ï¼Œå‡½æ•°åä¸è¦å…¨éƒ¨å¤§å†™ã€‚

### `#undef`

```c
#define MAX 100
#undef MAX
int main()
{
	int max = MAX;	//errorï¼š"MAX"æœªç”³æ˜çš„æ ‡è¯†ç¬¦
	return 0;
}
```

### å‘½ä»¤è¡Œå®šä¹‰

è®¸å¤šC çš„ç¼–è¯‘å™¨æä¾›äº†ä¸€ç§èƒ½åŠ›ï¼Œå…è®¸åœ¨å‘½ä»¤è¡Œä¸­å®šä¹‰ç¬¦å·ã€‚ç”¨äºå¯åŠ¨ç¼–è¯‘è¿‡ç¨‹ã€‚

```c
#include<stdio.h>
int main()
{
    int array[ARRAY_SIZE];
    int i = 0;
    for (i = 0; i < ARRAY_SIZE; i++)
    {
        array[i] = i;
    }
    for (i = 0; i < ARRAY_SIZE; i++)
    {
        printf("%d ", array[i]);
    }
    printf("\n");
    return 0;
}
ç¼–è¯‘æŒ‡ä»¤ï¼š
gcc - D ARRAY_SIZE = 10 programe.c	//åœ¨Linuxç³»ç»Ÿä¸­å¯æ¼”ç¤ºï¼Œæ˜¯å¤„äºé¢„ç¼–è¯‘é˜¶æ®µçš„æ“ä½œ
```

### æ¡ä»¶ç¼–è¯‘

åœ¨ç¼–è¯‘ä¸€ä¸ªç¨‹åºçš„æ—¶å€™æˆ‘ä»¬å¦‚æœè¦å°†ä¸€æ¡è¯­å¥ï¼ˆä¸€ç»„è¯­å¥ï¼‰ç¼–è¯‘æˆ–è€…æ”¾å¼ƒæ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚å› ä¸ºæˆ‘ä»¬æœ‰æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤ã€‚

æ¯”å¦‚ï¼šè°ƒè¯•æ€§çš„ä»£ç ï¼Œåˆ é™¤å¯æƒœï¼Œä¿ç•™åˆç¢äº‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€‰æ‹©æ€§çš„ç¼–è¯‘ã€‚

```c
#include<stdio.h>
int main()
{
	int i = 0;
	int arr[10] = { 0 };
	for (i = 0; i < 10; i++)
	{
		arr[i] = i;
#ifdef __DEBUG__
		printf("%d\n", arr[i]);//ä¸ºäº†è§‚å¯Ÿæ•°ç»„æ˜¯å¦èµ‹å€¼æˆåŠŸã€‚ 
#endif //__DEBUG__
	}
	return 0;
}
```

å¸¸è§çš„æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤ï¼š

```c
1.
#if å¸¸é‡è¡¨è¾¾å¼
//...
#endif
//å¸¸é‡è¡¨è¾¾å¼ç”±é¢„å¤„ç†å™¨æ±‚å€¼ã€‚
å¦‚ï¼š
#define __DEBUG__ 1
#if __DEBUG__
//..
#endif

2.å¤šä¸ªåˆ†æ”¯çš„æ¡ä»¶ç¼–è¯‘
#if å¸¸é‡è¡¨è¾¾å¼
//...
#elif å¸¸é‡è¡¨è¾¾å¼
//...
#else
//...
#endif
ä¾‹å­ï¼š
int main()
{
#if 1==1
	printf("hello world\n");
#elif 1==2
	printf("haha\n")
#endif
		return 0;
}

3.åˆ¤æ–­æ˜¯å¦è¢«å®šä¹‰
#if defined(symbol)
#ifdef symbol
#if !defined(symbol)
#ifndef symbol

4.åµŒå¥—æŒ‡ä»¤
#if defined(OS_UNIX)
    #ifdef OPTION1
    	unix_version_option1();	
    #endif
    #ifdef OPTION2
    	unix_version_option2();
    #endif
#elif defined(OS_MSDOS)
    #ifdef OPTION2
    	msdos_version_option2();
    #endif
#endif
```

### æ–‡ä»¶åŒ…å«

- æœ¬åœ°æ–‡ä»¶åŒ…å«ï¼š

```c
#include â€œfilename.hâ€
```

æŸ¥æ‰¾ç­–ç•¥ï¼šå…ˆåœ¨**æºæ–‡ä»¶**æ‰€åœ¨ç›®å½•ä¸‹æŸ¥æ‰¾ï¼Œå¦‚æœè¯¥å¤´æ–‡ä»¶æœªæ‰¾åˆ°ï¼Œç¼–è¯‘å™¨å°±åƒæŸ¥æ‰¾**åº“å‡½æ•°**å¤´æ–‡ä»¶ä¸€æ ·åœ¨æ ‡å‡†ä½ç½®æŸ¥æ‰¾å¤´æ–‡ä»¶ã€‚ å¦‚æœæ‰¾ä¸åˆ°å°±æç¤ºç¼–è¯‘é”™è¯¯ã€‚

- åº“æ–‡ä»¶åŒ…å«ï¼š

```c
#include <filename.h>
```

æŸ¥æ‰¾å¤´æ–‡ä»¶ç›´æ¥å»æ ‡å‡†è·¯å¾„ä¸‹å»æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±æç¤ºç¼–è¯‘é”™è¯¯ã€‚

åº“æ–‡ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨`â€œfilename.hâ€`å½¢å¼åŒ…å«ï¼Œä½†æ˜¯è¿™æ ·åšæŸ¥æ‰¾çš„æ•ˆç‡å°±ä½äº›ï¼Œå½“ç„¶è¿™æ ·ä¹Ÿä¸å®¹æ˜“åŒºåˆ†æ˜¯åº“æ–‡ä»¶è¿˜æ˜¯æœ¬åœ°æ–‡ä»¶äº†ã€‚

- åµŒå¥—æ–‡ä»¶åŒ…å«

<img src="https://cdn.jsdelivr.net/gh/SYLV14/PicGo_Save/typora_images/202406112239402.png" alt="image-20240427203247667" style="zoom:50%;" />

test.hå’Œtest.cä½¿ç”¨äº†test1æ¨¡å—å’Œtest2æ¨¡å—ã€‚è¿™æ ·æœ€ç»ˆç¨‹åºä¸­å°±ä¼šå‡ºç°ä¸¤ä»½comm.hçš„å†…å®¹ã€‚è¿™æ ·å°±é€ æˆäº†æ–‡ä»¶å†…å®¹çš„é‡å¤ã€‚

ä½¿ç”¨æ¡ä»¶ç¼–è¯‘è§£å†³æ­¤ç±»é—®é¢˜ï¼Œæ¯ä¸ªå¤´æ–‡ä»¶çš„å¼€å¤´å†™ï¼š

```c
#ifndef __TEST_H__
#define __TEST_H__
//å¤´æ–‡ä»¶çš„å†…å®¹
#endif   //__TEST_H__
æˆ–è€…ï¼š
#pragma once
```

### å…¶ä»–é¢„å¤„ç†æŒ‡ä»¤

```c
#error
#pragma
#line
â€¦â€¦
#pragma pack()åœ¨ç»“æ„ä½“éƒ¨åˆ†ä»‹ç»ã€‚
```

## ä½œä¸š

ç»“æ„ä½“åç§»é‡`offsetof`å®çš„å®ç°

```c
#include<stdio.h>
#define OFFSETOF(type,member) (int)&(((type*)0)->member)
struct S
{
    char a;
    int b;
    char c;
};
int main()
{
    printf("%d\n", OFFSETOF(struct S, a));
    printf("%d\n", OFFSETOF(struct S, b));
    printf("%d\n", OFFSETOF(struct S, c));
    return 0;
}
```

å†™ä¸€ä¸ªå®ï¼Œå¯ä»¥å°†ä¸€ä¸ªæ•´æ•°çš„äºŒè¿›åˆ¶ä½çš„å¥‡æ•°ä½å’Œå¶æ•°ä½äº¤æ¢ã€‚

```c
#include<stdio.h>
#define SWAP(X) (((X&0x55555555)<<1)+((X&0xaaaaaaaa)>>1))
int main() {
	int a = 10;
	int b = SWAP(a);
	printf("%d\n", b);
	return 0;
}
```

